window.__require=function e(t,a,n){function o(i,c){if(!a[i]){if(!t[i]){var l=i.split("/");if(l=l[l.length-1],!t[l]){var s="function"==typeof __require&&__require;if(!c&&s)return s(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+i+"'")}i=l}var d=a[i]={exports:{}};t[i][0].call(d.exports,function(e){return o(t[i][1][e]||e)},d,d.exports,e,t,a,n)}return a[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)o(n[i]);return o}({AdBannerItem:[function(e,t,a){"use strict";cc._RF.push(t,"a76c4jDGBBIw527D25pkWJ/","AdBannerItem");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../../view/GameView/GameViewCtl"),c=e("../../JniCtl"),l=e("../AkInterCtl"),s=e("../AkInterM"),d=e("./AdInter"),p=cc._decorator,u=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eAdInterPre=null,t.eParent=null,t.mEADType=null,t.mIdx=null,t}return o(t,e),t.prototype.refresh=function(e){var t=this;this.mIdx=e,this.mEADType=c.default.mToTsBean.pknList[e];var a=s.EADIconType.ak_icon_ad;l.AKINTERCTL.mBundles[this.mEADType].load(a,function(e,a){if(e)cc.log("fyh: refresherr"+e);else{var n=cc.instantiate(a);n.getComponent(n.name).playAnimation(),n.parent=t.eParent,cc.log("fyh: addChild")}})},t.prototype.onClick=function(){var e=i.default.getInstance().mGameLayerView.node.getChildByName("AkInterShow");e&&e.removeFromParent(),cc.log("fyh: node create");var t=cc.instantiate(this.eAdInterPre);t.zIndex=2,t.name="AkInterShow",i.default.getInstance().mGameLayerView.node.addChild(t),t.getComponent(d.default).refresh(this.mIdx)},r([f(cc.Prefab)],t.prototype,"eAdInterPre",void 0),r([f(cc.Node)],t.prototype,"eParent",void 0),r([u],t)}(cc.Component);a.default=h,cc._RF.pop()},{"../../../view/GameView/GameViewCtl":"GameViewCtl","../../JniCtl":"JniCtl","../AkInterCtl":"AkInterCtl","../AkInterM":"AkInterM","./AdInter":"AdInter"}],AdBanner:[function(e,t,a){"use strict";cc._RF.push(t,"37f3aVM1ydDY6ibZH3IcVBQ","AdBanner");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../JniCtl"),c=e("./AdBannerItem"),l=cc._decorator,s=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.eADItem=null,t.eFrames=null,t.eScrollView=null,t}return o(t,e),t.prototype.start=function(){for(var e=this,t=i.default.mToTsBean.urlList.length,a=0;a<t;a++){var n=cc.instantiate(this.eADItem);n.parent=this.eScrollView.content,n.getComponent(c.default).refresh(a)}this.node.active=!1,this.scheduleOnce(function(){e.node.active=!0})},r([d({type:cc.Prefab,tooltip:"\u5e7f\u544a\u6309\u94ae"})],t.prototype,"eADItem",void 0),r([d({type:cc.Node,tooltip:"\u5927\u8fb9\u6846"})],t.prototype,"eFrames",void 0),r([d(cc.ScrollView)],t.prototype,"eScrollView",void 0),r([s],t)}(cc.Component);a.default=p,cc._RF.pop()},{"../../JniCtl":"JniCtl","./AdBannerItem":"AdBannerItem"}],AdInter:[function(e,t,a){"use strict";cc._RF.push(t,"e8920xp4rFHuJlWPEb+cIeV","AdInter");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../JniCtl"),c=e("../AkInterCtl"),l=e("../AkInterM"),s=cc._decorator,d=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ePreADNodes=null,t.eADPop=null,t.eADNodes=null,t.mEADType=null,t.mIdx=null,t}return o(t,e),t.prototype.start=function(){var e=cc.instantiate(this.ePreADNodes);this.eADNodes.addChild(e)},t.prototype.refresh=function(e){var t=this;i.default.getRandomUdidAndPackName();var a=i.default.mToTsBean;this.mIdx=e%a.idList.length,this.mEADType=a.pknList[e];var n=l.EADIconType.ak_interstitial_ad;c.AKINTERCTL.mBundles[this.mEADType].load(n,function(n,o){if(n)cc.log("fyh:"+n);else{t.eADPop.removeAllChildren();var r=cc.instantiate(o);r.getComponent(r.name).playAnimation(function(t){var n=Number(a.idList[e]);c.AKINTERCTL.adDownload(t,n),cc.log("fyh: adDownload")},function(){t.onClickClose()}),t.eADPop.addChild(r),cc.log("fyh: pos = ",t.node.getPosition().x,t.node.getPosition().y)}})},t.prototype.onClickClose=function(){cc.log("fyh: onClickClose"),this.node.removeFromParent()},r([p(cc.Prefab)],t.prototype,"ePreADNodes",void 0),r([p(cc.Node)],t.prototype,"eADPop",void 0),r([p(cc.Node)],t.prototype,"eADNodes",void 0),r([d],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../../JniCtl":"JniCtl","../AkInterCtl":"AkInterCtl","../AkInterM":"AkInterM"}],AdaptiveScreen:[function(e,t,a){"use strict";cc._RF.push(t,"ba00bud/zlDiY6tClWPdHIa","AdaptiveScreen");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,l=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgNode=null,t.viewWidth=640,t.viewHeight=1136,t}return o(t,e),t.prototype.onLoad=function(){this.screenAdapter()},t.prototype.start=function(){this.viewUp()},t.prototype.screenAdapter=function(){if(cc.Canvas.instance){this.stage=cc.Canvas.instance.node;var e=cc.Canvas.instance,t=cc.view.getFrameSize();t.width/t.height<e.designResolution.width/e.designResolution.height?(e.fitWidth=!0,e.fitHeight=!1):(e.fitHeight=!0,e.fitWidth=!1)}},t.prototype.viewUp=function(){var e=cc.winSize,t=e.width/this.viewWidth,a=e.height/this.viewHeight;this.bgNode.scale=1*Math.max(t,a)},r([l({type:cc.Node,tooltip:"\u5168\u5c4f\u80cc\u666f\u56fe\u7247\uff0c\u7528\u4e8e\u81ea\u9002\u5e94"})],t.prototype,"bgNode",void 0),r([l],t.prototype,"viewWidth",void 0),r([l],t.prototype,"viewHeight",void 0),r([c],t)}(cc.Component);a.default=s,cc._RF.pop()},{}],AkInterCtl:[function(e,t,a){"use strict";cc._RF.push(t,"faddevgNatLJ50KXt99Ab9+","AkInterCtl");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0}),a.AKINTERCTL=void 0;var o=e("../../../Game"),r=e("../../framework/Manager/FileLocalDataManager"),i=e("../../framework/Utils/ZipUtils"),c=e("../JniCtl"),l=e("./AkInterM"),s=cc._decorator.ccclass,d=function(){function e(){this.mVersions=null,this.mBundles=null,this.mIdx=0}var t;return t=e,e.getInstance=function(){return t.sInstance||(t.sInstance=new t,t.sInstance.init()),t.sInstance},e.prototype.init=function(){a.AKINTERCTL=this,this.mVersions=r.FileLocalDataManager.getInstance().getUserValue(r.EFileType[r.EFileType.version]),this.mVersions||(cc.log("fyh: AKINTERCTL init"),this.mVersions={})},e.prototype.setVersion=function(e,t){for(var a in this.mVersions[e]=t,cc.log("fyh: setVersion ${@type}"+e+"version"+t),r.FileLocalDataManager.getInstance().setUserValue(r.EFileType[r.EFileType.version],this.mVersions),this.mVersions)cc.log("fyh: mVersions = "+a+this.mVersions[a])},e.prototype.loadDownloadADs=function(){if(!cc.sys.isNative)return null;var e=jsb.fileUtils.getWritablePath()+l.remote+"\\";jsb.fileUtils.isDirectoryExist(e)||jsb.fileUtils.createDirectory(e);for(var n=c.default.mToTsBean,o=n.urlList.length,r=function(o){var r=n.urlList[o];console.log("fyh: loadConfigZip httpUrl: ",r);var c=n.pknList[o],l=e+c+".zip",s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType="arraybuffer",s.onload=function(){var d=s.response;if(d){var p=new Uint8Array(d);jsb.fileUtils.writeDataToFile(p,l)?(cc.log("fyh: Remote write file succeed.\u8fdc\u7a0b\u5199\u5165\u6587\u4ef6\u6210\u529f\u3002"),t.getZipIsComplete(l,n.sha1List[o])?(cc.warn("fyh: zip\u5305\u5b8c\u6574,\u5f00\u59cb\u89e3\u538b\u6587\u4ef6"),i.ZipUtils.unzip(d,e,c,a.AKINTERCTL.getVersion.bind(a.AKINTERCTL),function(){a.AKINTERCTL.loadBundle(c)})):cc.warn("fyh: url = "+r+"zip\u5305\u4e0d\u5b8c\u6574")):cc.warn("fyh: Remote write file failed.\u8fdc\u7a0b\u5199\u5165\u6587\u4ef6\u5931\u8d25\u3002")}},s.send(null)},s=0;s<o;s++)r(s)},e.prototype.loadBundle=function(e){var t=this,a=jsb.fileUtils.getWritablePath()+l.remote+"\\"+e;for(var n in cc.log("fyh: path = "+a),cc.log("fyh: type = "+e),cc.log("fyh: version   loadBundle = "+this.mVersions[e]),this.mVersions)cc.log("fyh: mVersions = "+n);cc.assetManager.loadBundle(a,{version:this.mVersions[e]},function(a,n){a?cc.log("fyh:  loadBundle   error"+a):(t.mBundles||(t.mBundles={}),t.mBundles[e]=n,cc.log("fyh: loadBundle ${@type}"+e+"success"+n))})},e.prototype.adDownload=function(e,a){var n=t.mFromhttpData,o=c.default.mToTsBeanInfo,r=e+"&referrer="+n.country+">>"+n.lang+">>"+n.google_id+">>"+n.user_id+">>"+a+">>"+o.packName+">>"+c.default.mUdid;c.default.jumpGp(r),cc.log("fyh: adDownload: URL = "+r)},e.prototype.checkAD=function(){if(l.IS_AD){if(l.BUNDLES_MIN>Object.keys(a.AKINTERCTL.mBundles||{}).length){cc.log("fyh: \u521b\u5efa\u5e7f\u544a\u4e0b\u8f7d\u6309\u94ae");var e=c.default.mToTsBean;return e&&e.urlList,!1}return!0}return!1},e.prototype.getVersion=function(e,t){var a=this,n=Object.keys(t),o=!1,r=!1;cc.log("fyh:  fileNames.length "+n.length);for(var i=0,c=n;i<c.length;i++){var s=c[i];if(r)break;s.replace(/config.([\w+]+).json/g,function(t,n){return r=!0,a.mVersions[e]!==n&&(cc.log("fyh: getVersion: "+e+" "+n),a.setVersion(e,n),o=!0),cc.log("fyh: substring: "+t),t})}var d=jsb.fileUtils.getWritablePath()+l.remote+"\\"+e+"\\";return o||jsb.fileUtils.isDirectoryExist(d)||(o=!0),o},e.getFromhttp=function(){var e=t.mFromhttpData;if(!(e.country&&e.lang&&e.google_id&&e.user_id))return!1;cc.log("fyh: ts getFromhttp");var a=cc.Canvas.instance.designResolution;return e.ad_palace_id="end",e.screen_size=a.width+"*"+a.height,e.life_time=Math.floor(Date.now()/1e3-o.GAME.mLifeTime).toString(),e.level=(0).toString(),c.default.callStaticMethod("org/cocos2dx/javascript/akinter/InitDataUtil","getFromhttp","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e.ad_palace_id,e.screen_size,e.country,e.lang,e.google_id,e.user_id,e.life_time,e.level),!0},e.getZipIsComplete=function(e,t){return c.default.callStaticMethod("org/cocos2dx/javascript/akinter/InitDataUtil","getZipIsComplete","(Ljava/lang/String;Ljava/lang/String;)Z",e,t)},e.prototype.onHideGame=function(){},e.prototype.onShowGame=function(){},e.prototype.getADAction=function(){},e.sInstance=null,e.mFromhttpData={},t=n([s],e)}();a.default=d,cc._RF.pop()},{"../../../Game":"Game","../../framework/Manager/FileLocalDataManager":"FileLocalDataManager","../../framework/Utils/ZipUtils":"ZipUtils","../JniCtl":"JniCtl","./AkInterM":"AkInterM"}],AkInterM:[function(e,t,a){"use strict";cc._RF.push(t,"92fe2U8jD5Nzqbnah7tos17","AkInterM"),Object.defineProperty(a,"__esModule",{value:!0}),a.EADIconType=a.BUNDLES_MIN=a.IS_AD=a.remote=void 0,a.remote="remote",a.IS_AD=!0,a.BUNDLES_MIN=5,function(e){e.ak_icon_ad="AkIconAd",e.ak_interstitial_ad="AkInterstitialAd"}(a.EADIconType||(a.EADIconType={})),cc._RF.pop()},{}],AudioManager:[function(e,t,a){"use strict";cc._RF.push(t,"16d7aVnmU1PQrpFj9P1Fxvb","AudioManager"),Object.defineProperty(a,"__esModule",{value:!0}),a.AudioManager=void 0;var n=e("../Data/ConstValue"),o=e("./FileLocalDataManager"),r=function(){function e(){this.bgm="",this.audioStatue=!0,this.BGMStatue=!0}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initStatue=function(){this.BGMStatue=!o.FileLocalDataManager.getInstance().getUserValue(o.EFileType[o.EFileType.is_bgm_off]),this.audioStatue=!o.FileLocalDataManager.getInstance().getUserValue(o.EFileType[o.EFileType.is_audio_off])},e.prototype.setAudioStatue=function(e){this.audioStatue=e,o.FileLocalDataManager.getInstance().setUserValue(o.EFileType[o.EFileType.is_audio_off],!e),this.audioStatue||this.stopAll()},e.prototype.clickBtn=function(){this.playSound("btn")},e.prototype.getAudioStatue=function(){return this.audioStatue},e.prototype.setBGMStatue=function(e){this.BGMStatue=e,o.FileLocalDataManager.getInstance().setUserValue(o.EFileType[o.EFileType.is_bgm_off],!e),this.BGMStatue||this.stopBGMusic()},e.prototype.getBGMStatue=function(){return this.BGMStatue},e.prototype.playSound=function(e,t,a,o,r){if(void 0===o&&(o=null),void 0===r&&(r=null),this.audioStatue){var i=n.ConstValue.AUDIO_DIR+e;cc.loader.loadRes(i,cc.AudioClip,function(e,n){if(e)cc.error(e);else{var i=cc.audioEngine.play(n,t||!1,a||1);o&&o(i),r&&cc.audioEngine.setFinishCallback(i,r)}})}},e.prototype.stopAudio=function(e){cc.audioEngine.stop(e)},e.prototype.stopAll=function(){cc.audioEngine.stopAll()},e.prototype.stopBGMusic=function(){cc.audioEngine.stopMusic()},e.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},e.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},e.prototype.playBGM=function(e){if(this.bgm!=e){if(this.bgm=e,this.BGMStatue){cc.audioEngine.stopMusic();var t=n.ConstValue.AUDIO_DIR+e;cc.loader.loadRes(t,cc.AudioClip,function(e,t){e?cc.error(e):cc.audioEngine.playMusic(t,!0)})}}else this.resumeBGM()},e.prototype.resumeBGM=function(){cc.audioEngine.stopMusic();var e=n.ConstValue.AUDIO_DIR+this.bgm;cc.loader.loadRes(e,cc.AudioClip,function(e,t){e?cc.error(e):cc.audioEngine.playMusic(t,!0)})},e.instance=null,e}();a.AudioManager=r,cc._RF.pop()},{"../Data/ConstValue":"ConstValue","./FileLocalDataManager":"FileLocalDataManager"}],AudioPlayExtension:[function(e,t,a){"use strict";cc._RF.push(t,"f5171dGpWFGFZGEuFaQdUkt","AudioPlayExtension"),Object.defineProperty(a,"__esModule",{value:!0}),a.AudioPlayExtension=void 0;var n=e("../Manager/AudioManager"),o={"\u4f8b":"sfx_buttn","\u5b50":"sfx_erro"},r=function(){function e(){}return e.playJoinAudio=function(e,t){if(0==e.length)return console.warn("playJoinAudio : \u5185\u5bb9\u4e3a\u7a7a!"),void t();var a=0;(function r(){if(a>e.length-1)return console.log("'"+e+"' \u64ad\u653e\u5b8c\u6210."),void t();n.AudioManager.getInstance().playSound(o[e[a]],!1,1,null,r),a++})()},e}();a.AudioPlayExtension=r,cc._RF.pop()},{"../Manager/AudioManager":"AudioManager"}],BaseUI:[function(e,t,a){"use strict";cc._RF.push(t,"c6f98fmFUpFB6sV1mr7p/b9","BaseUI");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0}),a.BaseUI=void 0;var i=e("./Data/ConstValue"),c=e("./Manager/ListenerManager"),l=cc._decorator,s=l.ccclass,d=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.mData},set:function(e){this.mData=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tag",{get:function(){return this.mTag},set:function(e){this.mTag=e},enumerable:!1,configurable:!0}),t.getUrl=function(){return cc.log(this.className),i.ConstValue.PREFAB_UI_DIR+this.className},t.prototype.onDestroy=function(){c.ListenerManager.getInstance().removeAll(this)},t.prototype.onShow=function(){cc.log("BaseUI onShow")},t.className="BaseUI",r([s],t)}(cc.Component));a.BaseUI=d,cc._RF.pop()},{"./Data/ConstValue":"ConstValue","./Manager/ListenerManager":"ListenerManager"}],BidderCtl:[function(e,t,a){"use strict";cc._RF.push(t,"deeec7O+a5LEYyahBN/jBgO","BidderCtl");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0}),a.EAdEvent=void 0;var i,c=e("../JniCtl"),l=cc._decorator.ccclass;(function(e){e[e.LoadedInter=0]="LoadedInter",e[e.LoadedReward=1]="LoadedReward"})(i=a.EAdEvent||(a.EAdEvent={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bidInter=0,t._bidVideo=0,t.isGetReward=!1,t.successCall=null,t.failedCall=null,t}var a;return o(t,e),a=t,t.getInstance=function(){return null==this._instance&&(this._instance=new a),this._instance},Object.defineProperty(t.prototype,"bidInter",{get:function(){return this._bidInter},set:function(e){this._bidInter=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bidVideo",{get:function(){return this._bidVideo},set:function(e){this._bidVideo=e},enumerable:!1,configurable:!0}),t.prototype.reLoadBanner=function(){c.default.callStaticMethod("org/cocos2dx/javascript/bidder/BidBannerAd","createAndloadBanner","()V"),console.log("-----------------------\u52a0\u8f7d\u6a2a\u5e45\u5e7f\u544a-------------------------")},t.prototype.removeBanner=function(){c.default.callStaticMethod("org/cocos2dx/javascript/bidder/BidBannerAd","removeBanner","()V"),console.log("-----------------------\u79fb\u9664\u6a2a\u5e45\u5e7f\u544a-------------------------")},t.prototype.nativeBannerClick=function(){},t.prototype.reLoadBidInterstitial=function(){c.default.callStaticMethod("org/cocos2dx/javascript/bidder/BidInterstitialAd","loadAd","()V"),console.log("----------------------\u52a0\u8f7d\u63d2\u5c4f\u5e7f\u544a--------------------------")},t.prototype.nativeInterLoaded=function(){a.getInstance().bidInter=1,console.log("----------------------\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f--------------------------");var e=new cc.Event.EventCustom(i[i.LoadedInter],!0);cc.systemEvent.dispatchEvent(e)},t.prototype.showBidInterstitial=function(){c.default.callStaticMethod("org/cocos2dx/javascript/bidder/BidInterstitialAd","showAd","()V"),console.log("----------------------\u5c55\u793a\u63d2\u5c4f\u5e7f\u544a--------------------------")},t.prototype.nativeshowInterSuccess=function(){var e=this;a.getInstance().bidInter=0,console.log("----------------------\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u6210\u529f--------------------------"),this.scheduleOnce(function(){e.reLoadBidInterstitial()},1)},t.prototype.reLoadBidVideo=function(){this.bidVideo||(c.default.callStaticMethod("org/cocos2dx/javascript/bidder/BidVideoAd","loadAd","()V"),console.log("----------------------\u52a0\u8f7d\u6fc0\u52b1\u5e7f\u544a--------------------------"))},t.prototype.nativeVideoLoaded=function(){a.getInstance().bidVideo=1,console.log("----------------------\u6fc0\u52b1\u5e7f\u544a\u52a0\u8f7d\u6210\u529f--------------------------");var e=new cc.Event.EventCustom(i[i.LoadedReward],!0);cc.systemEvent.dispatchEvent(e)},t.prototype.showBidVideo=function(e,t){var n=this;a.getInstance().bidVideo=0,this.isGetReward=!1,this.successCall=e,this.failedCall=t,c.default.callStaticMethod("org/cocos2dx/javascript/bidder/BidVideoAd","showAd","()V"),console.log("----------------------\u5c55\u793a\u6fc0\u52b1\u5e7f\u544a--------------------------"),this.scheduleOnce(function(){n.isGetReward||(n.failedCall(),n.reLoadBidVideo())},1)},t.prototype.nativeGiveReward=function(){var e=this;this.successCall(),this.isGetReward=!0,console.log("----------------------\u83b7\u5f97\u6fc0\u52b1\u5e7f\u544a\u5956\u52b1--------------------------"),this.scheduleOnce(function(){e.reLoadBidVideo()},1)},t._instance=null,a=r([l],t)}(cc.Component);a.default=s,window.BidderCtl=s.getInstance(),cc._RF.pop()},{"../JniCtl":"JniCtl"}],BoundingBoxDemo:[function(e,t,a){"use strict";cc._RF.push(t,"d5f9dT/06tF45iF1u1hFPMw","BoundingBoxDemo");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./BoundingBoxHelp"),c=cc._decorator,l=c.ccclass,s=c.property;(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bbh=null,t.grs=null,t}o(t,e),t.prototype.update=function(){this.grs.clear();var e=this.bbh.getBoundingBoxWorldPositions("boundingBox");this.polygon(this.grs,e),this.grs.stroke()},t.prototype.polygon=function(e,t){if(!(t.length<3)){e.moveTo(t[0].x,t[0].y);for(var a=1;a<t.length;a++)e.lineTo(t[a].x,t[a].y);e.lineTo(t[0].x,t[0].y)}},r([s(i.default)],t.prototype,"bbh",void 0),r([s(cc.Graphics)],t.prototype,"grs",void 0),t=r([l],t)})(cc.Component),cc._RF.pop()},{"./BoundingBoxHelp":"BoundingBoxHelp"}],BoundingBoxHelp:[function(e,t,a){"use strict";cc._RF.push(t,"d28fa0BmSFGwY3HLHVIrT8f","BoundingBoxHelp");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=cc._decorator,c=i.ccclass,l=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.vertices=[],t.positions=[],t}return o(t,e),t.prototype.getSkeleton=function(){return null==this.skeleton&&(this.skeleton=this.node.getComponent(sp.Skeleton)),this.skeleton},t.prototype.getBoundingBoxWorldPositions=function(e){var t=this.getSkeleton();if(null==t)return console.warn("\u6ca1\u6709Spine\u8d44\u6e90\uff01"),this.positions;var a=t.findSlot(e);if(!a)return console.warn("\u6ca1\u6709\u627e\u5230\u63d2\u69fd\uff1a "+e),this.positions;var n=a.attachment;n.computeWorldVertices(a,0,n.worldVerticesLength,this.vertices,0,2);for(var o=0;o<this.vertices.length;o+=2)this.positions[o/2]||(this.positions[o/2]=cc.Vec2.ZERO),this.positions[o/2].x=this.vertices[o],this.positions[o/2].y=this.vertices[o+1];for(o=0;o<this.positions.length;o++)this.positions[o]=this.node.convertToWorldSpaceAR(this.positions[o]);return this.positions},t.prototype.getBoundingBoxRelativePositions=function(e,t){for(var a=this.getBoundingBoxWorldPositions(e),n=0;n<a.length;n++)a[n]=t.convertToNodeSpaceAR(a[n]);return a},r([c],t)}(cc.Component));a.default=l,cc._RF.pop()},{}],CardBaseCtl:[function(e,t,a){"use strict";cc._RF.push(t,"e4d560ZBChErJTEg4dnzvcR","CardBaseCtl");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0}),a.hasLifeCard=void 0;var o=e("../../../Game"),r=e("../../framework/Manager/AudioManager"),i=e("../../view/GameTimeView/GameTimeViewCtl"),c=e("../../view/GameView/GameViewCtl"),l=e("../../view/ShopView/ShopCtl"),s=e("../../view/TaskView/TaskViewCtl"),d=e("../CardPack/CardPackM"),p=e("../Model/CardTypeE"),u=e("./CardBase"),f=e("./CardFactoryCtl");a.hasLifeCard=[300,301,302,309,603,604,801,802,803,804,805,806,807];var h=cc._decorator.ccclass,g=function(){function e(){}var t;return t=e,e.getInstance=function(){return t.sInstance||(t.sInstance=new t),t.sInstance},e.prototype.isZombie=function(e){return e.cardTypeIdx>=p.cardType_E.Littlezombie&&e.cardTypeIdx<=p.cardType_E.Caesar||e.cardTypeIdx==p.cardType_E.Demon},e.prototype.isHuman=function(e){return e.cardTypeIdx>=p.cardType_E.Survivor&&e.cardTypeIdx<=p.cardType_E.explorer},e.prototype.isAnimal=function(e){return e.cardTypeIdx>=p.cardType_E.Hound&&e.cardTypeIdx<=p.cardType_E.Honeybee},e.prototype.isFood=function(e){return e.cardTypeIdx>=p.cardType_E.Peach&&e.cardTypeIdx<=p.cardType_E.Meal_bag},e.prototype.hasSurviver=function(e){var a=!1;return e.childCard.children.forEach(function(e){t.getInstance().isHuman(e.getComponent(u.default))&&(a=!0)}),a},e.prototype.sellCard=function(e){var t=c.default.getInstance().mGameLayerView.sellNode,a=e.node.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO));if(cc.Vec2.distance(a,e.node.getPosition())<50&&0!=e.coin){r.AudioManager.getInstance().playSound("sellCard");var n=0;n+=e.coin;for(var l=0;l<e.childCard.children.length;l++){var d=e.childCard.children[l].getComponent(u.default);if(0==d.coin)return!1;n+=d.coin}return e.cardTypeIdx==p.cardType_E.Refuge&&(o.GAME.maxCardNum-=4,i.default.getInstance().mGameTimeView.setCard()),e.cardTypeIdx==p.cardType_E.Refugecamp&&(o.GAME.maxCardNum-=7,i.default.getInstance().mGameTimeView.setCard()),s.default.getInstance().completeTask(2),f.default.getInstance().removeCard(e),f.default.getInstance().createCoinCard(n),o.GAME.isContinueGame||i.default.getInstance().mGameTimeView.testCardIsMore(),!0}return!1},e.prototype.buyCardPack=function(e){for(var t=c.default.getInstance().mGameLayerView.cardPackNodeArr,a=0,n=50,o=0;o<t.length;o++){var r=t[o],i=e.node.parent.convertToNodeSpaceAR(r.convertToWorldSpaceAR(cc.Vec2.ZERO));cc.Vec2.distance(i,e.node.getPosition())<=n&&(a=o,n=cc.Vec2.distance(i,e.node.getPosition()))}if(n>=50)return!1;var s=d.allCardPackPrice[a],p=e.childCard.children.length+1;if(p<s)return!1;var u=p-s;return l.default.getInstance().createPackage(a),f.default.getInstance().removeCard(e),f.default.getInstance().createCoinCard(u),!0},e.sInstance=null,t=n([h],e)}();a.default=g,cc._RF.pop()},{"../../../Game":"Game","../../framework/Manager/AudioManager":"AudioManager","../../view/GameTimeView/GameTimeViewCtl":"GameTimeViewCtl","../../view/GameView/GameViewCtl":"GameViewCtl","../../view/ShopView/ShopCtl":"ShopCtl","../../view/TaskView/TaskViewCtl":"TaskViewCtl","../CardPack/CardPackM":"CardPackM","../Model/CardTypeE":"CardTypeE","./CardBase":"CardBase","./CardFactoryCtl":"CardFactoryCtl"}],CardBase:[function(e,t,a){"use strict";cc._RF.push(t,"5cfb2wcJH1NF4OgtZaH5Zlc","CardBase");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./../../framework/Manager/AudioManager"),c=e("../../../Game"),l=e("../../view/GameView/GameViewCtl"),s=e("../Model/CardFightingM"),d=e("../Model/CardPrice"),p=e("../Model/CardTypeC"),u=e("../Model/CardTypeE"),f=e("./CardBaseCtl"),h=e("./CardFactoryCtl"),g=e("./CardFightingCtl"),y=e("./CardMergeCtl"),m=e("../../view/GameTimeView/GameTimeViewCtl"),v=cc._decorator,C=v.ccclass,_=v.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardSpr=null,t.cardShadow=null,t.cardType=null,t.top=null,t.down=null,t.cardTip=null,t.childCard=null,t.coinNumLabel=null,t.foodEatNumLabel=null,t.lifeNumLabel=null,t.idLb=null,t.cardfight=null,t.productBar=null,t.progressLabel=null,t.fightMaterial=null,t.defaultMaterial=null,t.productLife=-1,t.canPutCard=[],t.findCall=null,t.cardId=0,t.isOpenLimit=!0,t.fightPos=null,t.createCoin=!1,t.enermy=null,t._coin=1,t._foodEatNum=1,t._lifeNum=1,t}var a;return o(t,e),a=t,t.prototype.setEnermy=function(e){this.enermy=e,this.cardfight.node.active=!0},t.prototype.getEnermy=function(){return this.enermy},t.prototype.clearEnermy=function(){this.enermy=null,this.cardfight.node.active=!1},Object.defineProperty(t.prototype,"coin",{get:function(){return this._coin},set:function(e){this._coin=e,this._coin<0&&(this._coin=0),this.coinNumLabel.string=e.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"foodEatNum",{get:function(){return this._foodEatNum},set:function(e){this._foodEatNum=e,this.foodEatNumLabel.string=e.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lifeNum",{get:function(){return this._lifeNum},set:function(e){this._lifeNum=e,this._lifeNum<0&&(this._lifeNum=0),this.lifeNumLabel.string=this._lifeNum.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topCard",{get:function(){return this._topCard},set:function(e){this._topCard=e,this.top&&(this.top.string=e._cardTypeC)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"downCard",{get:function(){return this._downCard},set:function(e){this._downCard=e,this.down&&(this.down.string=e._cardTypeC)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cardTypeIdx",{get:function(){return this._cardTypeIdx},set:function(e){this._cardTypeIdx=e,this._cardTypeC=p.cardType_C[e],this._cardTypeE=u.cardType_E[u.cardType_E[e]],c.GAME.language==c.gameLanguage.Chinese?this.cardType.string=this._cardTypeC:this.cardType.string=this._cardTypeE,f.default.getInstance().isZombie(this)&&(c.GAME.allZombieCard.push(this),g.default.getInstance().AllZombieStartMove()),this.cardSpr.getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("card/"+this.cardTypeIdx,cc.SpriteFrame)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.startP=this.node.getPosition(),this.topCard=this,this.downCard=this,this.initCoin(),this.initFood(),this.initLife(),this.cardId=c.GAME.CardId,this.idLb.string=this.cardId.toString()},t.prototype.initCoin=function(){this.coin=d.priceMap.get(this._cardTypeIdx),0==this.coin&&(this.coinNumLabel.node.parent.active=!1)},t.prototype.initFood=function(){this.foodEatNum=null==d.foodMap.get(this._cardTypeIdx)?0:d.foodMap.get(this._cardTypeIdx),this.foodEatNum&&0!=this.foodEatNum||(this.foodEatNumLabel.node.parent.active=!1)},t.prototype.initLife=function(){this.lifeNum=null==s.lifeMap.get(this._cardTypeIdx)?0:s.lifeMap.get(this._cardTypeIdx),this.lifeNum&&0!=this.lifeNum||(this.lifeNumLabel.node.parent.active=!1)},t.prototype.onCardEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.offCardEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},t.prototype.setTip=function(){this.canPutCard=[];var e=c.GAME.keyArr.indexOf(this.cardTypeIdx);if(-1!=e){var t=this.nowClickIsAllCoin();t&&l.default.getInstance().mGameLayerView.showCanBuyCardPackTip(t),this.nowClickIsAllSell()&&l.default.getInstance().mGameLayerView.showCanSellCardPackTip();for(var a=c.GAME.valueArr[e],n=0;n<c.GAME.allCard.length;n++)if(a.includes(c.GAME.allCard[n].cardTypeIdx)){var o=c.GAME.allCard[n];if(o.downCard==o&&o!=this&&o.node.parent!=this.childCard){if(this.cardTypeIdx==u.cardType_E.Furnace||this.cardTypeIdx==u.cardType_E.Soil||this.cardTypeIdx==u.cardType_E.Gold_box)return;if(o.getEnermy())return;o.cardTypeIdx>=u.cardType_E.Survivor&&o.cardTypeIdx<=u.cardType_E.explorer?this.cardTypeIdx>=u.cardType_E.Survivor&&this.cardTypeIdx<=u.cardType_E.explorer&&(o.cardTip.node.active=!0,this.canPutCard.push(o)):(o.cardTip.node.active=!0,this.canPutCard.push(o))}}}else this.cardTypeIdx==u.cardType_E.Blue_card&&this.nowClickIsAllSell()&&l.default.getInstance().mGameLayerView.showCanSellCardPackTip();this.blackMarketTip(),this.animalPutTip(),this.foodPutTip()},t.prototype.removetip=function(){c.GAME.allCard.forEach(function(e){e.cardTip&&(e.cardTip.node.active=!1)}),l.default.getInstance().mGameLayerView.removeCardPackTip()},t.prototype.nowClickIsAllCoin=function(){var e=0;if(this.cardTypeIdx!=u.cardType_E.Coin)return!1;e+=1;for(var t=0;t<this.childCard.children.length;t++){if(this.childCard.children[t].getComponent(a).cardTypeIdx!=u.cardType_E.Coin)return!1;e+=1}return e},t.prototype.nowClickIsAllSell=function(){if(this.coin<=0)return!1;for(var e=0;e<this.childCard.children.length;e++)if(this.childCard.children[e].getComponent(a).coin<=0)return!1;return!0},t.prototype.beBeatFunc=function(){var e=this;this.cardSpr.node.runAction(cc.sequence(cc.delayTime(.06),cc.callFunc(function(){e.cardSpr.setMaterial(0,e.fightMaterial)}),cc.delayTime(.06),cc.callFunc(function(){e.cardSpr.setMaterial(0,e.defaultMaterial)})))},t.prototype.foodPutTip=function(){var e=this;f.default.getInstance().isFood(this)&&c.GAME.allCard.forEach(function(t){t.downCard==t&&t!=e&&t.node.parent!=e.childCard&&f.default.getInstance().isFood(t)&&!e.canPutCard.includes(t)&&(t.cardTip.node.active=!0,e.canPutCard.push(t))})},t.prototype.animalPutTip=function(){var e=this;f.default.getInstance().isAnimal(this)&&c.GAME.allCard.forEach(function(t){t.cardTypeIdx==u.cardType_E.Animal_cage&&(t.cardTip.node.active=!0,e.canPutCard.push(t))})},t.prototype.blackMarketTip=function(){var e=this;this.cardTypeIdx!=u.cardType_E.black_market&&this.coin>0&&this.childCard&&0==this.childCard.children.length&&c.GAME.allCard.forEach(function(t){t.cardTypeIdx==u.cardType_E.black_market&&(t.cardTip.node.active=!0,e.canPutCard.push(t))})},t.prototype.cardSound=function(){f.default.getInstance().isHuman(this)?i.AudioManager.getInstance().playSound("click_surviver"):this.cardTypeIdx==u.cardType_E.Coin?i.AudioManager.getInstance().playSound("click_coin"):i.AudioManager.getInstance().playSound("click_othercard")},t.prototype.onTouchStart=function(){var e=this;if(c.GAME.canTouch){if(this.cardSound(),c.GAME.nowTouchCardPack&&(c.GAME.nowTouchCardPack.removeFromParent(),c.GAME.nowTouchCardPack=null),this.startP=this.node.getPosition(),this.isOpenLimit=!1,this.cardSpr&&(this.cardShadow.active=!0,this.cardSpr.node.runAction(cc.spawn(cc.moveBy(.2,0,7),cc.scaleTo(.2,1.02,1.02)))),this.setTopZindex(),this.cardType){g.default.getInstance().stopFindSurvivorCard();var t=g.default.getInstance().fightCard(this);t&&t.enermy&&g.default.getInstance().stopFighting(t,t.enermy)}if(this.cardType&&this.topCard!=this){for(var n=this.topCard.childCard.children,o=[],r=n.indexOf(this.node)+1;r<n.length;r++)o.push(n[r]);var i=l.default.getInstance().mGameLayerView.carPanel.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO));this.node.parent=l.default.getInstance().mGameLayerView.carPanel,h.default.getInstance().getAnimal(this.node,this.cardTypeIdx),this.node.setPosition(i),o.forEach(function(t){var n=e.node.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO));t.parent=e.childCard,t.setPosition(n),t.getComponent(a).setTopZindex()}),h.default.getInstance().refreshAllCard()}this.setTouchCardTip(),this.setTip(),y.default.getInstance().checkMerge()}},t.prototype.setTouchCardTip=function(){if(this.cardType){for(var e=[this._cardTypeC],t=[1],n=0;n<this.childCard.children.length;n++){var o=this.childCard.children[n].getComponent(a),r=e.indexOf(o._cardTypeC);r>=0?t[r]+=1:(e.push(o._cardTypeC),t.push(1))}var i="";for(n=0;n<e.length;n++)i+=(o=e[n])+"X"+t[n];m.default.getInstance().mGameTimeView.showSelectTip(i)}},t.prototype.onTouchMove=function(e){if(c.GAME.canTouch){var t=e.target,a=e.touch.getDelta(),n=a.x,o=a.y;t.x+=n/c.GAME.nowScale,t.y+=o/c.GAME.nowScale}},t.prototype.onTouchEnd=function(){var e=this;c.GAME.canTouch&&(m.default.getInstance().mGameTimeView.hitSelectTip(),this.cardSpr&&0!=this.cardSpr.node.y&&this.cardSpr.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.2,0,0),cc.scaleTo(.2,1,1)),cc.callFunc(function(){e.cardShadow.active=!1}))),cc.Vec2.distance(this.startP,this.node.getPosition())<5?this.clickFunc():(c.GAME.scheduleCount=0,this.removetip(),this.cardTypeIdx!=u.cardType_E.Coin&&f.default.getInstance().sellCard(this)||c.GAME.isContinueGame&&this.cardTypeIdx==u.cardType_E.Coin&&f.default.getInstance().buyCardPack(this)||(this.node.y>=c.MAX_Y&&(this.node.y=c.MAX_Y),this.endCheck(),this.isOpenLimit=!0,g.default.getInstance().AllZombieStartMove())))},t.prototype.clickFunc=function(){this.cardTypeIdx==u.cardType_E.Gold_box&&(h.default.getInstance().createCoinCard(this.coin-1),this.coin=1),this.removetip()},t.prototype.findIdx=function(){for(var e=[],t=0;t<c.Game.getInstance().allCard.length;t++){var a=c.Game.getInstance().allCard[t],n=this.node.getBoundingBoxToWorld(),o=a.node.getBoundingBoxToWorld();if(a!=this&&cc.Intersection.rectRect(n,o)){var r=new cc.Rect;n.intersection(r,o);var i=r.width*r.height;(!a.getEnermy()||a.getEnermy()&&f.default.getInstance().isZombie(a))&&e.push({card:c.Game.getInstance().allCard[t],area:i})}}e.sort(function(e,t){return t.area-e.area});for(var s=[],d=!1,p=0;p<e.length;p++){var u=e[p];if(f.default.getInstance().isZombie(u.card)){d=!0,s=[u];break}}d||(s=e);var h=[],g=[];s.forEach(function(e){e.card.node.parent!=l.default.getInstance().mGameLayerView.carPanel?h.push(e):g.push(e)});var y=[];return h.forEach(function(e){y.push(e)}),g.forEach(function(e){y.push(e)}),y},t.prototype.endCheck=function(){var e=this;h.default.getInstance().refreshAllCard();var t=this.findIdx();if(0!=t.length)if(1==t.length&&f.default.getInstance().isZombie(t[0].card)&&this.checkIsFighting(t[0].card))t[0].card.endCheck();else for(var a=function(a){var o=t[a].card;if(o.node.parent==n.childCard||n.node.parent==o.childCard)return"continue";if(n.node.parent==o.childCard)return"continue";if(n.canPutCard.includes(o)){var r;r=o.topCard==o.downCard?cc.v2(0,-20):cc.v2(0,o.node.y-20),n.node.parent=o.topCard.childCard,n.node.setPosition(r);for(var i=[],l=0;l<n.childCard.children.length;l++){var s=n.childCard.children[l];i.push(s)}for(var d=0;d<i.length;d++)i[d].parent=o.topCard.childCard,i[d].setPosition(cc.v2(n.node.getPosition().x,n.node.getPosition().y-20*(d+1)));return h.default.getInstance().refreshAllCard(),y.default.getInstance().checkMerge(),{value:void 0}}if(o.topCard!=o)return n.checkIsFighting(o),"continue";if(f.default.getInstance().isZombie(n)&&f.default.getInstance().hasSurviver(o))return"continue";var p=n.node.getPosition(),u=cc.v2(o.node.getPosition().x,o.node.getPosition().y-o.childCard.childrenCount*c.GAME.cardDistance),g=u.x-p.x,m=Math.abs(p.x-u.x),v=u.y-p.y,C=Math.abs(p.y-u.y),_=C/m,T=0,I=0;if(m>=C?I=_*(T=n.node.getBoundingBoxToWorld().width/c.GAME.nowScale+c.GAME.nowScale):T=(I=n.node.getBoundingBoxToWorld().height/c.GAME.nowScale+c.GAME.nowScale+o.childCard.childrenCount*c.GAME.cardDistance)/_,f.default.getInstance().isZombie(o)){if(f.default.getInstance().isZombie(n))return{value:void 0};o.endCheck()}else{var w=n.elementMove(g,v,o,T,I);o.node.runAction(cc.sequence(w,cc.callFunc(function(){e.checkIsFighting(o),f.default.getInstance().isAnimal(o)||o.node.stopAction(w),o.topCard==o&&o.endCheck()})))}},n=this,o=0;o<t.length;o++){var r=a(o);if("object"==typeof r)return r.value}else y.default.getInstance().checkMerge()},t.prototype.checkIsFighting=function(e){return c.GAME.allSurvivorCard.indexOf(this)>=0&&f.default.getInstance().isZombie(e)?(g.default.getInstance().twoCardFight(this,e),!0):!!(c.GAME.allSurvivorCard.indexOf(e)>=0&&f.default.getInstance().isZombie(this))&&(g.default.getInstance().twoCardFight(e,this),!0)},t.prototype.elementMove=function(e,t,a,n,o){return e>=0?t>0?cc.moveTo(.2,cc.v2(this.node.position.x+n,this.node.position.y+o)):cc.moveTo(.2,cc.v2(this.node.position.x+n,this.node.position.y-o)):t>0?cc.moveTo(.2,cc.v2(this.node.position.x-n,this.node.position.y+o)):cc.moveTo(.2,cc.v2(this.node.position.x-n,this.node.position.y-o))},t.prototype.setTopZindex=function(){this.node.zIndex=2;for(var e=0;e<c.Game.getInstance().allCard.length;e++)c.Game.getInstance().allCard[e]!=this&&(c.Game.getInstance().allCard[e].node.zIndex=1)},t.prototype.update=function(){this.node.parent==l.default.getInstance().mGameLayerView.carPanel&&(this.node.x<c.MIN_X&&(this.node.x=c.MIN_X),this.node.x>c.MAX_X&&(this.node.x=c.MAX_X),this.node.y<c.MIN_Y&&(this.node.y=c.MIN_Y),this.isOpenLimit&&(this.productBar.node&&this.productBar.node.active?this.node.y>c.MAX_Y-15&&(this.node.y=c.MAX_Y-15):this.node.y>c.MAX_Y&&(this.node.y=c.MAX_Y)))},r([_(cc.Sprite)],t.prototype,"cardSpr",void 0),r([_(cc.Node)],t.prototype,"cardShadow",void 0),r([_(cc.Label)],t.prototype,"cardType",void 0),r([_(cc.Label)],t.prototype,"top",void 0),r([_(cc.Label)],t.prototype,"down",void 0),r([_(cc.Sprite)],t.prototype,"cardTip",void 0),r([_(cc.Node)],t.prototype,"childCard",void 0),r([_(cc.Label)],t.prototype,"coinNumLabel",void 0),r([_(cc.Label)],t.prototype,"foodEatNumLabel",void 0),r([_(cc.Label)],t.prototype,"lifeNumLabel",void 0),r([_(cc.Label)],t.prototype,"idLb",void 0),r([_(cc.Sprite)],t.prototype,"cardfight",void 0),r([_(cc.ProgressBar)],t.prototype,"productBar",void 0),r([_(cc.Label)],t.prototype,"progressLabel",void 0),r([_(cc.Material)],t.prototype,"fightMaterial",void 0),r([_(cc.Material)],t.prototype,"defaultMaterial",void 0),a=r([C],t)}(cc.Component);a.default=T,cc._RF.pop()},{"../../../Game":"Game","../../view/GameTimeView/GameTimeViewCtl":"GameTimeViewCtl","../../view/GameView/GameViewCtl":"GameViewCtl","../Model/CardFightingM":"CardFightingM","../Model/CardPrice":"CardPrice","../Model/CardTypeC":"CardTypeC","../Model/CardTypeE":"CardTypeE","./../../framework/Manager/AudioManager":"AudioManager","./CardBaseCtl":"CardBaseCtl","./CardFactoryCtl":"CardFactoryCtl","./CardFightingCtl":"CardFightingCtl","./CardMergeCtl":"CardMergeCtl"}],CardDescribe:[function(e,t,a){"use strict";cc._RF.push(t,"cbe57mNygZGfI6bdVavQ/YJ","CardDescribe"),Object.defineProperty(a,"__esModule",{value:!0}),a.blueArr=a.cardDescribe=void 0;var n=e("./CardTypeE");(function(e){e[e["\u4e00\u540d\u5b64\u8eab\u9003\u8131\u7684\u5e78\u5b58\u8005,\u8981\u8bbe\u6cd5\u5229\u7528\u5404\u79cd\u7269\u54c1\u62b5\u5fa1\u4e27\u5c38\u7684\u8fdb\u653b"]=100]="\u4e00\u540d\u5b64\u8eab\u9003\u8131\u7684\u5e78\u5b58\u8005,\u8981\u8bbe\u6cd5\u5229\u7528\u5404\u79cd\u7269\u54c1\u62b5\u5fa1\u4e27\u5c38\u7684\u8fdb\u653b",e[e["\u5728\u957f\u5927\u4e4b\u524d,\u53ea\u80fd\u5e2e\u4f60\u5904\u7406\u5269\u4e0b\u7684\u98df\u7269"]=101]="\u5728\u957f\u5927\u4e4b\u524d,\u53ea\u80fd\u5e2e\u4f60\u5904\u7406\u5269\u4e0b\u7684\u98df\u7269",e[e["\u88c5\u4e0a\u914d\u67aa,\u8ddf\u654c\u4eba\u6218\u6597\u5427"]=102]="\u88c5\u4e0a\u914d\u67aa,\u8ddf\u654c\u4eba\u6218\u6597\u5427",e[e["\u5e26\u4e0a\u6b65\u67aa,\u6218\u529b\u62c9\u6ee1"]=103]="\u5e26\u4e0a\u6b65\u67aa,\u6218\u529b\u62c9\u6ee1",e[e["\u4ed6\u4eec\u662f\u6709\u5192\u9669\u7cbe\u795e\u7684\u5e78\u5b58\u8005,\u63a2\u7d22\u5730\u56fe\u6548\u7387\u7ffb\u500d"]=104]="\u4ed6\u4eec\u662f\u6709\u5192\u9669\u7cbe\u795e\u7684\u5e78\u5b58\u8005,\u63a2\u7d22\u5730\u56fe\u6548\u7387\u7ffb\u500d",e[e["\u8fd9\u4e2a\u5e78\u5b58\u8005\u5df2\u7ecf\u4e27\u547d,\u4f46\u662f\u6ca1\u6709\u5b8c\u5168\u4e27\u547d"]=105]="\u8fd9\u4e2a\u5e78\u5b58\u8005\u5df2\u7ecf\u4e27\u547d,\u4f46\u662f\u6ca1\u6709\u5b8c\u5168\u4e27\u547d",e[e["\u6218\u6597\u529b\u5f88\u5f31\u7684\u5c0f\u578b\u4e27\u5c38"]=200]="\u6218\u6597\u529b\u5f88\u5f31\u7684\u5c0f\u578b\u4e27\u5c38",e[e["\u8499\u9762\u4e27\u5c38,\u4e0e\u4ed6\u5bf9\u6218\u8981\u5c0f\u5fc3\u4e86"]=201]="\u8499\u9762\u4e27\u5c38,\u4e0e\u4ed6\u5bf9\u6218\u8981\u5c0f\u5fc3\u4e86",e[e["\u51fb\u8d25\u4ed6"]=202]="\u51fb\u8d25\u4ed6",e[e["\u4e27\u5c38"]=203]="\u4e27\u5c38",e[e["\u4e27\u5c38\u8389\u8389"]=204]="\u4e27\u5c38\u8389\u8389",e[e["\u5927\u578b\u4e27\u5c38,\u4e0e\u4ed6\u5bf9\u6218\u8981\u5c0f\u5fc3\u4e86"]=205]="\u5927\u578b\u4e27\u5c38,\u4e0e\u4ed6\u5bf9\u6218\u8981\u5c0f\u5fc3\u4e86",e[e["\u4ed4\u7ec6\u627e\u627e,\u5174\u8bb8\u6709\u610f\u5916\u6536\u83b7"]=300]="\u4ed4\u7ec6\u627e\u627e,\u5174\u8bb8\u6709\u610f\u5916\u6536\u83b7",e[e["\u4e0d\u8981\u60f3\u7740\u4e58\u51c9\u4e86,\u5148\u6d3b\u4e0b\u6765"]=301]="\u4e0d\u8981\u60f3\u7740\u4e58\u51c9\u4e86,\u5148\u6d3b\u4e0b\u6765",e[e["\u4e0d\u77e5\u9053\u8c01\u4e22\u4e0b\u7684\u80cc\u5305,\u770b\u8d77\u6765\u4e3b\u4eba\u662f\u4e2a\u5403\u8d27"]=302]="\u4e0d\u77e5\u9053\u8c01\u4e22\u4e0b\u7684\u80cc\u5305,\u770b\u8d77\u6765\u4e3b\u4eba\u662f\u4e2a\u5403\u8d27",e[e["\u4e0d\u80fd\u5403,\u770b\u770b\u80fd\u4e0d\u80fd\u5408\u6210\u5176\u4ed6\u4e1c\u897f"]=303]="\u4e0d\u80fd\u5403,\u770b\u770b\u80fd\u4e0d\u80fd\u5408\u6210\u5176\u4ed6\u4e1c\u897f",e[e["\u6728\u5934\u53ef\u4ee5\u9020\u5f88\u591a\u4e1c\u897f,\u9ec4\u82b1\u68a8\u6728\u5f88\u503c\u94b1"]=304]="\u6728\u5934\u53ef\u4ee5\u9020\u5f88\u591a\u4e1c\u897f,\u9ec4\u82b1\u68a8\u6728\u5f88\u503c\u94b1",e[e["\u6211\u613f\u6c38\u8fdc\u505a\u4e00\u4e2a\u5c0f\u87ba\u4e1d\u9489!"]=305]="\u6211\u613f\u6c38\u8fdc\u505a\u4e00\u4e2a\u5c0f\u87ba\u4e1d\u9489!",e[e["\u6709\u94b1\u4e86\u5c31\u80fd\u4e70\u66f4\u591a\u5361\u5305\u4e86"]=306]="\u6709\u94b1\u4e86\u5c31\u80fd\u4e70\u66f4\u591a\u5361\u5305\u4e86",e[e["\u91d1\u94a5\u5319\u53ef\u4ee5\u6253\u5f00\u91d1\u7bb1\u5b50\u5662"]=307]="\u91d1\u94a5\u5319\u53ef\u4ee5\u6253\u5f00\u91d1\u7bb1\u5b50\u5662",e[e["\u4ed6\u770b\u8d77\u6765\u9501\u4f4f\u4e86,\u627e\u627e\u94a5\u5319\u5427"]=308]="\u4ed6\u770b\u8d77\u6765\u9501\u4f4f\u4e86,\u627e\u627e\u94a5\u5319\u5427",e[e["\u5c5e\u4e8e\u4f60\u7684\u4e00\u4ea9\u4e09\u5206\u5730"]=309]="\u5c5e\u4e8e\u4f60\u7684\u4e00\u4ea9\u4e09\u5206\u5730",e[e["\u6709\u4e86\u5b83,\u5efa\u9020\u4e0d\u662f\u4ec0\u4e48\u96be\u4e8b"]=310]="\u6709\u4e86\u5b83,\u5efa\u9020\u4e0d\u662f\u4ec0\u4e48\u96be\u4e8b",e[e["\u9524\u4eba\u5f88\u75bc"]=311]="\u9524\u4eba\u5f88\u75bc",e[e["\u94c1\u94b3\u662f\u52b3\u52a8\u4eba\u6c11\u7528\u6765\u9632\u6b62\u76f4\u63a5\u89e6\u6478\u70ad\u706b\u7684\u7528\u5177"]=312]="\u94c1\u94b3\u662f\u52b3\u52a8\u4eba\u6c11\u7528\u6765\u9632\u6b62\u76f4\u63a5\u89e6\u6478\u70ad\u706b\u7684\u7528\u5177",e[e["\u5b9e\u5728\u662f\u5bb3\u6015\u5c31\u6316\u4e2a\u5751\u628a\u81ea\u5df1\u57cb\u8d77\u6765"]=313]="\u5b9e\u5728\u662f\u5bb3\u6015\u5c31\u6316\u4e2a\u5751\u628a\u81ea\u5df1\u57cb\u8d77\u6765",e[e["\u62ff\u4e0a\u5bb6\u4f19,\u611f\u89c9\u81ea\u5df1\u65e0\u654c"]=400]="\u62ff\u4e0a\u5bb6\u4f19,\u611f\u89c9\u81ea\u5df1\u65e0\u654c",e[e["\u4e27\u5c38\u4ec0\u4e48\u7684,\u653e\u9a6c\u8fc7\u6765\u5427"]=401]="\u4e27\u5c38\u4ec0\u4e48\u7684,\u653e\u9a6c\u8fc7\u6765\u5427",e[e["\u4ed6\u5f88\u53ef\u7231,\u4f46\u662f\u4e0d\u8001\u5b9e,\u8fd8\u80fd\u7ed9\u6211\u5e26\u70b9\u5403\u7684\u56de\u6765"]=500]="\u4ed6\u5f88\u53ef\u7231,\u4f46\u662f\u4e0d\u8001\u5b9e,\u8fd8\u80fd\u7ed9\u6211\u5e26\u70b9\u5403\u7684\u56de\u6765",e[e["\u5982\u679c\u4e0d\u80fd\u4e0b\u86cb\u53ef\u4ee5\u8003\u8651\u505a\u6210\u70e4\u9e2d"]=501]="\u5982\u679c\u4e0d\u80fd\u4e0b\u86cb\u53ef\u4ee5\u8003\u8651\u505a\u6210\u70e4\u9e2d",e[e["\u662f\u5148\u6709\u7684\u8702\u871c\u8fd8\u662f\u5148\u6709\u7684\u871c\u8702,\u662f\u5148\u6709\u7684\u9e21\u8fd8\u662f\u5148\u6709\u7684\u86cb"]=502]="\u662f\u5148\u6709\u7684\u8702\u871c\u8fd8\u662f\u5148\u6709\u7684\u871c\u8702,\u662f\u5148\u6709\u7684\u9e21\u8fd8\u662f\u5148\u6709\u7684\u86cb",e[e["\u4e00\u4e2a\u906e\u98ce\u6321\u96e8\u7684\u5730\u65b9,\u4e5f\u53ef\u4ee5\u751f\u5b69\u5b50(\u5f88\u91cd\u8981)"]=600]="\u4e00\u4e2a\u906e\u98ce\u6321\u96e8\u7684\u5730\u65b9,\u4e5f\u53ef\u4ee5\u751f\u5b69\u5b50(\u5f88\u91cd\u8981)",e[e["\u53ef\u4ee5\u5bb9\u7eb3\u66f4\u591a\u7684\u4e1c\u897f,\u53ef\u4ee5\u589e\u52a04\u70b9\u5361\u724c\u5bb9\u91cf"]=601]="\u53ef\u4ee5\u5bb9\u7eb3\u66f4\u591a\u7684\u4e1c\u897f,\u53ef\u4ee5\u589e\u52a04\u70b9\u5361\u724c\u5bb9\u91cf",e[e["\u5bb9\u91cf\u4e00\u6b21\u6027\u62c9\u6ee1,\u53ef\u4ee5\u589e\u52a04\u70b9\u5361\u724c\u5bb9\u91cf"]=602]="\u5bb9\u91cf\u4e00\u6b21\u6027\u62c9\u6ee1,\u53ef\u4ee5\u589e\u52a04\u70b9\u5361\u724c\u5bb9\u91cf",e[e["\u81ea\u52a8\u5316\u4f10\u6728\u6d41\u7a0b"]=603]="\u81ea\u52a8\u5316\u4f10\u6728\u6d41\u7a0b",e[e["\u6253\u9020\u94c1\u94b3\u7684\u57fa\u5730"]=604]="\u6253\u9020\u94c1\u94b3\u7684\u57fa\u5730",e[e["\u53ef\u4ee5\u7ed9\u4f60\u53d6\u6696,\u53ef\u4ee5\u8ba9\u4f60\u5403\u5230\u70ed\u817e\u817e\u7684\u98df\u7269,\u6216\u8bb8\u8fd8\u80fd\u9a71\u9664\u91ce\u517d"]=605]="\u53ef\u4ee5\u7ed9\u4f60\u53d6\u6696,\u53ef\u4ee5\u8ba9\u4f60\u5403\u5230\u70ed\u817e\u817e\u7684\u98df\u7269,\u6216\u8bb8\u8fd8\u80fd\u9a71\u9664\u91ce\u517d",e[e["\u6253\u9020\u5de5\u5175\u94f2\u7684\u57fa\u5730"]=606]="\u6253\u9020\u5de5\u5175\u94f2\u7684\u57fa\u5730",e[e["\u6279\u91cf\u5316\u6253\u9020\u6728\u9524\u7684\u57fa\u5730"]=607]="\u6279\u91cf\u5316\u6253\u9020\u6728\u9524\u7684\u57fa\u5730",e[e["\u6253\u9020\u5de5\u5177\u7bb1\u7684\u57fa\u5730"]=608]="\u6253\u9020\u5de5\u5177\u7bb1\u7684\u57fa\u5730",e[e["\u4f60\u7684\u4e13\u5c5e\u94f6\u884c,\u5982\u679c\u60f3\u4e70\u4e1c\u897f\u8bb0\u5f97\u5148\u53d6\u94b1\u54e6"]=609]="\u4f60\u7684\u4e13\u5c5e\u94f6\u884c,\u5982\u679c\u60f3\u4e70\u4e1c\u897f\u8bb0\u5f97\u5148\u53d6\u94b1\u54e6",e[e["\u628a\u5b83\u4eec\u5173\u8d77\u6765\u5c31\u5b89\u751f\u591a\u4e86"]=610]="\u628a\u5b83\u4eec\u5173\u8d77\u6765\u5c31\u5b89\u751f\u591a\u4e86",e[e["\u628a\u4f60\u7684\u4e1c\u897f\u653e\u5230\u5730\u4e0b\u5e02\u573a\u62cd\u5356,\u5174\u8bb8\u80fd\u5356\u5230\u66f4\u9ad8\u7684\u4ef7\u683c"]=611]="\u628a\u4f60\u7684\u4e1c\u897f\u653e\u5230\u5730\u4e0b\u5e02\u573a\u62cd\u5356,\u5174\u8bb8\u80fd\u5356\u5230\u66f4\u9ad8\u7684\u4ef7\u683c",e[e["\u53ef\u80fd\u4ed6\u6307\u5f15\u7740\u4ec0\u4e48"]=612]="\u53ef\u80fd\u4ed6\u6307\u5f15\u7740\u4ec0\u4e48",e[e["\u5728\u8bfa\u4e9a\u65b9\u821f\u4e0a\u53d1\u5c04\u5b83\u8bd5\u8bd5"]=613]="\u5728\u8bfa\u4e9a\u65b9\u821f\u4e0a\u53d1\u5c04\u5b83\u8bd5\u8bd5",e[e["\u51fb\u8d25\u4ed6!"]=614]="\u51fb\u8d25\u4ed6!",e[e["\u9664\u4e86\u5145\u9965,\u5b83\u8fd8\u6709\u4e30\u5bcc\u7684\u7ef4\u751f\u7d20c\u548c\u77ff\u7269\u8d28"]=700]="\u9664\u4e86\u5145\u9965,\u5b83\u8fd8\u6709\u4e30\u5bcc\u7684\u7ef4\u751f\u7d20c\u548c\u77ff\u7269\u8d28",e[e["\u8fd9\u79cd\u5371\u6025\u65f6\u523b\u80fd\u5403\u5230\u5b83\u771f\u597d\u554a"]=701]="\u8fd9\u79cd\u5371\u6025\u65f6\u523b\u80fd\u5403\u5230\u5b83\u771f\u597d\u554a",e[e["\u7334\u5b50\u559c\u6b22\u5403,\u6211\u4e5f\u559c\u6b22\u5403"]=702]="\u7334\u5b50\u559c\u6b22\u5403,\u6211\u4e5f\u559c\u6b22\u5403",e[e["\u80fd\u91cf\u8865\u5145\u7684\u5fc5\u9700\u54c1,\u51cf\u80a5\u4e0d\u8981\u5403"]=703]="\u80fd\u91cf\u8865\u5145\u7684\u5fc5\u9700\u54c1,\u51cf\u80a5\u4e0d\u8981\u5403",e[e["\u5148\u6709\u7684\u725b\u5976\u8fd8\u662f\u5148\u6709\u7684\u5976\u725b"]=704]="\u5148\u6709\u7684\u725b\u5976\u8fd8\u662f\u5148\u6709\u7684\u5976\u725b",e[e["\u70e4\u5236\u4e4b\u540e\u66f4\u597d\u5403,\u73b0\u5728\u4e5f\u5f88\u597d\u5403"]=705]="\u70e4\u5236\u4e4b\u540e\u66f4\u597d\u5403,\u73b0\u5728\u4e5f\u5f88\u597d\u5403",e[e["\u636e\u8bf4\u6bd4\u9e21\u86cb\u597d\u5403\u591a\u4e86"]=706]="\u636e\u8bf4\u6bd4\u9e21\u86cb\u597d\u5403\u591a\u4e86",e[e["\u751c\u751c\u7684"]=707]="\u751c\u751c\u7684",e[e["\u679c\u7136\u70e4\u5236\u4e4b\u540e\u597d\u5403\u591a\u4e86"]=708]="\u679c\u7136\u70e4\u5236\u4e4b\u540e\u597d\u5403\u591a\u4e86",e[e["\u5145\u9965\u5fc5\u5907,\u5982\u679c\u80fd\u6765\u4e2a\u70e4\u9999\u80a0\u5939\u5fc3\u5c31\u66f4\u597d\u4e86\u4e86"]=709]="\u5145\u9965\u5fc5\u5907,\u5982\u679c\u80fd\u6765\u4e2a\u70e4\u9999\u80a0\u5939\u5fc3\u5c31\u66f4\u597d\u4e86\u4e86",e[e["\u4f60\u771f\u662f\u4e2a\u70f9\u996a\u9ad8\u624b"]=710]="\u4f60\u771f\u662f\u4e2a\u70f9\u996a\u9ad8\u624b",e[e["\u6211\u53d1\u8a93,\u8fd9\u662f\u6211\u8fd9\u8f88\u5b50\u5403\u8fc7\u6700\u597d\u5403\u7684\u4e1c\u897f"]=711]="\u6211\u53d1\u8a93,\u8fd9\u662f\u6211\u8fd9\u8f88\u5b50\u5403\u8fc7\u6700\u597d\u5403\u7684\u4e1c\u897f",e[e["\u7ed9\u6211\u70b9\u94b1,\u5f00\u76f2\u76d2\u5427"]=800]="\u7ed9\u6211\u70b9\u94b1,\u5f00\u76f2\u76d2\u5427",e[e["\u6709\u5371\u9669\u7684\u5f00\u91c7,\u4e0d\u8fc7\u5e94\u8be5\u80fd\u627e\u5230\u4fe1\u53f7\u5f39"]=801]="\u6709\u5371\u9669\u7684\u5f00\u91c7,\u4e0d\u8fc7\u5e94\u8be5\u80fd\u627e\u5230\u4fe1\u53f7\u5f39",e[e["\u63a2\u7d22\u5bb6\u6765\u8fc7"]=802]="\u63a2\u7d22\u5bb6\u6765\u8fc7",e[e["\u4e00\u4e2a\u8352\u51c9\u7684\u5c0f\u6751\u5e84"]=803]="\u4e00\u4e2a\u8352\u51c9\u7684\u5c0f\u6751\u5e84",e[e["\u8be1\u5f02\u7684\u68ee\u6797"]=804]="\u8be1\u5f02\u7684\u68ee\u6797",e[e["\u4e00\u671b\u65e0\u9645,\u4e5f\u5c31\u53ea\u662f\u4e00\u671b\u65e0\u9645\u4e86"]=805]="\u4e00\u671b\u65e0\u9645,\u4e5f\u5c31\u53ea\u662f\u4e00\u671b\u65e0\u9645\u4e86",e[e["\u600e\u4e48\u770b\u90fd\u633a\u5413\u4eba"]=806]="\u600e\u4e48\u770b\u90fd\u633a\u5413\u4eba",e[e["\u627e\u627e\u6709\u6ca1\u6709\u4e0b\u53bb\u7684\u5165\u53e3"]=807]="\u627e\u627e\u6709\u6ca1\u6709\u4e0b\u53bb\u7684\u5165\u53e3",e[e["\u5947\u602a\u7684\u5165\u53e3"]=900]="\u5947\u602a\u7684\u5165\u53e3",e[e["\u84dd\u56fe"]=901]="\u84dd\u56fe"})(a.cardDescribe||(a.cardDescribe={})),a.blueArr=new Map([[n.cardType_E.WoodenHammer,"\u5e78\u5b58\u8005+\u6728\u57573+\u5de5\u5177\u7bb1=\u6728\u9524"],[n.cardType_E.Irontongs,"\u5e78\u5b58\u8005+\u94c1\u57573+\u5de5\u5177\u7bb1=\u94c1\u94b3"],[n.cardType_E.Pistol,"\u94c1\u5757+\u87ba\u4e1d2=\u624b\u67aa"],[n.cardType_E.Rifle,"\u87ba\u4e1d2+\u5de5\u5175\u94f2=\u6b65\u67aa"],[n.cardType_E.Tent,"\u94c1\u57572+\u6728\u5757=\u5e10\u7bf7"],[n.cardType_E.Refuge,"\u94c1\u5757+\u6728\u5757+\u87ba\u4e1d=\u907f\u96be\u6240"],[n.cardType_E.Refugecamp,"\u5de5\u5175\u94f2+\u5de5\u5177\u7bb1=\u4ed3\u5e93"],[n.cardType_E.Building_materials_base,"\u94c1\u5757+\u6728\u57573=\u5efa\u6750\u57fa\u5730"],[n.cardType_E.Welding_rail_base,"\u94c1\u57574+\u6728\u57572+\u5de5\u5177\u7bb1=\u710a\u8f68\u57fa\u5730"],[n.cardType_E.Furnace,"\u6728\u5757+\u5de5\u5177\u7bb1=\u706b\u7089"],[n.cardType_E.Machinery_base,"\u94c1\u5757+\u5de5\u5177\u7bb12+\u94c1\u94b32=\u673a\u68b0\u57fa\u5730"],[n.cardType_E.Wooden_factory,"\u94c1\u5757+\u5de5\u5177\u7bb1+\u5de5\u5175\u94f2=\u6728\u5de5\u57fa\u5730"],[n.cardType_E.Studio,"\u94c1\u57572+\u6728\u57574+\u94c1\u94b3=\u5236\u9020\u57fa\u5730"],[n.cardType_E.Gold_box,"\u94c1\u57572+\u91d1\u5e01=\u91d1\u5e01\u7bb1"],[n.cardType_E.Animal_cage,"\u94c1\u5757+\u94c1\u94b3+\u5de5\u5175\u94f2=\u52a8\u7269\u7b3c\u5b50"],[n.cardType_E.black_market,"\u5de5\u5177\u7bb1+\u6728\u9524+\u94c1\u94b3=\u9ed1\u5e02"],[n.cardType_E.Noah_Ark,"\u5e78\u5b58\u80053+\u6728\u95243+\u94c1\u94b33+\u5de5\u5175\u94f23=\u8bfa\u4e9a\u65b9\u821f"],[n.cardType_E.Roast_sausage,"\u706b\u7089+\u9999\u80a0=\u70e4\u9999\u80a0"],[n.cardType_E.Hot_dog,"\u70e4\u9999\u80a0+\u9762\u5305=\u70ed\u72d7"],[n.cardType_E.Meal_bag,"\u7f50\u5934+\u5de7\u514b\u529b+\u9999\u80a0+\u70ed\u72d7=\u9910\u5305"]]),cc._RF.pop()},{"./CardTypeE":"CardTypeE"}],CardFactoryCtl:[function(e,t,a){"use strict";cc._RF.push(t,"7559acHbx1MoINKD7yMuKJh","CardFactoryCtl");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("../../../Game"),r=e("../../framework/Manager/AudioManager"),i=e("../../framework/Utils/MathUtils"),c=e("../../view/GameTimeView/GameTimeViewCtl"),l=e("../../view/GameView/GameViewCtl"),s=e("../../view/IllustratedView/IllustratedCtl"),d=e("../../view/TaskView/TaskViewCtl"),p=e("../Model/CardDescribe"),u=e("../Model/CardTypeC"),f=e("../Model/CardTypeE"),h=e("./CardBase"),g=e("./CardMergeCtl"),y=cc._decorator.ccclass,m=function(){function e(){}var t;return t=e,e.getInstance=function(){return t.sInstance||(t.sInstance=new t),t.sInstance},e.prototype.createCoinCard=function(e){0==e&&this.refreshAllCard();for(var t=0;t<e;t++){for(var a=!1,n=0;n<o.GAME.allCard.length;n++){var r=o.GAME.allCard[n];if(r.getComponent(h.default).cardTypeIdx==f.cardType_E.Coin&&r.getComponent(h.default).downCard==r.getComponent(h.default)){if(a=!0,r.topCard==r){var i=cc.v2(0,-20);(c=this.createCard(i,f.cardType_E.Coin,r.childCard)).getComponent(h.default).getComponent(cc.Animation).play("smoke"),this.refreshAllCard(),r.endCheck()}else(c=this.createCard(cc.v2(r.node.x,r.node.y-20),f.cardType_E.Coin,r.node.parent)).getComponent(h.default).getComponent(cc.Animation).play("smoke"),this.refreshAllCard(),c.getComponent(h.default).topCard.endCheck();break}}if(!a){var c,s=l.default.getInstance().mGameLayerView.carPanel,d=l.default.getInstance().mGameLayerView.sellNode,p=s.convertToNodeSpaceAR(d.convertToWorldSpaceAR(cc.Vec2.ZERO));(c=this.createCard(cc.v2(p.x,o.MAX_Y),f.cardType_E.Coin,l.default.getInstance().mGameLayerView.carPanel)).getComponent(h.default).getComponent(cc.Animation).play("smoke"),this.refreshAllCard(),c.getComponent(h.default).endCheck()}}},e.prototype.createCard=function(e,t,a){var n=l.default.getInstance().mGameLayerView.cardPre,o=cc.instantiate(n);if(o.getComponent(h.default).cardTypeIdx=t,t==f.cardType_E.Blue_card){var i=this.bluePrint(),c=u.cardType_C[i];o.getComponent(h.default).cardType.node.active=!0,o.getComponent(h.default).cardType.string=c,s.default.getInstance().unlock(i)}return o.parent=a,o.setPosition(e),this.getAnimal(o,t),this.pushArr(o.getComponent(h.default),t),this.checkTask(t),g.default.getInstance().checkMerge(),r.AudioManager.getInstance().playSound("newCard"),s.default.getInstance().unlock(t),(t<f.cardType_E.Littlezombie||t>f.cardType_E.Caesar)&&o.getComponent(h.default).onCardEvent(),o},e.prototype.checkPos=function(e){e.topCard.setTip(),e.topCard.endCheck(),e.topCard.removetip()},e.prototype.removeCard=function(e){var t=e.childCard.children;if(t.length>0)for(var a=function(e){var a=t[e];a.removeFromParent(),o.GAME.allCard=o.GAME.allCard.filter(function(e){return e!==a.getComponent(h.default)}),o.GAME.allCoinCard=o.GAME.allCoinCard.filter(function(e){return e!==a.getComponent(h.default)}),o.GAME.allFoodCard=o.GAME.allFoodCard.filter(function(e){return e!==a.getComponent(h.default)}),o.GAME.allSurvivorCard=o.GAME.allSurvivorCard.filter(function(e){return e!==a.getComponent(h.default)}),o.GAME.allZombieCard=o.GAME.allZombieCard.filter(function(e){return e!==a.getComponent(h.default)})},n=t.length-1;n>=0;n--)a(n);e.node.removeFromParent(),e.getComponent(cc.Animation).play("smoke"),o.GAME.allCard=o.GAME.allCard.filter(function(t){return t!==e}),o.GAME.allCoinCard=o.GAME.allCoinCard.filter(function(t){return t!==e}),o.GAME.allFoodCard=o.GAME.allFoodCard.filter(function(t){return t!==e}),o.GAME.allSurvivorCard=o.GAME.allSurvivorCard.filter(function(t){return t!==e}),o.GAME.allZombieCard=o.GAME.allZombieCard.filter(function(t){return t!==e}),c.default.getInstance().mGameTimeView.refreshLabel()},e.prototype.pushArr=function(e,t){o.GAME.allCard.push(e),t==f.cardType_E.Coin?(o.GAME.allCoinCard.push(e),o.GAME.allCard.length>=4&&d.default.getInstance().completeTask(4),c.default.getInstance().mGameTimeView.setCoinLabel()):t>=100&&t<200?(o.GAME.allSurvivorCard.push(e),c.default.getInstance().mGameTimeView.setFood()):t>=700&&t<800&&(o.GAME.allFoodCard.push(e),c.default.getInstance().mGameTimeView.setFood()),c.default.getInstance().mGameTimeView.setCard(),o.GAME.CardId++,t==f.cardType_E.Refuge&&(o.GAME.maxCardNum+=4),t==f.cardType_E.Refugecamp&&(o.GAME.maxCardNum+=7)},e.prototype.getAnimal=function(e,t){var a=this;t!=f.cardType_E.Hound&&t!=f.cardType_E.Duck&&t!=f.cardType_E.Honeybee||e.runAction(cc.repeatForever(cc.sequence(cc.delayTime(3),cc.callFunc(function(){if(o.GAME.isContinueGame){if(1==i.MathUtils.getInstance().limitInteger(0,10)){var n;n=t==f.cardType_E.Duck?f.cardType_E.Duck_egg:t==f.cardType_E.Honeybee?f.cardType_E.Honey:f.cardType_E.Sausage,a.createCard(e.getPosition(),n,l.default.getInstance().mGameLayerView.carPanel)}var r=cc.v2(i.MathUtils.getInstance().limit(-70,70),i.MathUtils.getInstance().limit(-70,70));e.runAction(cc.sequence(cc.moveBy(.3,r),cc.callFunc(function(){e.getComponent(h.default).endCheck()})))}}))))},e.prototype.bluePrint=function(){var e=[];p.blueArr.forEach(function(t,a){e.push(a)});var t=i.MathUtils.getInstance().limitInteger(0,e.length-1);return e[t]},e.prototype.refreshAllCard=function(){var e=l.default.getInstance().mGameLayerView.carPanel;e&&(e.children.forEach(function(e){if(null!=e.getComponent(h.default).childCard)if(0==e.getComponent(h.default).childCard.childrenCount)e.getComponent(h.default).topCard=e.getComponent(h.default).downCard=e.getComponent(h.default);else{var t=e.getComponent(h.default).childCard.children[e.getComponent(h.default).childCard.childrenCount-1].getComponent(h.default),a=1;e.getComponent(h.default).childCard.children.forEach(function(n){var o=n.getComponent(h.default);o.topCard=e.getComponent(h.default),o.downCard=t,o.setTopZindex(),o.node.x=0,o.node.y=-20*a,a++}),e.getComponent(h.default).topCard=e.getComponent(h.default),e.getComponent(h.default).downCard=t}}),c.default.getInstance().mGameTimeView.setCoinLabel(),c.default.getInstance().mGameTimeView.setFood(),c.default.getInstance().mGameTimeView.setCard())},e.prototype.checkTask=function(e){e==f.cardType_E.Animal_cage&&d.default.getInstance().completeTask(21),e==f.cardType_E.Can&&d.default.getInstance().completeTask(3),e==f.cardType_E.Wood&&d.default.getInstance().completeTask(10),e==f.cardType_E.Ferrous&&d.default.getInstance().completeTask(11),e==f.cardType_E.Furnace&&d.default.getInstance().completeTask(12),e==f.cardType_E.Tent&&d.default.getInstance().completeTask(13),e==f.cardType_E.Pistol&&d.default.getInstance().completeTask(16),e==f.cardType_E.Rifle&&d.default.getInstance().completeTask(17),e==f.cardType_E.Militia&&d.default.getInstance().completeTask(18),e==f.cardType_E.Infantry&&d.default.getInstance().completeTask(19),e==f.cardType_E.Hound&&d.default.getInstance().completeTask(20),e==f.cardType_E.Catacombs&&d.default.getInstance().completeTask(25),e==f.cardType_E.Noah_Ark&&d.default.getInstance().completeTask(26),e==f.cardType_E.Signal_bomb&&d.default.getInstance().completeTask(27),e==f.cardType_E.Demon&&d.default.getInstance().completeTask(29)},e.sInstance=null,t=n([y],e)}();a.default=m,cc._RF.pop()},{"../../../Game":"Game","../../framework/Manager/AudioManager":"AudioManager","../../framework/Utils/MathUtils":"MathUtils","../../view/GameTimeView/GameTimeViewCtl":"GameTimeViewCtl","../../view/GameView/GameViewCtl":"GameViewCtl","../../view/IllustratedView/IllustratedCtl":"IllustratedCtl","../../view/TaskView/TaskViewCtl":"TaskViewCtl","../Model/CardDescribe":"CardDescribe","../Model/CardTypeC":"CardTypeC","../Model/CardTypeE":"CardTypeE","./CardBase":"CardBase","./CardMergeCtl":"CardMergeCtl"}],CardFightingCtl:[function(e,t,a){"use strict";cc._RF.push(t,"3d99eMXnbxDIr0jUzs+Rgzb","CardFightingCtl");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("./../../framework/Utils/LogWrap"),r=e("./../../framework/Utils/MathUtils"),i=e("../../../Game"),c=e("../../view/GameTimeView/GameTimeViewCtl"),l=e("../../view/GameView/GameViewCtl"),s=e("../../view/TaskView/TaskViewCtl"),d=e("../Model/CardFightingM"),p=e("../Model/CardTypeE"),u=e("./CardBase"),f=e("./CardFactoryCtl"),h=e("../../framework/Manager/AudioManager"),g=e("../../framework/Manager/FileLocalDataManager"),y=e("../../framework/Data/CustomTypes"),m=cc._decorator.ccclass,v=function(){function e(){this.isComing=!1}var t;return t=e,e.getInstance=function(){return t.sInstance||(t.sInstance=new t),t.sInstance},e.prototype.stopFindSurvivorCard=function(){i.GAME.allZombieCard.forEach(function(e){e.node.stopAction(e.findCall)})},e.prototype.getSurvivorCardPos=function(e){for(var t=0;t<i.GAME.allSurvivorCard.length;t++){var a=i.GAME.allSurvivorCard[t];if(a.cardTypeIdx!=p.cardType_E.Friendlyzombie){var n=l.default.getInstance().mGameLayerView.carPanel.convertToNodeSpaceAR(a.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),o=cc.v2(e.node.position.x,e.node.position.y),c=n.sub(o).normalize(),s=r.MathUtils.getInstance().limitInteger(25,40);return c.x*=s,c.y*=s,c}}},e.prototype.AllZombieStartMove=function(){var e=this;i.GAME.allZombieCard.forEach(function(t){var a;t.node.stopAction(t.findCall),t.findCall=cc.repeatForever(cc.sequence(cc.delayTime(1+r.MathUtils.getInstance().limit(.1,.5)),cc.callFunc(function(){i.GAME.isContinueGame&&t.node.runAction(cc.sequence(cc.moveBy(.5,a),cc.callFunc(function(){t.endCheck()}))),a=e.getSurvivorCardPos(t)}),cc.delayTime(1))),t.node.runAction(t.findCall)})},e.prototype.twoCardFight=function(e,t){var a=this;this.stopFindSurvivorCard(),l.default.getInstance().mGameLayerView.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){t.getEnermy()||t.setEnermy(e),e.getEnermy()||(e.setEnermy(t),a.fight(e))})))},e.prototype.fight=function(e){var t=this,a=e.getEnermy();if(a){if(null==a.fightPos&&(a.fightPos=a.node.position),null==e.fightPos){var n=l.default.getInstance().mGameLayerView.carPanel.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.Vec2.ZERO));e.fightPos=n}a.getEnermy()==e&&this.enermyCardMove(a,e),e.node.parent==l.default.getInstance().mGameLayerView.carPanel?this.ourCardMove(e,a):e.node.runAction(cc.sequence(cc.delayTime(2.1),cc.callFunc(function(){t.OurDied(e,a)?(t.stopFighting(e,a),t.AllZombieStartMove()):t.fight(e)})))}},e.prototype.enermyCardMove=function(e,t){var a=this;e.node.runAction(cc.sequence(cc.callFunc(function(){o.LogWrap.log("\u4e27\u5c38\u51fa\u53d1\u4e86"),a.isComing=!1,e.setTopZindex()}),cc.moveTo(.4,t.fightPos),cc.callFunc(function(){a.damage(e,t),a.shake(t)}),cc.moveTo(.4,e.fightPos),cc.callFunc(function(){a.isComing=!0,o.LogWrap.log("\u4e27\u5c38\u56de\u53bb\u4e86")}),cc.delayTime(.3),cc.callFunc(function(){a.OurDied(t,e)&&a.stopFighting(t,e)})))},e.prototype.ourCardMove=function(e,t){var a=this;t.getEnermy()&&e.node.runAction(cc.sequence(cc.delayTime(1.2),cc.callFunc(function(){t.getEnermy()!=e?a.isComing?(e.setTopZindex(),o.LogWrap.log("\u53ef\u4ee5\u8fdb\u653b"),a.test(e,t)):(a.stopFighting(e,t),o.LogWrap.log("\u4e0d\u53ef\u4ee5\u8fdb\u653b")):(e.setTopZindex(),a.test(e,t))})))},e.prototype.test=function(e,t){var a=this;t.fightPos&&e.node.runAction(cc.sequence(cc.moveTo(.4,t.fightPos),cc.callFunc(function(){a.damage(e,t),a.shake(t)}),cc.moveTo(.4,e.fightPos),cc.callFunc(function(){a.enermyDied(e,t)?a.stopFighting(e,t):a.fight(e)})))},e.prototype.shake=function(e){e.beBeatFunc(),e.getComponent(cc.Animation).play("smoke"),e.node.runAction(cc.sequence(cc.rotateTo(.03,10),cc.rotateTo(.03,0),cc.rotateTo(.03,-10),cc.rotateTo(.03,0)))},e.prototype.damage=function(e,t){var a=d.missMap.get(e.cardTypeIdx);h.AudioManager.getInstance().playSound("fight"),100*Math.random()<=a?this.labelAction("miss",t):(this.labelAction((-d.damageMap.get(e.cardTypeIdx)).toString(),t),t.lifeNum-=d.damageMap.get(e.cardTypeIdx))},e.prototype.labelAction=function(e,t){var a=l.default.getInstance().mGameLayerView.tipLabelLayer,n=cc.instantiate(l.default.getInstance().mGameLayerView.tipLabel).getComponent(cc.Label),o=a.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(cc.Vec2.ZERO));n.node.parent=a,n.node.setPosition(cc.v2(o.x,o.y+t.node.height/4)),n.string=e,n.node.color="miss"==e?cc.Color.WHITE:cc.Color.RED,n.node.runAction(cc.sequence(cc.moveBy(.5,0,t.node.height/2),cc.fadeOut(.5),cc.removeSelf()))},e.prototype.OurDied=function(e,t){var a=this;return e.lifeNum<=0&&e.cardTypeIdx!=p.cardType_E.Friendlyzombie&&(c.default.getInstance().mGameTimeView.showOneDiePanel(function(){e.lifeNum=d.lifeMap.get(e.cardTypeIdx),a.AllZombieStartMove()},function(){a.survivorDie(e,t),a.AllZombieStartMove()},!this.testIsSurvivor()),h.AudioManager.getInstance().playSound("dead"),!0)},e.prototype.enermyDied=function(e,t){return t.lifeNum<=0&&(t.createCoin||(f.default.getInstance().removeCard(t),f.default.getInstance().createCard(t.fightPos,p.cardType_E.Coin,l.default.getInstance().mGameLayerView.carPanel)),t.createCoin=!0,h.AudioManager.getInstance().playSound("dead"),s.default.getInstance().completeTask(24),t.cardTypeIdx==p.cardType_E.Demon&&(c.default.getInstance().mGameTimeView.showBeatDevilPanel(),s.default.getInstance().completeTask(31),2==i.GAME.coefficientOfDifficulty&&(i.GAME.difficultyIsUnlock=!0,g.FileLocalDataManager.getInstance().setUserValue(y.GameDifficulty.GAME_DIFFICULT,!0))),!0)},e.prototype.survivorDie=function(e){f.default.getInstance().removeCard(e),s.default.getInstance().completeTask(15),f.default.getInstance().createCard(e.node.getPosition(),p.cardType_E.Friendlyzombie,l.default.getInstance().mGameLayerView.carPanel)},e.prototype.stopFighting=function(e,t){var a=this.fightCard(e);a&&(a.node.stopAllActions(),a.node.position=a.fightPos,a.topCard!=a&&(a.node.position=a.node.parent.convertToNodeSpaceAR(l.default.getInstance().mGameLayerView.node.convertToWorldSpaceAR(a.fightPos))),a.node.rotation=0,t.node.stopAllActions(),t.node.position=a.getEnermy().fightPos,t.node.rotation=0,i.GAME.allCard.forEach(function(e){e.getEnermy()==t&&e.clearEnermy()}),t.clearEnermy(),t.fightPos=null,a.clearEnermy(),a.fightPos=null)},e.prototype.fightCard=function(e){if(e.getEnermy())return e;for(var t=0;t<e.childCard.children.length;t++){var a=e.childCard.children[t].getComponent(u.default);if(a.getEnermy())return a}return null},e.prototype.testIsSurvivor=function(){for(var e=0;e<i.GAME.allSurvivorCard.length;e++)if(i.GAME.allSurvivorCard[e].lifeNum>0)return!0;return!1},e.sInstance=null,t=n([m],e)}();a.default=v,cc._RF.pop()},{"../../../Game":"Game","../../framework/Data/CustomTypes":"CustomTypes","../../framework/Manager/AudioManager":"AudioManager","../../framework/Manager/FileLocalDataManager":"FileLocalDataManager","../../view/GameTimeView/GameTimeViewCtl":"GameTimeViewCtl","../../view/GameView/GameViewCtl":"GameViewCtl","../../view/TaskView/TaskViewCtl":"TaskViewCtl","../Model/CardFightingM":"CardFightingM","../Model/CardTypeE":"CardTypeE","./../../framework/Utils/LogWrap":"LogWrap","./../../framework/Utils/MathUtils":"MathUtils","./CardBase":"CardBase","./CardFactoryCtl":"CardFactoryCtl"}],CardFightingM:[function(e,t,a){"use strict";cc._RF.push(t,"70068e1IA9Kqb/TzOuh77Sj","CardFightingM"),Object.defineProperty(a,"__esModule",{value:!0}),a.lifeMap=a.missMap=a.damageMap=void 0;var n=e("./CardTypeE");a.damageMap=new Map([[n.cardType_E.Survivor,2],[n.cardType_E.Baby,2],[n.cardType_E.Militia,3],[n.cardType_E.Infantry,4],[n.cardType_E.explorer,1],[n.cardType_E.Friendlyzombie,2],[n.cardType_E.Littlezombie,1],[n.cardType_E.Medium,2],[n.cardType_E.Tom,2],[n.cardType_E.Jesse,1],[n.cardType_E.Lily,2],[n.cardType_E.Caesar,2],[n.cardType_E.Demon,4]]),a.missMap=new Map([[n.cardType_E.Survivor,20],[n.cardType_E.Baby,100],[n.cardType_E.Militia,18],[n.cardType_E.Infantry,15],[n.cardType_E.explorer,20],[n.cardType_E.Friendlyzombie,80],[n.cardType_E.Littlezombie,40],[n.cardType_E.Medium,40],[n.cardType_E.Tom,40],[n.cardType_E.Jesse,40],[n.cardType_E.Lily,40],[n.cardType_E.Caesar,40],[n.cardType_E.Demon,20]]),a.lifeMap=new Map([[n.cardType_E.Survivor,4],[n.cardType_E.Baby,1],[n.cardType_E.Militia,4],[n.cardType_E.Infantry,5],[n.cardType_E.explorer,2],[n.cardType_E.Friendlyzombie,0],[n.cardType_E.Littlezombie,2],[n.cardType_E.Medium,4],[n.cardType_E.Tom,3],[n.cardType_E.Jesse,3],[n.cardType_E.Lily,5],[n.cardType_E.Caesar,5],[n.cardType_E.Demon,99]]),cc._RF.pop()},{"./CardTypeE":"CardTypeE"}],CardMergeCtl:[function(e,t,a){"use strict";cc._RF.push(t,"0fb31+lIsNDM4ar+6vFdd8u","CardMergeCtl");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("./../../framework/Manager/AudioManager"),r=e("../../../Game"),i=e("../../framework/Utils/LogWrap"),c=e("../../framework/Utils/MathUtils"),l=e("../../view/GameView/GameViewCtl"),s=e("../../view/TaskView/TaskViewCtl"),d=e("../Model/CardMergeM"),p=e("../Model/CardTypeE"),u=e("./CardBase"),f=e("./CardBaseCtl"),h=e("./CardFactoryCtl"),g=cc._decorator.ccclass,y=function(){function e(){}var t;return t=e,e.getInstance=function(){return t.sInstance||(t.sInstance=new t),t.sInstance},e.prototype.checkMerge=function(){for(var e=l.default.getInstance().mGameLayerView.carPanel.children,t=function(t){var n=e[t].getComponent(u.default),o=[];if(o.push(n.cardTypeIdx),null==n.childCard)return{value:void 0};n.childCard.children.forEach(function(e){o.push(e.getComponent(u.default).cardTypeIdx)}),o.sort(function(e,t){return e-t}),f.hasLifeCard.includes(n.cardTypeIdx)&&-1==n.productLife&&(n.productLife=3);for(var i=!1,c=0;c<r.GAME.configData.length;c++)if(a.checkArryEqual(r.GAME.configData[c].cfg,o)){var l=r.GAME.configData[c].result,d=r.GAME.configData[c].percent,g=r.GAME.configData[c].speed;n.productBar.node.active||(a.startProduct(n,c,l,d,g),a.checkTaskMerge(c)),i=!0;break}if(i||n.cardTypeIdx==p.cardType_E.Strange_entrance||(n.childCard.children.forEach(function(e){e.getComponent(u.default).productBar.progress=0,e.getComponent(u.default).progressLabel.node.active=!1,e.getComponent(u.default).productBar.node.active=!1,e.getComponent(u.default).productBar.node.stopAllActions()}),n.productBar.progress=0,n.progressLabel.node.active=!1,n.productBar.node.active=!1,n.productBar.node.stopAllActions()),(a.checkArryEqual(o,[500,610])||a.checkArryEqual(o,[501,610])||a.checkArryEqual(o,[502,610]))&&(s.default.getInstance().completeTask(22),n.childCard.children[0].stopAllActions()),o.includes(p.cardType_E.black_market))for(c=0;c<n.childCard.children.length;c++){var y=n.childCard.children[c].getComponent(u.default);h.default.getInstance().removeCard(y),h.default.getInstance().createCoinCard(y.coin+1)}a.checkArryEqual(o,[307,308])&&(s.default.getInstance().completeTask(23),h.default.getInstance().removeCard(n),h.default.getInstance().createCoinCard(7))},a=this,n=0;n<e.length;n++){var o=t(n);if("object"==typeof o)return o.value}},e.prototype.startProduct=function(e,t,a,n,i){var c=this;if(0==i){e.coin+=e.childCard.childrenCount,this.doMergeByType(e,t,a,n,i);for(var l=e.childCard.children.length-1;l>=0;l--)h.default.getInstance().removeCard(e.childCard.children[l].getComponent(u.default))}else o.AudioManager.getInstance().playSound("countdown"),e.progressLabel.node.active=!0,e.productBar.node.active=!0,e.progressLabel.string=(100*i+.3).toString()+"s",e.productBar.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){if(r.GAME.isContinueGame){e.productBar.progress+=.01;var o=e.progressLabel.string.substring(0,e.progressLabel.string.length-1),l=Number(o);(l-=i)<=0&&(l=0);var s=l.toFixed(1);e.progressLabel.string=s.toString()+"s",e.productBar.progress>=1&&(e.progressLabel.node.active=!1,e.productBar.node.active=!1,e.productBar.progress=0,e.productBar.node.stopAllActions(),e.progressLabel.string="0.0s",c.doMergeByType(e,t,a,n,i))}}),cc.delayTime(i))))},e.prototype.checkArryEqual=function(e,t){if(e.length!=t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!=t[a])return!1;return!0},e.prototype.getProductPos=function(e){var t;if(e.node.x<r.MIN_X+e.node.width)t=e.node.y<r.MIN_Y+e.node.height?cc.v2(e.node.x+e.node.width+5,e.node.y+e.node.width+5):e.node.y>r.MAX_Y-e.node.height?cc.v2(e.node.x+e.node.width+5,e.node.y-e.node.width-5):0==(a=c.MathUtils.getInstance().limitInteger(0,1))?cc.v2(e.node.x+e.node.width+5,e.node.y+e.node.width+5):cc.v2(e.node.x+e.node.width+5,e.node.y-e.node.width-5);else if(e.node.x>r.MAX_X-e.node.width)t=e.node.y<r.MIN_Y+e.node.height?cc.v2(e.node.x-e.node.width-5,e.node.y+e.node.width+5):e.node.y>r.MAX_Y-e.node.height?cc.v2(e.node.x-e.node.width-5,e.node.y-e.node.width-5):0==(a=c.MathUtils.getInstance().limitInteger(0,1))?cc.v2(e.node.x-e.node.width-5,e.node.y+e.node.width+5):cc.v2(e.node.x-e.node.width-5,e.node.y-e.node.width-5);else{var a;t=0==(a=c.MathUtils.getInstance().limitInteger(0,3))?cc.v2(e.node.x+e.node.width+5,e.node.y+e.node.width+5):1==a?cc.v2(e.node.x+e.node.width+5,e.node.y-e.node.width-5):2==a?cc.v2(e.node.x-e.node.width-5,e.node.y-e.node.width-5):cc.v2(e.node.x-e.node.width-5,e.node.y+e.node.width+5)}return t},e.prototype.doMergeByType=function(e,t,a,n,o){var r=[];r.push(e),e.childCard.children.forEach(function(e){r.push(e.getComponent(u.default))}),r.sort(function(e,t){return e.cardTypeIdx-t.cardTypeIdx});var c=this.getProductPos(e);if(d.MergeType_A.includes(t)){for(var s=r[r.length-1],p=r.length-1;p>=0;p--)if(p!=r.length-1)h.default.getInstance().removeCard(r[p]);else{var f=l.default.getInstance().mGameLayerView.carPanel.convertToNodeSpaceAR(r[p].node.convertToWorldSpaceAR(cc.Vec2.ZERO));r[p].node.setPosition(f),r[p].node.parent=l.default.getInstance().mGameLayerView.carPanel}this.productCard(s,e.node.position,c,a,n)}else if(d.MergeType_B.includes(t)){for(p=0;p<r.length;p++)h.default.getInstance().removeCard(r[p]);this.productCard(null,e.node.getPosition(),c,a,n)}else if(d.MergeType_C.includes(t))i.LogWrap.log("\u53ef\u4ee5\u7ee7\u7eed\u5f00\u91c7"),this.productCard(e.childCard.children[e.childCard.childrenCount-1],e.node.position,c,a,n),e.productLife--,this.startProduct(e,t,a,n,o),i.LogWrap.log("\u751f\u547d\u66f4\u65b0"+e.productLife),0==e.productLife&&(e.childCard.children.forEach(function(e){var t=l.default.getInstance().mGameLayerView.carPanel.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.Vec2.ZERO));e.parent=l.default.getInstance().mGameLayerView.carPanel,e.setPosition(t),e.getComponent(u.default).topCard=e.getComponent(u.default).downCard=e.getComponent(u.default)}),h.default.getInstance().removeCard(e));else if(d.MergeType_D.includes(t)){var g=r[0];for(p=0;p<r.length;p++)if(0==p){var y=l.default.getInstance().mGameLayerView.carPanel.convertToNodeSpaceAR(r[p].node.convertToWorldSpaceAR(cc.Vec2.ZERO));r[p].node.setPosition(y),r[p].node.parent=l.default.getInstance().mGameLayerView.carPanel}else h.default.getInstance().removeCard(r[p]);this.productCard(g,e.node.position,c,a,n)}else if(d.MergeType_E.includes(t)){for(g=r[2],p=0;p<r.length;p++)if(p<=2){var m=l.default.getInstance().mGameLayerView.carPanel.convertToNodeSpaceAR(r[p].node.convertToWorldSpaceAR(cc.Vec2.ZERO));r[p].node.setPosition(m),r[p].node.parent=l.default.getInstance().mGameLayerView.carPanel}else h.default.getInstance().removeCard(r[p]);this.productCard(g,e.node.position,c,a,n)}else d.MergeType_F.includes(t)&&(this.productCard(e.childCard.children[e.childCard.childrenCount-1],e.node.position,c,a,n),this.checkMerge());h.default.getInstance().refreshAllCard()},e.prototype.productCard=function(e,t,a,n,o){for(var r=c.MathUtils.getInstance().limitInteger(0,100),i=0,s=0,d=0;d<o.length;d++)if(r<(s+=o[d])){i=d;break}var p=h.default.getInstance().createCard(t,n[i],l.default.getInstance().mGameLayerView.carPanel),f=p.getComponent(u.default).cardSpr;return e&&e.getComponent(u.default).getComponent(cc.Animation).play("smoke"),p.runAction(cc.sequence(cc.callFunc(function(){f.setMaterial(0,p.getComponent(u.default).fightMaterial)}),cc.delayTime(.1),cc.callFunc(function(){f.setMaterial(0,p.getComponent(u.default).defaultMaterial),f.node.color=cc.Color.BLACK}),cc.spawn(cc.targetedAction(f.node,cc.scaleTo(.15,1.2,.1).easing(cc.easeSineIn())),cc.moveTo(.15,a).easing(cc.easeSineIn())),cc.callFunc(function(){f.node.color=cc.Color.WHITE}),cc.targetedAction(f.node,cc.scaleTo(.15,1,1).easing(cc.easeSineIn())),cc.callFunc(function(){var e=p.getComponent(u.default);h.default.getInstance().checkPos(e),e.topCard!=e&&h.default.getInstance().checkPos(e.topCard)}))),p},e.prototype.checkTaskMerge=function(e){16==e&&s.default.getInstance().completeTask(1),20==e&&s.default.getInstance().completeTask(7),13==e&&s.default.getInstance().completeTask(8),10==e&&s.default.getInstance().completeTask(9),1==e&&s.default.getInstance().completeTask(14),83==e&&s.default.getInstance().completeTask(28)},e.sInstance=null,t=n([g],e)}();a.default=y,cc._RF.pop()},{"../../../Game":"Game","../../framework/Utils/LogWrap":"LogWrap","../../framework/Utils/MathUtils":"MathUtils","../../view/GameView/GameViewCtl":"GameViewCtl","../../view/TaskView/TaskViewCtl":"TaskViewCtl","../Model/CardMergeM":"CardMergeM","../Model/CardTypeE":"CardTypeE","./../../framework/Manager/AudioManager":"AudioManager","./CardBase":"CardBase","./CardBaseCtl":"CardBaseCtl","./CardFactoryCtl":"CardFactoryCtl"}],CardMergeM:[function(e,t,a){"use strict";cc._RF.push(t,"88752UG8fRLoql8bv81sRGg","CardMergeM"),Object.defineProperty(a,"__esModule",{value:!0}),a.MergeType_F=a.MergeType_E=a.MergeType_D=a.MergeType_C=a.MergeType_B=a.MergeType_A=void 0,a.MergeType_A=[0,43,45],a.MergeType_B=[6,7,8,9,27,28,29,30,31,32,36,37,40,42,44,46,50,51,52,59,60,61,83],a.MergeType_C=[10,11,12,13,14,15,16,17,18,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82],a.MergeType_D=[21,22,23,24,25,26,41],a.MergeType_E=[53,54,55,56,57,58,89,90],a.MergeType_F=[1,2,3,4,5,20,33,34,35,37,38,39,47,48,49],cc._RF.pop()},{}],CardPackM:[function(e,t,a){"use strict";cc._RF.push(t,"d452cj5PqdFSaqPiIa/1dhC","CardPackM"),Object.defineProperty(a,"__esModule",{value:!0}),a.allCardPackPrice=a.CardPackType_C=a.CardPackType_E=void 0,function(e){e[e.The_beginning_of_escape=0]="The_beginning_of_escape",e[e.Material_search=1]="Material_search",e[e.Provide_for_oneself=2]="Provide_for_oneself",e[e.Food_supply=3]="Food_supply",e[e.Productivity=4]="Productivity",e[e.Explorer=5]="Explorer",e[e.Combat_readiness=6]="Combat_readiness"}(a.CardPackType_E||(a.CardPackType_E={})),function(e){e[e["\u51fa\u9003\u7684\u5f00\u59cb"]=0]="\u51fa\u9003\u7684\u5f00\u59cb",e[e["\u6750\u6599\u641c\u5bfb"]=1]="\u6750\u6599\u641c\u5bfb",e[e["\u81ea\u7ed9\u81ea\u8db3"]=2]="\u81ea\u7ed9\u81ea\u8db3",e[e["\u98df\u7269\u8865\u7ed9"]=3]="\u98df\u7269\u8865\u7ed9",e[e["\u751f\u4ea7\u529b"]=4]="\u751f\u4ea7\u529b",e[e["\u63a2\u9669\u5bb6"]=5]="\u63a2\u9669\u5bb6",e[e["\u6218\u6597\u51c6\u5907"]=6]="\u6218\u6597\u51c6\u5907"}(a.CardPackType_C||(a.CardPackType_C={})),a.allCardPackPrice=[3,4,10,10,15,20,25],cc._RF.pop()},{}],CardPack:[function(e,t,a){"use strict";cc._RF.push(t,"b2f1929C1tKe6ddqzJFPmE+","CardPack");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./../../framework/Utils/MathUtils"),c=e("../../view/GameView/GameViewCtl"),l=e("../Card/CardBase"),s=e("./../../../Game"),d=e("../../view/TaskView/TaskViewCtl"),p=e("../../view/GameTimeView/GameTimeViewCtl"),u=e("../Model/CardTypeE"),f=e("../Card/CardFactoryCtl"),h=e("../Card/CardBaseCtl"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardNum=null,t.resetNode=null,t.packSf=[],t._cardRemind=5,t.nowCardPackCardArr=[],t}return o(t,e),Object.defineProperty(t.prototype,"cardPackTypeIdx",{get:function(){return this._cardPackTypeIdx},set:function(e){this._cardPackTypeIdx=e,this.node.getComponent(cc.Sprite).spriteFrame=this.packSf[e]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cardRemind",{get:function(){return this._cardRemind},set:function(e){this._cardRemind=e,this.cardNum.string=e.toString(),0==e&&(this.node.getComponent(cc.Sprite).enabled=!1,this.node.children[0].active=!1,this.resetNode.active=!0,f.default.getInstance().refreshAllCard())},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.onCardEvent(),this.startPos=this.node.getPosition()},t.prototype.onCardEvent=function(){e.prototype.onCardEvent.call(this)},t.prototype.onTouchStart=function(t){e.prototype.onTouchStart.call(this,t),this.startPos=this.node.getPosition()},t.prototype.onTouchEnd=function(t){e.prototype.onTouchEnd.call(this,t),cc.Vec2.distance(this.startPos,this.node.getPosition())<5&&this.click()},t.prototype.click=function(){var t=this;0==s.GAME.allCard.length&&p.default.getInstance().mGameTimeView.startTimer(),e.prototype.offCardEvent.call(this),d.default.getInstance().completeTask(0);var a=[cc.v2(-100,130),cc.v2(0,130),cc.v2(100,130),cc.v2(-50,-130),cc.v2(50,-130)],n=0;this.schedule(function(){for(var e=i.MathUtils.getInstance().limitInteger(0,10),o=null,r=0,d=0;d<s.GAME.allCard.length;d++)h.default.getInstance().isHuman(s.GAME.allCard[d])&&(r+=1);var p=(o=0==r||1==r&&6==t._cardPackTypeIdx?f.default.getInstance().createCard(t.node.getPosition(),u.cardType_E.Survivor,c.default.getInstance().mGameLayerView.carPanel):0==e?f.default.getInstance().createCard(t.node.getPosition(),u.cardType_E.Blue_card,c.default.getInstance().mGameLayerView.carPanel):f.default.getInstance().createCard(t.node.getPosition(),t.cardTypeFactory(),c.default.getInstance().mGameLayerView.carPanel)).getComponent(l.default).cardSpr.getComponent(cc.Sprite),g=o.getComponent(l.default).coinNumLabel.node.parent,y=o.getComponent(l.default).foodEatNumLabel.node.parent,m=o.getComponent(l.default).lifeNumLabel.node.parent,v=g.active,C=y.active,_=m.active,T=new cc.Node;T.addComponent(cc.Sprite),T.opacity=50,T.parent=p.node.parent,T.getComponent(cc.Sprite).spriteFrame=p.spriteFrame,T.zIndex=p.node.zIndex-1,T.runAction(cc.sequence(cc.delayTime(.6),cc.callFunc(function(){T.removeFromParent()}))),t.nowCardPackCardArr.push(o.getComponent(l.default)),o.runAction(cc.sequence(cc.callFunc(function(){s.GAME.canTouch=!1,o.getComponent(l.default).node.zIndex=3,t.cardShadow.active=!0,g.active=!1,y.active=!1,m.active=!1,p.setMaterial(0,o.getComponent(l.default).fightMaterial),c.default.getInstance().mGameLayerView.node.runAction(cc.sequence(cc.moveTo(.03,cc.v2(-10,-10)),cc.moveTo(.06,cc.v2(10,10)),cc.moveTo(.03,cc.v2(0,0))))}),cc.callFunc(function(){p.setMaterial(0,o.getComponent(l.default).defaultMaterial),p.node.color=cc.Color.BLACK}),cc.spawn(cc.targetedAction(p.node,cc.scaleTo(.15,1.2,.1).easing(cc.easeSineIn())),cc.moveBy(.15,a[n]).easing(cc.easeSineIn())),cc.callFunc(function(){p.node.color=cc.Color.WHITE,o.getComponent(l.default).getComponent(cc.Animation).play("smoke")}),cc.targetedAction(p.node,cc.scaleTo(.15,1,1).easing(cc.easeSineIn())),cc.rotateTo(.02,8),cc.rotateTo(.02,-8),cc.rotateTo(.02,5),cc.rotateTo(.02,-5),cc.rotateTo(.02,3),cc.rotateTo(.02,-3),cc.rotateTo(.01,0),cc.callFunc(function(){o.getComponent(l.default).node.zIndex=1,t.cardShadow.active=!1,g.active=v,y.active=C,m.active=_,f.default.getInstance().checkPos(o.getComponent(l.default)),5==n&&(s.GAME.canTouch=!0,f.default.getInstance().refreshAllCard())}))),n++,t.cardRemind--},.4,4,0),s.GAME.nowTouchCardPack=this.node},t.prototype.cardTypeFactory=function(){if(s.GAME.isFirstOpen)return s.GAME.isFirstOpen=!1,u.cardType_E.Knapsack;for(var e=s.GAME.packCfg.cfg[this.cardPackTypeIdx],t=e.typeArr,a=e.percentArr,n=i.MathUtils.getInstance().limitInteger(0,100),o=0,r=0,c=0;c<a.length;c++)if(n<(r+=a[c])){o=c;break}return t[o]},t.prototype.resetClick=function(){for(var e=0;e<this.nowCardPackCardArr.length;e++){var t=this.nowCardPackCardArr[e];t.cardTypeIdx>u.cardType_E.Friendlyzombie&&(f.default.getInstance().createCard(t.node.getPosition(),this.cardTypeFactory(),c.default.getInstance().mGameLayerView.carPanel),f.default.getInstance().removeCard(t))}this.node.removeFromParent(),f.default.getInstance().refreshAllCard()},t.prototype.update=function(){this.node.x<s.MIN_X&&(this.node.x=s.MIN_X),this.node.x>s.MAX_X&&(this.node.x=s.MAX_X),this.node.y<s.MIN_Y&&(this.node.y=s.MIN_Y),this.node.y>s.MAX_Y&&(this.node.y=s.MAX_Y)},r([m(cc.Label)],t.prototype,"cardNum",void 0),r([m(cc.Node)],t.prototype,"resetNode",void 0),r([m(cc.SpriteFrame)],t.prototype,"packSf",void 0),r([y],t)}(l.default);a.default=v,cc._RF.pop()},{"../../view/GameTimeView/GameTimeViewCtl":"GameTimeViewCtl","../../view/GameView/GameViewCtl":"GameViewCtl","../../view/TaskView/TaskViewCtl":"TaskViewCtl","../Card/CardBase":"CardBase","../Card/CardBaseCtl":"CardBaseCtl","../Card/CardFactoryCtl":"CardFactoryCtl","../Model/CardTypeE":"CardTypeE","./../../../Game":"Game","./../../framework/Utils/MathUtils":"MathUtils"}],CardPrice:[function(e,t,a){"use strict";cc._RF.push(t,"8572aquXLdAfoOzQgcKWMnS","CardPrice"),Object.defineProperty(a,"__esModule",{value:!0}),a.foodMap=a.priceMap=void 0;var n=e("./CardTypeE");a.priceMap=new Map([[n.cardType_E.Survivor,0],[n.cardType_E.Baby,0],[n.cardType_E.Militia,0],[n.cardType_E.Infantry,0],[n.cardType_E.explorer,0],[n.cardType_E.Friendlyzombie,0],[n.cardType_E.Littlezombie,0],[n.cardType_E.Medium,0],[n.cardType_E.Tom,0],[n.cardType_E.Jesse,0],[n.cardType_E.Lily,0],[n.cardType_E.Caesar,0],[n.cardType_E.Ruins,1],[n.cardType_E.Woods,1],[n.cardType_E.Knapsack,1],[n.cardType_E.Ferrous,1],[n.cardType_E.Wood,1],[n.cardType_E.Screw,1],[n.cardType_E.Coin,0],[n.cardType_E.Password,1],[n.cardType_E.PasswordBox,1],[n.cardType_E.Soil,2],[n.cardType_E.Hold_All,1],[n.cardType_E.WoodenHammer,1],[n.cardType_E.Irontongs,1],[n.cardType_E.Shovel,2],[n.cardType_E.Pistol,2],[n.cardType_E.Rifle,2],[n.cardType_E.Hound,2],[n.cardType_E.Duck,2],[n.cardType_E.Honeybee,2],[n.cardType_E.Tent,2],[n.cardType_E.Refuge,2],[n.cardType_E.Refugecamp,2],[n.cardType_E.Building_materials_base,3],[n.cardType_E.Welding_rail_base,3],[n.cardType_E.Furnace,1],[n.cardType_E.Machinery_base,3],[n.cardType_E.Wooden_factory,3],[n.cardType_E.Studio,3],[n.cardType_E.Gold_box,1],[n.cardType_E.Animal_cage,3],[n.cardType_E.black_market,3],[n.cardType_E.Noah_Ark,3],[n.cardType_E.Signal_bomb,3],[n.cardType_E.Demon,0],[n.cardType_E.Peach,1],[n.cardType_E.Can,1],[n.cardType_E.Banana,2],[n.cardType_E.Chocolates,1],[n.cardType_E.Milk,1],[n.cardType_E.Sausage,1],[n.cardType_E.Duck_egg,1],[n.cardType_E.Honey,1],[n.cardType_E.Roast_sausage,3],[n.cardType_E.Bread,1],[n.cardType_E.Hot_dog,3],[n.cardType_E.Meal_bag,3],[n.cardType_E.Supply_tank,0],[n.cardType_E.Catacombs,3],[n.cardType_E.Map,3],[n.cardType_E.Mountain_village,3],[n.cardType_E.Forest,3],[n.cardType_E.Plain,3],[n.cardType_E.Town,3],[n.cardType_E.Cemetery,3],[n.cardType_E.Strange_entrance,0],[n.cardType_E.Blue_card,2]]),a.foodMap=new Map([[n.cardType_E.Peach,2],[n.cardType_E.Can,1],[n.cardType_E.Banana,1],[n.cardType_E.Chocolates,1],[n.cardType_E.Milk,1],[n.cardType_E.Sausage,2],[n.cardType_E.Duck_egg,2],[n.cardType_E.Honey,2],[n.cardType_E.Roast_sausage,3],[n.cardType_E.Bread,3],[n.cardType_E.Hot_dog,4],[n.cardType_E.Meal_bag,10]]),cc._RF.pop()},{"./CardTypeE":"CardTypeE"}],CardTypeC:[function(e,t,a){"use strict";cc._RF.push(t,"c191bXwJXpAA7LM0XLfllKK","CardTypeC"),Object.defineProperty(a,"__esModule",{value:!0}),a.cardType_C=void 0,function(e){e[e["\u5e78\u5b58\u8005"]=100]="\u5e78\u5b58\u8005",e[e["\u5a74\u513f"]=101]="\u5a74\u513f",e[e["\u6c11\u5175"]=102]="\u6c11\u5175",e[e["\u6b65\u5175"]=103]="\u6b65\u5175",e[e["\u63a2\u7d22\u5bb6"]=104]="\u63a2\u7d22\u5bb6",e[e["\u5c38\u4f53"]=105]="\u5c38\u4f53",e[e["\u5c0f\u4e27\u5c38"]=200]="\u5c0f\u4e27\u5c38",e[e["\u8499\u9762\u4e27\u5c38"]=201]="\u8499\u9762\u4e27\u5c38",e[e["\u98de\u5929\u4e27\u5c38"]=202]="\u98de\u5929\u4e27\u5c38",e[e["\u9ecf\u866b\u4e27\u5c38"]=203]="\u9ecf\u866b\u4e27\u5c38",e[e["\u9b3c\u8138\u4e27\u5c38"]=204]="\u9b3c\u8138\u4e27\u5c38",e[e["\u72ec\u773c\u4e27\u5c38"]=205]="\u72ec\u773c\u4e27\u5c38",e[e["\u5e9f\u589f"]=300]="\u5e9f\u589f",e[e["\u6811\u6797"]=301]="\u6811\u6797",e[e["\u80cc\u5305"]=302]="\u80cc\u5305",e[e["\u94c1\u5757"]=303]="\u94c1\u5757",e[e["\u6728\u5757"]=304]="\u6728\u5757",e[e["\u87ba\u4e1d"]=305]="\u87ba\u4e1d",e[e["\u91d1\u5e01"]=306]="\u91d1\u5e01",e[e["\u94a5\u5319"]=307]="\u94a5\u5319",e[e["\u5bc6\u7801\u7bb1"]=308]="\u5bc6\u7801\u7bb1",e[e["\u571f\u58e4"]=309]="\u571f\u58e4",e[e["\u5de5\u5177\u7bb1"]=310]="\u5de5\u5177\u7bb1",e[e["\u6728\u9524"]=311]="\u6728\u9524",e[e["\u94c1\u94b3"]=312]="\u94c1\u94b3",e[e["\u5de5\u5175\u94f2"]=313]="\u5de5\u5175\u94f2",e[e["\u624b\u67aa"]=400]="\u624b\u67aa",e[e["\u6b65\u67aa"]=401]="\u6b65\u67aa",e[e["\u730e\u72d7"]=500]="\u730e\u72d7",e[e["\u9e2d\u5b50"]=501]="\u9e2d\u5b50",e[e["\u871c\u8702"]=502]="\u871c\u8702",e[e["\u5e10\u7bf7"]=600]="\u5e10\u7bf7",e[e["\u907f\u96be\u6240"]=601]="\u907f\u96be\u6240",e[e["\u4ed3\u5e93"]=602]="\u4ed3\u5e93",e[e["\u5efa\u6750\u57fa\u5730"]=603]="\u5efa\u6750\u57fa\u5730",e[e["\u710a\u8f68\u57fa\u5730"]=604]="\u710a\u8f68\u57fa\u5730",e[e["\u706b\u7089"]=605]="\u706b\u7089",e[e["\u673a\u68b0\u57fa\u5730"]=606]="\u673a\u68b0\u57fa\u5730",e[e["\u6728\u5de5\u57fa\u5730"]=607]="\u6728\u5de5\u57fa\u5730",e[e["\u5236\u9020\u57fa\u5730"]=608]="\u5236\u9020\u57fa\u5730",e[e["\u91d1\u5e01\u7bb1"]=609]="\u91d1\u5e01\u7bb1",e[e["\u52a8\u7269\u7b3c\u5b50"]=610]="\u52a8\u7269\u7b3c\u5b50",e[e["\u9ed1\u5e02"]=611]="\u9ed1\u5e02",e[e["\u8bfa\u4e9a\u65b9\u821f"]=612]="\u8bfa\u4e9a\u65b9\u821f",e[e["\u4fe1\u53f7\u5f39"]=613]="\u4fe1\u53f7\u5f39",e[e["\u6076\u9b54"]=614]="\u6076\u9b54",e[e["\u6843\u5b50"]=700]="\u6843\u5b50",e[e["\u7f50\u5934"]=701]="\u7f50\u5934",e[e["\u9999\u8549"]=702]="\u9999\u8549",e[e["\u5de7\u514b\u529b"]=703]="\u5de7\u514b\u529b",e[e["\u725b\u5976"]=704]="\u725b\u5976",e[e["\u9999\u80a0"]=705]="\u9999\u80a0",e[e["\u9e2d\u86cb"]=706]="\u9e2d\u86cb",e[e["\u8702\u871c"]=707]="\u8702\u871c",e[e["\u70e4\u9999\u80a0"]=708]="\u70e4\u9999\u80a0",e[e["\u9762\u5305"]=709]="\u9762\u5305",e[e["\u70ed\u72d7"]=710]="\u70ed\u72d7",e[e["\u9910\u5305"]=711]="\u9910\u5305",e[e["\u8865\u7ed9\u7bb1"]=800]="\u8865\u7ed9\u7bb1",e[e["\u5730\u4e0b\u5893\u7a74"]=801]="\u5730\u4e0b\u5893\u7a74",e[e["\u5730\u56fe"]=802]="\u5730\u56fe",e[e["\u5c71\u6751"]=803]="\u5c71\u6751",e[e["\u68ee\u6797"]=804]="\u68ee\u6797",e[e["\u5e73\u539f"]=805]="\u5e73\u539f",e[e["\u5c0f\u9547"]=806]="\u5c0f\u9547",e[e["\u5893\u5730"]=807]="\u5893\u5730",e[e["\u5947\u602a\u7684\u5165\u53e3"]=900]="\u5947\u602a\u7684\u5165\u53e3",e[e["\u84dd\u56fe"]=901]="\u84dd\u56fe"}(a.cardType_C||(a.cardType_C={})),cc._RF.pop()},{}],CardTypeE:[function(e,t,a){"use strict";cc._RF.push(t,"a7b0cllLyBBzo52NkYp0zlr","CardTypeE"),Object.defineProperty(a,"__esModule",{value:!0}),a.cardType_E=void 0,function(e){e[e.Survivor=100]="Survivor",e[e.Baby=101]="Baby",e[e.Militia=102]="Militia",e[e.Infantry=103]="Infantry",e[e.explorer=104]="explorer",e[e.Friendlyzombie=105]="Friendlyzombie",e[e.Littlezombie=200]="Littlezombie",e[e.Medium=201]="Medium",e[e.Tom=202]="Tom",e[e.Jesse=203]="Jesse",e[e.Lily=204]="Lily",e[e.Caesar=205]="Caesar",e[e.Ruins=300]="Ruins",e[e.Woods=301]="Woods",e[e.Knapsack=302]="Knapsack",e[e.Ferrous=303]="Ferrous",e[e.Wood=304]="Wood",e[e.Screw=305]="Screw",e[e.Coin=306]="Coin",e[e.Password=307]="Password",e[e.PasswordBox=308]="PasswordBox",e[e.Soil=309]="Soil",e[e.Hold_All=310]="Hold_All",e[e.WoodenHammer=311]="WoodenHammer",e[e.Irontongs=312]="Irontongs",e[e.Shovel=313]="Shovel",e[e.Pistol=400]="Pistol",e[e.Rifle=401]="Rifle",e[e.Hound=500]="Hound",e[e.Duck=501]="Duck",e[e.Honeybee=502]="Honeybee",e[e.Tent=600]="Tent",e[e.Refuge=601]="Refuge",e[e.Refugecamp=602]="Refugecamp",e[e.Building_materials_base=603]="Building_materials_base",e[e.Welding_rail_base=604]="Welding_rail_base",e[e.Furnace=605]="Furnace",e[e.Machinery_base=606]="Machinery_base",e[e.Wooden_factory=607]="Wooden_factory",e[e.Studio=608]="Studio",e[e.Gold_box=609]="Gold_box",e[e.Animal_cage=610]="Animal_cage",e[e.black_market=611]="black_market",e[e.Noah_Ark=612]="Noah_Ark",e[e.Signal_bomb=613]="Signal_bomb",e[e.Demon=614]="Demon",e[e.Peach=700]="Peach",e[e.Can=701]="Can",e[e.Banana=702]="Banana",e[e.Chocolates=703]="Chocolates",e[e.Milk=704]="Milk",e[e.Sausage=705]="Sausage",e[e.Duck_egg=706]="Duck_egg",e[e.Honey=707]="Honey",e[e.Roast_sausage=708]="Roast_sausage",e[e.Bread=709]="Bread",e[e.Hot_dog=710]="Hot_dog",e[e.Meal_bag=711]="Meal_bag",e[e.Supply_tank=800]="Supply_tank",e[e.Catacombs=801]="Catacombs",e[e.Map=802]="Map",e[e.Mountain_village=803]="Mountain_village",e[e.Forest=804]="Forest",e[e.Plain=805]="Plain",e[e.Town=806]="Town",e[e.Cemetery=807]="Cemetery",e[e.Strange_entrance=900]="Strange_entrance",e[e.Blue_card=901]="Blue_card"}(a.cardType_E||(a.cardType_E={})),cc._RF.pop()},{}],ConstValue:[function(e,t,a){"use strict";cc._RF.push(t,"66b51obcd1Mi4dcboc3fwIs","ConstValue"),Object.defineProperty(a,"__esModule",{value:!0}),a.ConstValue=void 0;var n=function(){function e(){}return e.IS_EDITIONS=!1,e.CONFIG_FILE_DIR="config/",e.PREFAB_UI_DIR="prefabs/view/",e.AUDIO_DIR="audio/",e}();a.ConstValue=n,cc._RF.pop()},{}],CreateEnemy:[function(e,t,a){"use strict";cc._RF.push(t,"8c36f5AkGBA6qWJu9M39NJW","CreateEnemy");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("../../../Game"),r=e("../../framework/Utils/MathUtils"),i=e("../../view/GameView/GameViewCtl"),c=e("../Card/CardBase"),l=e("../Card/CardFactoryCtl"),s=e("../Model/CardTypeE"),d=cc._decorator,p=d.ccclass,u=(d.property,function(){function e(){this.enemyNum_once=2,this.dayInterval=8,this.enemyRand=.3,this.enemyTypeArray=[s.cardType_E.Littlezombie,s.cardType_E.Medium,s.cardType_E.Tom,s.cardType_E.Jesse,s.cardType_E.Lily,s.cardType_E.Caesar],this.enemyPosArray=[cc.v2(353,-240),cc.v2(353,-100),cc.v2(493,-100)]}var t;return t=e,e.getInstance=function(){return t.sInstance||(t.sInstance=new t),t.sInstance},e.prototype.init=function(e){e>1&&e%(this.dayInterval/o.GAME.coefficientOfDifficulty)==0&&Math.random()<this.enemyRand&&(this.enemyNum_once=r.MathUtils.getInstance().limitInteger(2,3),this.createEnter())},e.prototype.createEnter=function(){var e=i.default.getInstance().mGameLayerView,t=e.cardPre,a=cc.instantiate(t);a.getComponent(c.default).cardTypeIdx=s.cardType_E.Strange_entrance,a.parent=e.carPanel,a.setPosition(cc.v2(493,-240)),a.getComponent(c.default).endCheck(),this.startTimer(a.getComponent(c.default))},e.prototype.startTimer=function(e){var t=this;e.productBar.node.active=!0,e.productBar.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){o.GAME.isContinueGame&&(e.productBar.progress+=.01,e.productBar.progress>=1&&(e.productBar.node.active=!1,e.productBar.progress=0,e.productBar.node.stopAllActions(),e.node.removeFromParent(),t.createEnemy()))}),cc.delayTime(.3))))},e.prototype.createEnemy=function(){for(var e=0;e<this.enemyNum_once;e++){var t=r.MathUtils.getInstance().limitInteger(0,this.enemyNum_once-1);l.default.getInstance().createCard(this.enemyPosArray[e],this.enemyTypeArray[t],i.default.getInstance().mGameLayerView.carPanel)}},e.sInstance=null,t=n([p],e)}());a.default=u,cc._RF.pop()},{"../../../Game":"Game","../../framework/Utils/MathUtils":"MathUtils","../../view/GameView/GameViewCtl":"GameViewCtl","../Card/CardBase":"CardBase","../Card/CardFactoryCtl":"CardFactoryCtl","../Model/CardTypeE":"CardTypeE"}],CustomTypes:[function(e,t,a){"use strict";cc._RF.push(t,"d2d70bGmsJOAJetl6yMvak0","CustomTypes"),Object.defineProperty(a,"__esModule",{value:!0}),a.SoundTypes=a.GameDifficulty=a.cardData=a.gameData=void 0;a.gameData=function(){};a.cardData=function(){},function(e){e.GAME_SIMPLE="game_simple",e.GAME_GENERIC="game_generic",e.GAME_DIFFICULT="game_difficult"}(a.GameDifficulty||(a.GameDifficulty={}));a.SoundTypes=new function(){this.TITLE=["sound_title_1","sound_title_2"],this.FALSE_1="sound_false_1",this.FALSE_3="sound_false_3",this.CORRECT="sound_correct"},cc._RF.pop()},{}],FileLocalDataManager:[function(e,t,a){"use strict";cc._RF.push(t,"a62b6/VeWdHcb+zoAuOZGl/","FileLocalDataManager"),Object.defineProperty(a,"__esModule",{value:!0}),a.FileLocalDataManager=a.ELocalDataType=a.EFileType=void 0,function(e){e[e.version=0]="version",e[e.life_time=1]="life_time",e[e.is_bgm_off=2]="is_bgm_off",e[e.is_audio_off=3]="is_audio_off"}(a.EFileType||(a.EFileType={})),function(e){e[e.Illustrated=0]="Illustrated"}(a.ELocalDataType||(a.ELocalDataType={}));var n=function(){function e(){this.FILE_PLAYER_MODEL_KEY=""}return e.getInstance=function(){return null===this.sInventoryFile&&(this.sInventoryFile=new e,this.sInventoryFile.init()),this.sInventoryFile},e.prototype.init=function(){this.FILE_PLAYER_MODEL_KEY="game_frame_data"},e.prototype.getUserValue=function(e){var t=cc.sys.localStorage.getItem(this.FILE_PLAYER_MODEL_KEY+"_"+e);return t||((t=cc.sys.localStorage.getItem(e))&&this.setUserValue(e,t),cc.sys.localStorage.removeItem(e)),JSON.parse(t)},e.prototype.setUserValue=function(e,t){return cc.sys.localStorage.setItem(this.FILE_PLAYER_MODEL_KEY+"_"+e,JSON.stringify(t))},e.prototype.removeUserValue=function(e){cc.sys.localStorage.removeItem(this.FILE_PLAYER_MODEL_KEY+"_"+e)},e.sInventoryFile=null,e}();a.FileLocalDataManager=n,cc._RF.pop()},{}],GameData:[function(e,t,a){"use strict";cc._RF.push(t,"65c35Ym/oRKD6h93ZiyEFOw","GameData"),Object.defineProperty(a,"__esModule",{value:!0}),a.GameData=void 0;var n=e("../../../Game"),o=e("../../node/Card/CardBase"),r=e("../../node/CardPack/CardPack"),i=e("../../view/GameTimeView/GameTimeViewCtl"),c=e("../../view/GameView/GameViewCtl"),l=e("../../view/TaskView/TaskViewCtl"),s=e("../Manager/FileLocalDataManager"),d=e("./CustomTypes"),p=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.saveGameData=function(){var e=new d.gameData;e.nowDay=i.default.getInstance().mGameTimeView.nowDays,e.time=i.default.getInstance().mGameTimeView.getRemindTime(),e.taskIndex=l.default.getInstance().nowTaskId,e.taskIsFinish=l.default.getInstance().mTaskView.getTaskIsFinish();for(var t=[],a=[],p=c.default.getInstance().mGameLayerView.carPanel,u=0;u<p.children.length;u++){var f=p.children[u],h=f.getComponent(o.default);if(f.getComponent(o.default).cardType){var g=this.getCardData(h);if(h.childCard.children.length>0)for(var y=0;y<h.childCard.children.length;y++){var m=h.childCard.children[y].getComponent(o.default),v=this.getCardData(m);g.childCardArr.push(v)}t.push(g)}else f.getComponent(r.default)&&a.push(f.getComponent(r.default).cardPackTypeIdx)}e.allCard=t,e.allCardPack=a;var C="diff"+n.GAME.coefficientOfDifficulty;s.FileLocalDataManager.getInstance().setUserValue(C,e)},e.prototype.getCardData=function(e){var t=new d.cardData;return t.cardTypeIdx=e.cardTypeIdx,t.posX=e.node.x,t.posY=e.node.y,t.zIndex=e.node.zIndex,t.childCardArr=[],t},e.prototype.loadGameData=function(){var e="diff"+n.GAME.coefficientOfDifficulty;return s.FileLocalDataManager.getInstance().getUserValue(e)},e}();a.GameData=p,cc._RF.pop()},{"../../../Game":"Game","../../node/Card/CardBase":"CardBase","../../node/CardPack/CardPack":"CardPack","../../view/GameTimeView/GameTimeViewCtl":"GameTimeViewCtl","../../view/GameView/GameViewCtl":"GameViewCtl","../../view/TaskView/TaskViewCtl":"TaskViewCtl","../Manager/FileLocalDataManager":"FileLocalDataManager","./CustomTypes":"CustomTypes"}],GameScene:[function(e,t,a){"use strict";cc._RF.push(t,"2d0b2YK4F5C4ZzywGu0Ye0x","GameScene");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./Game"),c=e("./script/framework/BaseUI"),l=e("./script/framework/Manager/UIManager"),s=e("./script/view/LoadingView/LoadingView"),d=cc._decorator.ccclass,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var a;return o(t,e),a=t,t.prototype.start=function(){a.instance=this,this.initView(),i.Game.getInstance().init(),l.UIManager.getInstance().openUI(s.default)},t.prototype.resetSize=function(e){var t=cc.view.getFrameSize(),a=cc.view.getDesignResolutionSize();t.width/t.height>a.width/a.height?(e.width=a.height*t.width/t.height,e.height=a.height,e.getComponent(cc.Canvas).designResolution=cc.size(e.width,e.height)):(e.width=a.width,e.height=a.width*t.height/t.width,e.getComponent(cc.Canvas).designResolution=cc.size(e.width,e.height))},t.prototype.initView=function(){var e=cc.Canvas.instance;cc.winSize.width/cc.winSize.height>e.designResolution.width/e.designResolution.height&&(e.fitWidth=!1,e.fitHeight=!0),this.resetSize(this.node)},t.className="GameScene",a=r([d],t)}(c.BaseUI);a.default=p,cc._RF.pop()},{"./Game":"Game","./script/framework/BaseUI":"BaseUI","./script/framework/Manager/UIManager":"UIManager","./script/view/LoadingView/LoadingView":"LoadingView"}],GameTimeViewCtl:[function(e,t,a){"use strict";cc._RF.push(t,"df2edMRdtlD4pgdbi6qkgCi","GameTimeViewCtl");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator.ccclass,r=function(){function e(){this.barSpeed=.1,this.mGameTimeView=null}var t;return t=e,e.getInstance=function(){return t.sInstance||(t.sInstance=new t),t.sInstance},e.prototype.getNowDays=function(){return this.mGameTimeView.nowDays},e.sInstance=null,t=n([o],e)}();a.default=r,cc._RF.pop()},{}],GameTimeView:[function(e,t,a){"use strict";cc._RF.push(t,"c1580kqWXRJ349dknJ/wqWi","GameTimeView");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../../Game"),c=e("../../framework/BaseUI"),l=e("../../framework/Data/GameData"),s=e("../../framework/Manager/AudioManager"),d=e("../../framework/Manager/FileLocalDataManager"),p=e("../../framework/Manager/UIManager"),u=e("../../framework/UIComm/Tools"),f=e("../../node/Card/CardBase"),h=e("../../node/Card/CardBaseCtl"),g=e("../../node/Card/CardFactoryCtl"),y=e("../../node/Card/CardFightingCtl"),m=e("../../node/Enemy/CreateEnemy"),v=e("../../node/Model/CardTypeE"),C=e("../GameView/GameView"),_=e("../GameView/GameViewCtl"),T=e("../IllustratedView/IllustratedView"),I=e("../MainView/MainView"),w=e("../ShopView/ShopCtl"),M=e("../TaskView/TaskView"),E=e("../TaskView/TaskViewCtl"),b=e("./GameTimeViewCtl"),A=cc._decorator,k=A.ccclass,G=A.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.limitNode=null,t.foodLabel=null,t.foodIcon=null,t.coinLabel=null,t.cardLabel=null,t.daysLabel=null,t.timeLabel=null,t.eatPanel=null,t.sellPanel=null,t.startNewDayPanel=null,t.gameOverPanel=null,t.beatDevilPanel=null,t.oneDiePanel=null,t.suspendPanel=null,t.sellLabel=null,t.gameOverLabel=null,t.oneDieLabel=null,t.oneDieTipLabel=null,t.itemLabel=null,t.suspendLabel=null,t.selectTipNode=null,t.helpNode=null,t._nowDays=1,t.remindTime=120,t.foodIsEnough=!1,t.isBlik=!1,t.callBack=null,t.isPause=!1,t}var a;return o(t,e),a=t,Object.defineProperty(t.prototype,"nowDays",{get:function(){return this._nowDays},set:function(e){this._nowDays=e,this.daysLabel.string="\u7b2c"+this._nowDays+"\u5929"},enumerable:!1,configurable:!0}),t.prototype.getRemindTime=function(){return this.remindTime},t.prototype.setRemindTime=function(e){this.remindTime=e},t.prototype.onLoad=function(){b.default.getInstance().mGameTimeView=this},t.prototype.start=function(){this.setDays(this.nowDays)},t.prototype.init=function(){this.node.active=!1,this.refreshLabel(),this.setDays(this.nowDays)},t.prototype.refreshLabel=function(){this.setFood(),this.setCoinLabel(),this.setCard()},t.prototype.startTimer=function(){var e=this;this.callBack=function(){i.GAME.isContinueGame&&(e.remindTime-=1,e.timeLabel.string=e.convertSring(e.remindTime),0==e.remindTime&&(e.endOneDay(),e.unschedule(e.callBack)))},this.schedule(this.callBack,1,cc.macro.REPEAT_FOREVER,0)},t.prototype.convertSring=function(e){var t=Math.floor(e/60),a=t.toString();t<10&&t>=0&&(a="0"+a);var n=Math.floor(e%60),o=n.toString();return n<10&&n>=0&&(o="0"+o),"("+a+":"+o+")"},t.prototype.showHelp=function(){s.AudioManager.getInstance().clickBtn(),s.AudioManager.getInstance().playSound("pop"),this.helpNode.active=!0,i.GAME.pageAppearFunc(this.helpNode),i.GAME.isContinueGame=!1,this.setLimitState(!0)},t.prototype.closeHelp=function(){s.AudioManager.getInstance().clickBtn(),this.helpNode.active=!1,i.GAME.isContinueGame=!0,this.setLimitState(!1)},t.prototype.endOneDay=function(){var e=this;s.AudioManager.getInstance().playSound("onedayend"),this.eatPanel.active=!0,s.AudioManager.getInstance().playSound("pop"),this.eatPanel.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){e.eatBtnClick()}))),this.setLimitState(!0),this.timeLabel.string="(00:00)",i.GAME.isContinueGame=!1},t.prototype.gameOver=function(){this.gameOverPanel.active=!0,s.AudioManager.getInstance().playSound("pop"),this.setLimitState(!0),this.unschedule(this.callBack),i.GAME.isContinueGame=!1},t.prototype.setLimitState=function(e){this.limitNode.active=e},t.prototype.setFood=function(){if(this.foodLabel){for(var e=0,t=0,a=0;a<i.GAME.allSurvivorCard.length;a++){var n=i.GAME.allSurvivorCard[a].getComponent(f.default);t+=this.test(n.cardTypeIdx)}for(a=0;a<i.GAME.allFoodCard.length;a++)e+=(n=i.GAME.allFoodCard[a].getComponent(f.default)).foodEatNum;this.foodLabel.string=e+"/"+t,this.foodIsEnough=e>=t,this.foodBlik()}},t.prototype.foodBlik=function(){var e=this;this.foodIsEnough?(this.foodLabel.node.stopAllActions(),this.foodLabel.node.color=cc.Color.WHITE,this.foodIcon.color=cc.Color.WHITE,this.isBlik=!1):this.isBlik||(this.foodLabel.node.stopAllActions(),this.isBlik=!0,this.foodLabel.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.foodLabel.node.color=cc.Color.RED,e.foodIcon.color=cc.Color.RED}),cc.delayTime(1),cc.callFunc(function(){e.foodLabel.node.color=cc.Color.WHITE,e.foodIcon.color=cc.Color.WHITE})))))},t.prototype.setCoinLabel=function(){this.coinLabel&&(this.coinLabel.string=i.GAME.allCoinCard.length.toString())},t.prototype.setCard=function(){this.cardLabel&&(this.cardLabel.string=i.GAME.allCard.length-i.GAME.allCoinCard.length+"/"+i.GAME.maxCardNum)},t.prototype.setDays=function(e){this.daysLabel.string="\u7b2c"+e+"\u5929"},t.prototype.setItemTip=function(e){this.itemLabel.string=e},t.prototype.getItemTip=function(){return this.itemLabel.string},t.prototype.showSelectTip=function(e){this.selectTipNode.active=!0;var t=this.selectTipNode.children[1].getComponent(cc.Label);t.string=e,this.selectTipNode.children[0].getComponent(cc.Label).fontSize=t.fontSize},t.prototype.hitSelectTip=function(){this.selectTipNode&&(this.selectTipNode.active=!1)},t.prototype.eatBtnClick=function(){s.AudioManager.getInstance().clickBtn(),this.eatPanel.stopAllActions(),this.eatPanel.active=!1,this.eat(i.GAME.allSurvivorCard[0].getComponent(f.default),this.test(i.GAME.allSurvivorCard[0].getComponent(f.default).cardTypeIdx),0)},t.prototype.eat=function(e,t,a){var n=this;0==t&&i.GAME.allSurvivorCard[a+1]&&this.eat(i.GAME.allSurvivorCard[a+1].getComponent(f.default),this.test(i.GAME.allSurvivorCard[a+1].getComponent(f.default).cardTypeIdx),a+1);for(var o=_.default.getInstance().mGameLayerView.carPanel,r=null,c=0;c<o.children.length;c++){var l=o.children[c].getComponent(f.default);if(h.default.getInstance().isFood(l)){if(0==l.childCard.children.length)r=l;else{for(var d=l.childCard.children.length-1;d>=0;d--){var p=l.childCard.children[d].getComponent(f.default);if(h.default.getInstance().isFood(p)){r=p;break}}null==r&&(r=l)}break}}if(r){var u=r.node.parent.convertToNodeSpaceAR(e.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),m=r.node.getPosition();this.foodSetTopIndex(r.node,o,3),r.node.runAction(cc.sequence(cc.moveTo(1,u),cc.callFunc(function(){r.foodEatNum==t?(s.AudioManager.getInstance().playSound("eat"),e.getComponent(cc.Animation).play("smoke"),g.default.getInstance().removeCard(r),n.setSellText(),i.GAME.allSurvivorCard[a+1]?n.eat(i.GAME.allSurvivorCard[a+1].getComponent(f.default),n.test(i.GAME.allSurvivorCard[a+1].getComponent(f.default).cardTypeIdx),a+1):n.testIsAllDie()):r.foodEatNum>t?(r.foodEatNum-=t,i.GAME.allSurvivorCard[a+1]?r.node.runAction(cc.sequence(cc.moveTo(1,m),cc.callFunc(function(){e.getComponent(cc.Animation).play("smoke"),n.foodSetTopIndex(r.node,o,1),n.eat(i.GAME.allSurvivorCard[a+1].getComponent(f.default),n.test(i.GAME.allSurvivorCard[a+1].getComponent(f.default).cardTypeIdx),a+1)}))):r.node.runAction(cc.sequence(cc.moveTo(1,m),cc.callFunc(function(){e.getComponent(cc.Animation).play("smoke"),n.foodSetTopIndex(r.node,o,1),n.testIsAllDie()})))):(e.getComponent(cc.Animation).play("smoke"),s.AudioManager.getInstance().playSound("eat"),g.default.getInstance().removeCard(r),n.setSellText(),n.eat(i.GAME.allSurvivorCard[a].getComponent(f.default),t-r.foodEatNum,a))})))}else y.default.getInstance().survivorDie(e),i.GAME.allSurvivorCard[a+1]?this.eat(i.GAME.allSurvivorCard[a+1].getComponent(f.default),this.test(i.GAME.allSurvivorCard[a+1].getComponent(f.default).cardTypeIdx),a+1):this.testIsAllDie()},t.prototype.foodSetTopIndex=function(e,t,a){e.parent==t?e.zIndex=a:e.parent.parent.parent.zIndex=a},t.prototype.test=function(e){return e==v.cardType_E.Baby?1:e==v.cardType_E.Friendlyzombie?0:2},t.prototype.testIsAllDie=function(){var e=this;this.eatPanel.active=!1,y.default.getInstance().testIsSurvivor()?this.testCardIsMore():this.showOneDiePanel(function(){e.resurrectOneSurvivor(),e.testCardIsMore()},function(){e.gameOver()},!0)},t.prototype.testCardIsMore=function(){var e=this;i.GAME.allCard.length-i.GAME.allCoinCard.length>i.GAME.maxCardNum?(this.sellPanel.active=!0,s.AudioManager.getInstance().playSound("pop"),this.setSellText()):(this.sellPanel.active=!1,this.startNewDayPanel.active=!0,s.AudioManager.getInstance().playSound("pop"),this.startNewDayPanel.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){e.openNewDay()}))))},t.prototype.resurrectOneSurvivor=function(){for(var e=null,t=0;t<i.GAME.allSurvivorCard.length;t++){var a=i.GAME.allSurvivorCard[t];if(a.cardTypeIdx==v.cardType_E.Friendlyzombie){e=a;break}}g.default.getInstance().removeCard(e),g.default.getInstance().createCard(e.node.getPosition(),v.cardType_E.Survivor,_.default.getInstance().mGameLayerView.carPanel)},t.prototype.setSellText=function(){var e=i.GAME.allCard.length-i.GAME.allCoinCard.length-i.GAME.maxCardNum;this.sellLabel.string=e.toString()},t.prototype.sellClick=function(){this.setLimitState(!1),this.sellPanel.active=!1,i.GAME.canClickTag=!1},t.prototype.openNewDay=function(){s.AudioManager.getInstance().clickBtn(),this.startNewDayPanel.stopAllActions(),this.startNewDayPanel.active=!1,this.nowDays+=1,2==this.nowDays&&E.default.getInstance().completeTask(6),this.setFood(),this.setCard(),i.GAME.isContinueGame=!0,this.setLimitState(!1),this.remindTime=120,this.startTimer(),g.default.getInstance().refreshAllCard(),m.default.getInstance().init(this.nowDays),i.GAME.canClickTag=!0},t.prototype.pauseClick=function(){i.GAME.canClickTag&&(this.setLimitState(!0),i.GAME.isContinueGame=!1,this.suspendPanel.active=!0,s.AudioManager.getInstance().clickBtn(),s.AudioManager.getInstance().playSound("pop"),this.suspendLabel.string="\u4f60\u5df2\u5b58\u6d3b\u7b2c"+u.Tools.DigitToChinese(this.nowDays)+"\u5929")},t.prototype.repauseClick=function(){s.AudioManager.getInstance().clickBtn(),this.setLimitState(!1),i.GAME.isContinueGame=!0,this.suspendPanel.active=!1},t.prototype.reStart=function(){s.AudioManager.getInstance().clickBtn(),i.GAME.reStart(),this.gameOverPanel.active=!1,this.timeLabel.string="(02:00)",this.nowDays=1,this.setLimitState(!1),this.init(),i.GAME.isContinueGame=!0,w.default.getInstance().createPackage(0)},t.prototype.showOneDiePanel=function(e,t,a){this.setLimitState(!0),i.GAME.isContinueGame=!1,s.AudioManager.getInstance().playSound("pop"),this.oneDiePanel.active=!0,this.oneDieLabel.string="\u4f60\u5df2\u5b58\u6d3b\u7b2c"+u.Tools.DigitToChinese(this.nowDays)+"\u5929",this.oneDieCall_ok=e,this.oneDieCall_no=t,this.isAllDie=a,this.oneDieTipLabel.string=a?"\u6240\u6709\u5e78\u5b58\u8005\u90fd\u6b7b\u4ea1\u4e86":"\u6709\u5e78\u5b58\u8005\u6b7b\u4ea1\u4e86"},t.prototype.oneDieClickOk=function(){s.AudioManager.getInstance().clickBtn(),this.oneDieCall_ok(),this.oneDiePanel.active=!1,this.setLimitState(!1),i.GAME.isContinueGame=!0},t.prototype.oneDieClickNo=function(){s.AudioManager.getInstance().clickBtn(),this.oneDiePanel.active=!1,this.isAllDie?(s.AudioManager.getInstance().playSound("pop"),this.gameOverPanel.active=!0):(this.setLimitState(!1),i.GAME.isContinueGame=!0,this.oneDieCall_no())},t.prototype.backMainView=function(e,t){if(4==Number(t))l.GameData.getInstance().saveGameData();else{var n="diff"+i.GAME.coefficientOfDifficulty;d.FileLocalDataManager.getInstance().setUserValue(n,null)}i.GAME.reStart(),p.UIManager.getInstance().openUI(I.default),p.UIManager.getInstance().closeUI(C.default),p.UIManager.getInstance().closeUI(a),p.UIManager.getInstance().closeUI(M.default),p.UIManager.getInstance().closeUI(T.default)},t.prototype.showBeatDevilPanel=function(){this.setLimitState(!0),s.AudioManager.getInstance().playSound("pop"),i.GAME.isContinueGame=!1,this.beatDevilPanel.active=!0},t.prototype.goonClick=function(){s.AudioManager.getInstance().clickBtn(),this.setLimitState(!1),i.GAME.isContinueGame=!0,this.beatDevilPanel.active=!1},t.className="GameTimeView",r([G(cc.Node)],t.prototype,"limitNode",void 0),r([G(cc.Label)],t.prototype,"foodLabel",void 0),r([G(cc.Node)],t.prototype,"foodIcon",void 0),r([G(cc.Label)],t.prototype,"coinLabel",void 0),r([G(cc.Label)],t.prototype,"cardLabel",void 0),r([G(cc.Label)],t.prototype,"daysLabel",void 0),r([G(cc.Label)],t.prototype,"timeLabel",void 0),r([G(cc.Node)],t.prototype,"eatPanel",void 0),r([G(cc.Node)],t.prototype,"sellPanel",void 0),r([G(cc.Node)],t.prototype,"startNewDayPanel",void 0),r([G(cc.Node)],t.prototype,"gameOverPanel",void 0),r([G(cc.Node)],t.prototype,"beatDevilPanel",void 0),r([G(cc.Node)],t.prototype,"oneDiePanel",void 0),r([G(cc.Node)],t.prototype,"suspendPanel",void 0),r([G(cc.Label)],t.prototype,"sellLabel",void 0),r([G(cc.Label)],t.prototype,"gameOverLabel",void 0),r([G(cc.Label)],t.prototype,"oneDieLabel",void 0),r([G(cc.Label)],t.prototype,"oneDieTipLabel",void 0),r([G(cc.Label)],t.prototype,"itemLabel",void 0),r([G(cc.Label)],t.prototype,"suspendLabel",void 0),r([G(cc.Node)],t.prototype,"selectTipNode",void 0),r([G(cc.Node)],t.prototype,"helpNode",void 0),a=r([k],t)}(c.BaseUI);a.default=P,cc._RF.pop()},{"../../../Game":"Game","../../framework/BaseUI":"BaseUI","../../framework/Data/GameData":"GameData","../../framework/Manager/AudioManager":"AudioManager","../../framework/Manager/FileLocalDataManager":"FileLocalDataManager","../../framework/Manager/UIManager":"UIManager","../../framework/UIComm/Tools":"Tools","../../node/Card/CardBase":"CardBase","../../node/Card/CardBaseCtl":"CardBaseCtl","../../node/Card/CardFactoryCtl":"CardFactoryCtl","../../node/Card/CardFightingCtl":"CardFightingCtl","../../node/Enemy/CreateEnemy":"CreateEnemy","../../node/Model/CardTypeE":"CardTypeE","../GameView/GameView":"GameView","../GameView/GameViewCtl":"GameViewCtl","../IllustratedView/IllustratedView":"IllustratedView","../MainView/MainView":"MainView","../ShopView/ShopCtl":"ShopCtl","../TaskView/TaskView":"TaskView","../TaskView/TaskViewCtl":"TaskViewCtl","./GameTimeViewCtl":"GameTimeViewCtl"}],GameViewCtl:[function(e,t,a){"use strict";cc._RF.push(t,"cfd5cRtAwVOBbR/vt8jf6qb","GameViewCtl");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator.ccclass,r=function(){function e(){this.mGameLayerView=null}var t;return t=e,e.getInstance=function(){return t.sInstance||(t.sInstance=new t),t.sInstance},e.sInstance=null,t=n([o],e)}();a.default=r,cc._RF.pop()},{}],GameView:[function(e,t,a){"use strict";cc._RF.push(t,"ff10awx5vZLFasGDl8K+FEz","GameView");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./../../../Game"),c=e("../../framework/BaseUI"),l=e("../ShopView/ShopCtl"),s=e("./GameViewCtl"),d=e("../../node/Card/CardBase"),p=e("../../framework/Manager/UIManager"),u=e("../GameTimeView/GameTimeView"),f=e("../TaskView/TaskView"),h=e("../GameTimeView/GameTimeViewCtl"),g=e("../../node/CardPack/CardPackM"),y=e("../../node/Model/CardTypeE"),m=e("../../node/Card/CardFactoryCtl"),v=e("../IllustratedView/IllustratedView"),C=e("../IllustratedView/IllustratedCtl"),_=e("../../framework/Data/GameData"),T=e("../TaskView/TaskViewCtl"),I=e("../../framework/Manager/AudioManager"),w=cc._decorator,M=w.ccclass,E=w.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgNode=null,t.bigBgNode=null,t.cardPre=null,t.cardPackPre=null,t.carPanel=null,t.sellNode=null,t.sellTipNode=null,t.cardPackNodeArr=[],t.allCard=null,t.allCoinCard=null,t.allFoodCard=null,t.allSurvivorCard=null,t.allTopCard=null,t.allZombie=null,t.scale=null,t.tipLabel=null,t.debugEdit=null,t.createBtn=null,t.tipLabelLayer=null,t.content=null,t.tipNode=null,t.countdownLabel=null,t.bgSprArr=[],t.bigBgSprArr=[],t.bgSmall=null,t.bgBig=null,t.bgOrigin=cc.v2(0,0),t.isDebugOpen=!1,t.isNewGame=!1,t.CardData=null,t}return o(t,e),t.prototype.onLoad=function(){I.AudioManager.getInstance().playBGM("bgm"),cc.macro.ENABLE_MULTI_TOUCH=!0,s.default.getInstance().mGameLayerView=this,this.tipLabelLayer.zIndex=30,this.setBg(),this.gameTip()},t.prototype.initGame=function(){this.CardData=_.GameData.getInstance().loadGameData(),this.CardData?(this.isNewGame=!0,h.default.getInstance().mGameTimeView.nowDays=this.CardData.nowDay,h.default.getInstance().mGameTimeView.setRemindTime(this.CardData.time),T.default.getInstance().nowTaskId=this.CardData.taskIndex):l.default.getInstance().createPackage(0)},t.prototype.initCard=function(){this.createAllCard(this.CardData.allCard),this.createAllCardPack(this.CardData.allCardPack),this.CardData.taskIsFinish&&T.default.getInstance().completeTask(this.CardData.taskIndex)},t.prototype.createAllCard=function(e){for(var t=0;t<e.length;t++){var a=e[t],n=m.default.getInstance().createCard(cc.v2(a.posX,a.posY),a.cardTypeIdx,this.carPanel);if(n.zIndex=a.zIndex,a.childCardArr.length>0)for(var o=0;o<a.childCardArr.length;o++){var r=a.childCardArr[o];m.default.getInstance().createCard(cc.v2(r.posX,r.posY),r.cardTypeIdx,n.getComponent(d.default).childCard).zIndex=r.zIndex}t==e.length-1&&n.getComponent(d.default).endCheck()}m.default.getInstance().refreshAllCard()},t.prototype.createAllCardPack=function(e){for(var t=0;t<e.length;t++){var a=e[t];l.default.getInstance().createPackage(a)}},t.prototype.clickHelp=function(){h.default.getInstance().mGameTimeView.showHelp()},t.prototype.gameTip=function(){var e=this,t=3;this.tipNode.runAction(cc.repeat(cc.sequence(cc.delayTime(1),cc.callFunc(function(){t-=1,e.countdownLabel.string=t+"s",0==t?e.tipNode.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){h.default.getInstance().mGameTimeView.node.active=!0,C.default.getInstance().mIllustratedView.node.active=!0,e.tipNode.active=!1,e.isNewGame&&(e.initCard(),h.default.getInstance().mGameTimeView.startTimer(),T.default.getInstance().mTaskView.updateTaskLabel())}))):2==t&&(e.createIllstratedView(),e.createGameTimeView())})),3))},t.prototype.setBg=function(){this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgSprArr[i.GAME.coefficientOfDifficulty-1],this.bigBgNode.getComponent(cc.Sprite).spriteFrame=this.bigBgSprArr[i.GAME.coefficientOfDifficulty-1],this.tipNode.getComponent(cc.Sprite).spriteFrame=this.bigBgSprArr[i.GAME.coefficientOfDifficulty-1]},t.prototype.createTask=function(){p.UIManager.getInstance().openUI(f.default,this.content,null,10),this.carPanel.zIndex=20},t.prototype.createGameTimeView=function(){var e=this;p.UIManager.getInstance().openUI(u.default,null,null,10,function(){h.default.getInstance().mGameTimeView.init(),h.default.getInstance().mGameTimeView.node.active=!1,e.createTask(),e.initGame()})},t.prototype.createIllstratedView=function(){p.UIManager.getInstance().openUI(v.default,null,null,11,function(){C.default.getInstance().mIllustratedView.node.active=!1})},t.prototype.testCreate=function(){var e=this.debugEdit.string;"\u8f93\u5165\u751f\u6210\u7684\u5361\u7247id"!=e&&m.default.getInstance().createCard(cc.v2(0,-20),Number(e),this.carPanel)},t.prototype.onclickPack=function(e,t){i.GAME.isContinueGame&&(this.creatCardPack(parseInt(t)),i.GAME.nowTouchCardPack&&(i.GAME.nowTouchCardPack.removeFromParent(),i.GAME.nowTouchCardPack=null))},t.prototype.creatCardPack=function(e){i.GAME.allCoinCard.length>=g.allCardPackPrice[e]&&this.findCoinToFly(g.allCardPackPrice[e],e,0)},t.prototype.findCoinToFly=function(e,t,a){for(var n=this,o=null,r=0;r<this.carPanel.children.length;r++)if((s=this.carPanel.children[r].getComponent(d.default)).cardTypeIdx==y.cardType_E.Coin){o=s;break}null==o&&(o=i.GAME.allCoinCard[0]);var c=[o.node];for(r=0;r<o.childCard.children.length;r++){var s;(s=o.childCard.children[r]).getComponent(d.default).cardTypeIdx==y.cardType_E.Coin&&c.push(s)}var p,u=c.length,f=!1;u>=e?(p=e,f=!0):p=u;var h=c.length-p;i.GAME.canTouch=!1,i.GAME.isContinueGame=!1;var g=function(o){v.bgNode.runAction(cc.sequence(cc.delayTime(.3*a),cc.callFunc(function(){var a=c[o];n.setNodeChild(a);var r=n.node.convertToNodeSpaceAR(a.convertToWorldSpaceAR(cc.Vec2.ZERO));a.parent=n.node,a.zIndex=100,a.setPosition(r);var s=n.node.convertToNodeSpaceAR(n.cardPackNodeArr[t].convertToWorldSpaceAR(cc.Vec2.ZERO));a.getComponent(d.default).isOpenLimit=!1,a.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,s),cc.scaleTo(.6,.9)),cc.callFunc(function(){m.default.getInstance().removeCard(a.getComponent(d.default)),I.AudioManager.getInstance().playSound("sellCard"),o==h&&f?(l.default.getInstance().createPackage(t),m.default.getInstance().refreshAllCard(),i.GAME.canTouch=!0,i.GAME.isContinueGame=!0):o==h&&u<e&&n.findCoinToFly(e-u,t,0)})))}))),a++},v=this;for(r=c.length-1;r>=h;r--)g(r)},t.prototype.setNodeChild=function(e){var t=s.default.getInstance().mGameLayerView.carPanel;if(e.parent==t){var a=e.getComponent(d.default).childCard,n=null,o=1;if(a.children.length>0)for(var r=0;r<a.children.length;r++){var i=a.children[r];n?(i.parent=n.getComponent(d.default).childCard,i.setPosition(cc.v2(0,-20*o)),o++):(i.parent=t,i.setPosition(t.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.Vec2.ZERO))),n=i),r--}}else for(o=-1,r=0;r<e.parent.children.length;r++)(i=e.parent.children[r])==e&&(o=r),o>=0&&(i.y+=20)},t.prototype.showCanBuyCardPackTip=function(e){for(var t=0;t<this.cardPackNodeArr.length;t++){var a=this.cardPackNodeArr[t];e>=g.allCardPackPrice[t]&&(a.getChildByName("tip").active=!0)}},t.prototype.showCanSellCardPackTip=function(){this.sellTipNode.active=!0},t.prototype.removeCardPackTip=function(){for(var e=0;e<this.cardPackNodeArr.length;e++)this.cardPackNodeArr[e].getChildByName("tip").active=!1;this.sellTipNode.active=!1},t.prototype.update=function(){if(this.isDebugOpen){var e="allcard:";i.GAME.allCard.forEach(function(t){e+="/"+t._cardTypeC});var t="allCoinCard:";i.GAME.allCoinCard.forEach(function(e){t+="/"+e._cardTypeC});var a="allFoodCard:";i.GAME.allFoodCard.forEach(function(e){a+="/"+e._cardTypeC});var n="allSurvivorCard:";i.GAME.allSurvivorCard.forEach(function(e){n+="/"+e._cardTypeC});var o="allTopCard:";this.carPanel.children.forEach(function(e){o+="/"+e.getComponent(d.default)._cardTypeC});var r="allZombieCard:";i.GAME.allZombieCard.forEach(function(e){r+="/"+e._cardTypeC});var c="scale:"+i.GAME.nowScale;this.allCard.string=e,this.allCoinCard.string=t,this.allFoodCard.string=a,this.allSurvivorCard.string=n,this.allTopCard.string=o,this.allZombie.string=r,this.scale.string=c}},t.className="GameView",r([E(cc.Node)],t.prototype,"bgNode",void 0),r([E(cc.Node)],t.prototype,"bigBgNode",void 0),r([E(cc.Prefab)],t.prototype,"cardPre",void 0),r([E(cc.Prefab)],t.prototype,"cardPackPre",void 0),r([E(cc.Node)],t.prototype,"carPanel",void 0),r([E(cc.Node)],t.prototype,"sellNode",void 0),r([E(cc.Node)],t.prototype,"sellTipNode",void 0),r([E(cc.Node)],t.prototype,"cardPackNodeArr",void 0),r([E(cc.Label)],t.prototype,"allCard",void 0),r([E(cc.Label)],t.prototype,"allCoinCard",void 0),r([E(cc.Label)],t.prototype,"allFoodCard",void 0),r([E(cc.Label)],t.prototype,"allSurvivorCard",void 0),r([E(cc.Label)],t.prototype,"allTopCard",void 0),r([E(cc.Label)],t.prototype,"allZombie",void 0),r([E(cc.Label)],t.prototype,"scale",void 0),r([E(cc.Prefab)],t.prototype,"tipLabel",void 0),r([E(cc.EditBox)],t.prototype,"debugEdit",void 0),r([E(cc.Button)],t.prototype,"createBtn",void 0),r([E(cc.Node)],t.prototype,"tipLabelLayer",void 0),r([E(cc.Node)],t.prototype,"content",void 0),r([E(cc.Node)],t.prototype,"tipNode",void 0),r([E(cc.Label)],t.prototype,"countdownLabel",void 0),r([E(cc.SpriteFrame)],t.prototype,"bgSprArr",void 0),r([E(cc.SpriteFrame)],t.prototype,"bigBgSprArr",void 0),r([E(cc.Sprite)],t.prototype,"bgSmall",void 0),r([E(cc.Sprite)],t.prototype,"bgBig",void 0),r([M],t)}(c.BaseUI);a.default=b,cc._RF.pop()},{"../../framework/BaseUI":"BaseUI","../../framework/Data/GameData":"GameData","../../framework/Manager/AudioManager":"AudioManager","../../framework/Manager/UIManager":"UIManager","../../node/Card/CardBase":"CardBase","../../node/Card/CardFactoryCtl":"CardFactoryCtl","../../node/CardPack/CardPackM":"CardPackM","../../node/Model/CardTypeE":"CardTypeE","../GameTimeView/GameTimeView":"GameTimeView","../GameTimeView/GameTimeViewCtl":"GameTimeViewCtl","../IllustratedView/IllustratedCtl":"IllustratedCtl","../IllustratedView/IllustratedView":"IllustratedView","../ShopView/ShopCtl":"ShopCtl","../TaskView/TaskView":"TaskView","../TaskView/TaskViewCtl":"TaskViewCtl","./../../../Game":"Game","./GameViewCtl":"GameViewCtl"}],Game:[function(e,t,a){"use strict";cc._RF.push(t,"ab2b5QzBYZNWa3soAcTLusM","Game"),Object.defineProperty(a,"__esModule",{value:!0}),a.Game=a.gameLanguage=a.MIN_X=a.MAX_X=a.MIN_Y=a.MAX_Y=a.GAME=void 0;var n,o=e("./script/android/userbehaviorcollect/UserBehaviorCollectCtl"),r=e("./script/android/userbehaviorcollect/UserBehaviorCollectM"),i=e("./script/framework/Manager/FileLocalDataManager"),c=e("./script/view/TaskView/TaskViewCtl");a.MAX_Y=134,a.MIN_Y=-290,a.MAX_X=570,a.MIN_X=-570,function(e){e[e.English=0]="English",e[e.Chinese=1]="Chinese"}(n=a.gameLanguage||(a.gameLanguage={}));var l=function(){function e(){this.mLifeTime=null,this.allCard=[],this.allCoinCard=[],this.allSurvivorCard=[],this.allFoodCard=[],this.allZombieCard=[],this.nowTouchCardPack=null,this.language=n.Chinese,this.scheduleCount=0,this.maxCardNum=20,this.CardId=0,this.nowScale=1,this.cardDistance=10,this.isContinueGame=!0,this.canTouch=!0,this.coefficientOfDifficulty=1,this.difficultyIsUnlock=!1,this.isFirstOpen=!0,this.canClickTag=!0}return e.getInstance=function(){return e.sInstance||(e.sInstance=new e,e.sInstance.init()),e.sInstance},e.prototype.init=function(){a.GAME=e.getInstance(),cc.game.on(cc.game.EVENT_HIDE,this.onHideGame.bind(this),this),cc.game.on(cc.game.EVENT_SHOW,this.onShowGame.bind(this),this),this.mLifeTime=i.FileLocalDataManager.getInstance().getUserValue(i.EFileType[i.EFileType.life_time]),this.mLifeTime||(this.mLifeTime=Date.now()/1e3,i.FileLocalDataManager.getInstance().setUserValue(i.EFileType[i.EFileType.life_time],this.mLifeTime))},e.prototype.pageAppearFunc=function(e){e.opacity=0,e.runAction(cc.spawn(cc.sequence(cc.moveBy(.01,cc.v2(0,-10)),cc.moveBy(.4,cc.v2(0,10))),cc.fadeIn(.5)))},e.prototype.reStart=function(){this.isContinueGame=!0;for(var e=0;e<this.allCard.length;e++)this.allCard[e].node.removeFromParent();a.GAME.allCard.forEach(function(e){e.node.stopAllActions(),e.node.removeFromParent()}),this.allCard=[],this.allCoinCard=[],this.allFoodCard=[],this.allSurvivorCard=[],c.default.getInstance().resetTask()},e.prototype.onHideGame=function(){cc.log("fyh: \u6e38\u620f\u8fdb\u5165\u540e\u53f0"),i.FileLocalDataManager.getInstance().setUserValue(r.EGDDType.Play_every_20min,o.default.remainTime_20min),i.FileLocalDataManager.getInstance().setUserValue(r.EGDDType.Play_every_30min,o.default.remainTime_30min)},e.prototype.onShowGame=function(){cc.log("fyh: \u6e38\u620f\u5207\u56de\u524d\u53f0")},e.sInstance=null,e}();a.Game=l,cc._RF.pop()},{"./script/android/userbehaviorcollect/UserBehaviorCollectCtl":"UserBehaviorCollectCtl","./script/android/userbehaviorcollect/UserBehaviorCollectM":"UserBehaviorCollectM","./script/framework/Manager/FileLocalDataManager":"FileLocalDataManager","./script/view/TaskView/TaskViewCtl":"TaskViewCtl"}],IllustratedCtl:[function(e,t,a){"use strict";cc._RF.push(t,"e3d15u15wBHJY0F9YExoTYz","IllustratedCtl");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../framework/Manager/FileLocalDataManager"),c=e("../../node/Model/CardTypeC"),l=cc._decorator.ccclass,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allNew=[],t.barSpeed=.1,t.mIllustratedView=null,t}var a;return o(t,e),a=t,t.getInstance=function(){return a.sInstance||(a.sInstance=new a),a.sInstance},t.prototype.unlock=function(e){var t=this,a=c.cardType_C[e],n=i.FileLocalDataManager.getInstance().getUserValue(i.ELocalDataType[i.ELocalDataType.Illustrated]);n.forEach(function(e){e.dataComplete||e.data!=a||(e.dataComplete=!0,t.mIllustratedView.newTapLogo.node.active=!0,t.mIllustratedView.refreshNewLogo(a))}),i.FileLocalDataManager.getInstance().setUserValue(i.ELocalDataType[i.ELocalDataType.Illustrated],n),this.mIllustratedView.refreshWikiItem(),this.mIllustratedView.refreshComposeItem()},t.sInstance=null,a=r([l],t)}(cc.Component);a.default=s,cc._RF.pop()},{"../../framework/Manager/FileLocalDataManager":"FileLocalDataManager","../../node/Model/CardTypeC":"CardTypeC"}],IllustratedView:[function(e,t,a){"use strict";cc._RF.push(t,"c52d4Hg9ulDNomZoOpKZTVd","IllustratedView");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./../../../Game"),c=e("./../../node/Model/CardDescribe"),l=e("./../../framework/Utils/LogWrap"),s=e("./../../framework/Manager/FileLocalDataManager"),d=e("../../framework/BaseUI"),p=e("./IllustratedCtl"),u=e("../GameTimeView/GameTimeViewCtl"),f=e("../../framework/Manager/AudioManager"),h=cc._decorator,g=h.ccclass,y=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.view=null,t.showView=null,t.itemPre=null,t.showViewPre=null,t.ComposePre=null,t.TpPre=null,t.tapLeft=null,t.tapRight=null,t.tapLabelL=null,t.tapLabelR=null,t.btn=null,t.hechengScroll=null,t.scrollContent0=null,t.baikeScroll=null,t.scrollContent=null,t.newTapLogo=null,t.selectbaike=null,t.selecthecheng=null,t.showViewItem=null,t.composeItem=null,t.isShowViewOpen=!1,t.labArr=[],t.labComposeArr=[],t}return o(t,e),t.prototype.onLoad=function(){this.initItem(),this.showViewItem.active=!1,this.composeItem.active=!0,p.default.getInstance().mIllustratedView=this},t.prototype.click=function(){f.AudioManager.getInstance().clickBtn(),i.GAME.canClickTag&&(this.isShowViewOpen?(this.isShowViewOpen=!1,this.view.runAction(cc.moveBy(.5,cc.v2(-640,0))),this.btn.node.setPosition(cc.v2(322,0)),this.getComponent(cc.BlockInputEvents).enabled=!1):(this.isShowViewOpen=!0,this.view.runAction(cc.sequence(cc.moveBy(.5,cc.v2(650,0)),cc.moveBy(.2,cc.v2(-10,0)))),this.btn.node.setPosition(cc.v2(935,0)),this.getComponent(cc.BlockInputEvents).enabled=!0),i.GAME.isContinueGame=!this.isShowViewOpen)},t.prototype.clickComposeHead=function(){f.AudioManager.getInstance().clickBtn(),this.baikeScroll.node.active=!1,this.hechengScroll.node.active=!0,this.showViewItem.active=!1,this.composeItem.active=!0,this.tapLeft.node.active=!0,this.tapRight.node.active=!1,this.tapLabelL.node.scale=1.05,this.tapLabelR.node.scale=1,this.tapLabelL.node.color=cc.Color.WHITE,this.tapLabelR.node.color=cc.color(61,154,245,255)},t.prototype.clickWikiHead=function(){f.AudioManager.getInstance().clickBtn(),this.baikeScroll.node.active=!0,this.hechengScroll.node.active=!1,this.showViewItem.active=!0,this.composeItem.active=!1,this.tapLeft.node.active=!1,this.tapRight.node.active=!0,this.tapLabelL.node.scale=1,this.tapLabelR.node.scale=1.05,this.tapLabelR.node.color=cc.Color.WHITE,this.tapLabelL.node.color=cc.color(61,154,245,255)},t.prototype.initItem=function(){var e=s.FileLocalDataManager.getInstance().getUserValue(s.ELocalDataType[s.ELocalDataType.Illustrated]);this.composeItem=cc.instantiate(this.ComposePre),this.composeItem.parent=this.showView.node,this.showViewItem=cc.instantiate(this.showViewPre),this.showViewItem.parent=this.showView.node;for(var t=0,a=0;a<e.length;a++){var n=e[a],o=n.idx,r=cc.instantiate(this.itemPre);this.baikeHead(n),100==o&&(this.selectbaike=r.children[0],this.selectbaike.active=!0),r.parent=this.scrollContent;var i=r.children[1],l=i.children[0],d=new cc.Component.EventHandler;d.target=this.node,d.component="IllustratedView",d.handler="openWiki",d.customEventData=n.idx.toString(),l.getComponent(cc.Button).clickEvents.push(d),this.labArr.push(i),n.dataComplete?i.getComponent(cc.Label).string=n.data:i.getComponent(cc.Label).string="??????????";var p=cc.instantiate(this.itemPre);this.hechengHead(n),311==o&&(this.selecthecheng=p.children[0],this.selecthecheng.active=!0,this.addClickCompose("\u5e78\u5b58\u8005+\u6728\u57573+\u5de5\u5177\u7bb1=\u6728\u9524")),p.parent=this.scrollContent0,c.blueArr.get(Number(o))?t++:p.active=!1;var u=p.children[1],f=u.children[0],h=new cc.Component.EventHandler;h.target=this.node,h.component="IllustratedView",h.handler="openCompose",h.customEventData=n.idx.toString(),this.labComposeArr.push(u),f.getComponent(cc.Button).clickEvents.push(h),n.dataComplete?u.getComponent(cc.Label).string=n.data:u.getComponent(cc.Label).string="??????????"}this.scrollContent.height=50*(e.length+8)+25,this.scrollContent0.height=50*(t+4)+25},t.prototype.hechengHead=function(e){var t;"\u6728\u9524"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent0,t.children[1].getComponent(cc.Label).string="\u57fa\u7840\u7269\u54c1"),"\u624b\u67aa"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent0,t.children[1].getComponent(cc.Label).string="\u6b66\u5668"),"\u5e10\u7bf7"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent0,t.children[1].getComponent(cc.Label).string="\u9ad8\u7ea7\u7269\u54c1"),"\u70e4\u9999\u80a0"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent0,t.children[1].getComponent(cc.Label).string="\u9ad8\u7ea7\u98df\u7269")},t.prototype.baikeHead=function(e){var t;"\u5e78\u5b58\u8005"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent,t.children[1].getComponent(cc.Label).string="\u53cb\u65b9\u89d2\u8272"),"\u5c0f\u4e27\u5c38"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent,t.children[1].getComponent(cc.Label).string="\u654c\u4eba"),"\u5e9f\u589f"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent,t.children[1].getComponent(cc.Label).string="\u57fa\u7840\u5efa\u7b51"),"\u624b\u67aa"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent,t.children[1].getComponent(cc.Label).string="\u6b66\u5668\u5e93"),"\u730e\u72d7"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent,t.children[1].getComponent(cc.Label).string="\u52a8\u7269"),"\u5e10\u7bf7"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent,t.children[1].getComponent(cc.Label).string="\u9ad8\u7ea7\u5efa\u7b51"),"\u6843\u5b50"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent,t.children[1].getComponent(cc.Label).string="\u98df\u7269"),"\u8865\u7ed9\u7bb1"==e.data&&((t=cc.instantiate(this.TpPre)).parent=this.scrollContent,t.children[1].getComponent(cc.Label).string="\u63a2\u7d22")},t.prototype.openWiki=function(e,t){f.AudioManager.getInstance().clickBtn();var a=e.target,n=a.parent.getComponent(cc.Label).string;l.LogWrap.log("\u5f53\u524d\u70b9\u51fb\u7684\u662f\u767e\u79d1\u7684"+a.parent.getComponent(cc.Label).string),this.refreshWiki(t,n),this.selectbaike&&(this.selectbaike.active=!1),a.parent.parent.children[0].active=!0,a.parent.parent.children[2].active=!1,this.selectbaike=a.parent.parent.children[0],this.checkAllFalse()},t.prototype.openCompose=function(e,t){f.AudioManager.getInstance().clickBtn();var a=e.target,n=a.parent.getComponent(cc.Label).string;l.LogWrap.log("\u5f53\u524d\u70b9\u51fb\u7684\u662f\u5408\u6210\u7684"+a.parent.getComponent(cc.Label).string),this.refreshCompose(t,n),this.selecthecheng&&(this.selecthecheng.active=!1),a.parent.parent.children[0].active=!0,a.parent.parent.children[2].active=!1,this.selecthecheng=a.parent.parent.children[0],this.checkAllFalse()},t.prototype.checkAllFalse=function(){var e=!1;p.default.getInstance().allNew.forEach(function(t){t.active&&(e=!0)}),e||(this.newTapLogo.node.active=!1)},t.prototype.refreshWiki=function(e,t){var a=Number(e);if(this.showViewItem.active){var n=c.cardDescribe[a],o=this.showViewItem.children[0];o.active=!0,"??????????"==t?(o.children[1].getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("card/banke_wei",cc.SpriteFrame),o.children[2].children[0].getComponent(cc.Label).string=t):(o.children[1].getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("card/"+a,cc.SpriteFrame),o.children[2].children[0].getComponent(cc.Label).string=n)}},t.prototype.refreshCompose=function(e,t){var a=Number(e);if(this.composeItem.active){var n=c.blueArr.get(a);"??????????"==t?(this.composeItem.children[0].getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("card/banke_wei",cc.SpriteFrame),this.composeItem.children[1].children[0].getComponent(cc.Label).string=t,this.composeItem.children[2].children[0].getComponent(cc.Label).string=t,this.composeItem.children[2].children[3].active=!1,this.composeItem.children[2].children[2].active=!1,this.composeItem.children[2].children[1].active=!1):(this.composeItem.children[0].getComponent(cc.Sprite).spriteFrame=cc.loader.getRes("card/"+a,cc.SpriteFrame),this.composeItem.children[1].children[0].getComponent(cc.Label).string=c.cardDescribe[a],this.composeItem.children[2].children[0].getComponent(cc.Label).string=n,this.composeItem.children[2].children[3].active=!0,this.composeItem.children[2].children[2].active=!0,this.composeItem.children[2].children[1].active=!0,this.addClickCompose(n),n!=u.default.getInstance().mGameTimeView.getItemTip()&&(this.composeItem.children[2].children[2].children[0].active=!1))}},t.prototype.refreshNewLogo=function(e){for(var t=s.FileLocalDataManager.getInstance().getUserValue(s.ELocalDataType[s.ELocalDataType.Illustrated]),a=0;a<t.length;a++){var n=this.labArr[a].getParent();t[a].data==e&&n.active&&((o=n.children[2]).active=!0,p.default.getInstance().allNew.push(o));var o,r=this.labComposeArr[a].getParent();t[a].data==e&&r.active&&((o=r.children[2]).active=!0,p.default.getInstance().allNew.push(o))}},t.prototype.refreshWikiItem=function(){for(var e=s.FileLocalDataManager.getInstance().getUserValue(s.ELocalDataType[s.ELocalDataType.Illustrated]),t=0;t<e.length;t++)e[t].dataComplete&&(this.labArr[t].getComponent(cc.Label).string=e[t].data)},t.prototype.refreshComposeItem=function(){for(var e=s.FileLocalDataManager.getInstance().getUserValue(s.ELocalDataType[s.ELocalDataType.Illustrated]),t=0;t<e.length;t++)e[t].dataComplete&&(this.labComposeArr[t].getComponent(cc.Label).string=e[t].data)},t.prototype.addClickWiki=function(e){f.AudioManager.getInstance().clickBtn();var t=new cc.Component.EventHandler;t.target=this.node,t.component="IllustratedView",t.handler="clickWiki",t.customEventData=e,this.showViewItem.children[1].children[5].getComponent(cc.Button).clickEvents=[],this.showViewItem.children[1].children[5].getComponent(cc.Button).clickEvents.push(t)},t.prototype.addClickCompose=function(e){var t=new cc.Component.EventHandler;t.target=this.node,t.component="IllustratedView",t.handler="clickCompose",t.customEventData=e,this.composeItem.children[2].children[3].getComponent(cc.Button).clickEvents=[],this.composeItem.children[2].children[3].getComponent(cc.Button).clickEvents.push(t)},t.prototype.clickCompose=function(e,t){f.AudioManager.getInstance().clickBtn();var a=e.target.parent.children[2].children[0];a.active=!a.active,a.active?u.default.getInstance().mGameTimeView.setItemTip(t):u.default.getInstance().mGameTimeView.setItemTip("")},t.className="IllustratedView",r([y(cc.Node)],t.prototype,"view",void 0),r([y(cc.Sprite)],t.prototype,"showView",void 0),r([y(cc.Prefab)],t.prototype,"itemPre",void 0),r([y(cc.Prefab)],t.prototype,"showViewPre",void 0),r([y(cc.Prefab)],t.prototype,"ComposePre",void 0),r([y(cc.Prefab)],t.prototype,"TpPre",void 0),r([y(cc.Sprite)],t.prototype,"tapLeft",void 0),r([y(cc.Sprite)],t.prototype,"tapRight",void 0),r([y(cc.Label)],t.prototype,"tapLabelL",void 0),r([y(cc.Label)],t.prototype,"tapLabelR",void 0),r([y(cc.Button)],t.prototype,"btn",void 0),r([y(cc.ScrollView)],t.prototype,"hechengScroll",void 0),r([y(cc.Node)],t.prototype,"scrollContent0",void 0),r([y(cc.ScrollView)],t.prototype,"baikeScroll",void 0),r([y(cc.Node)],t.prototype,"scrollContent",void 0),r([y(cc.Sprite)],t.prototype,"newTapLogo",void 0),r([g],t)}(d.BaseUI);a.default=m,cc._RF.pop()},{"../../framework/BaseUI":"BaseUI","../../framework/Manager/AudioManager":"AudioManager","../GameTimeView/GameTimeViewCtl":"GameTimeViewCtl","./../../../Game":"Game","./../../framework/Manager/FileLocalDataManager":"FileLocalDataManager","./../../framework/Utils/LogWrap":"LogWrap","./../../node/Model/CardDescribe":"CardDescribe","./IllustratedCtl":"IllustratedCtl"}],JniCtl:[function(e,t,a){"use strict";cc._RF.push(t,"3a64cdS4fBEbYysndK27Bw8","JniCtl");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<a;t++)for(var r=arguments[t],i=0,c=r.length;i<c;i++,o++)n[o]=r[i];return n};Object.defineProperty(a,"__esModule",{value:!0});var r=e("./akInter/AkInterCtl"),i=cc._decorator.ccclass,c=function(){function e(){this.successCall=null,this.failedCall=null}var t;return t=e,e.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},e.callStaticMethod=function(e,t,a){for(var n,r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return cc.sys.os!==cc.sys.OS_ANDROID?null:(n=jsb.reflection).callStaticMethod.apply(n,o([e,t,a],r))},e.doVibrate=function(){t.callStaticMethod("org/cocos2dx/javascript/AppActivity","vibrate","()V"),cc.log("fyh: doVibrate \u70b9\u51fb\u9707\u52a8")},e.jumpGp=function(e){cc.log("fyh: jumpGp"),t.callStaticMethod("org/cocos2dx/javascript/AppActivity","jumpGp","(Ljava/lang/String;)V",e)},e.getLocalInfo=function(){cc.log("fyh: getLocalInfo"),t.callStaticMethod("org/cocos2dx/javascript/akinter/localInfoUtil","getlocalInfo","()V")},e.getRandomUdidAndPackName=function(){t.callStaticMethod("org/cocos2dx/javascript/akinter/localInfoUtil","getRandomUdidAndPackName","()V")},e.getGgId=function(){cc.log("fyh: getGgId"),t.callStaticMethod("org/cocos2dx/javascript/akinter/localInfoUtil","getGgId","()V")},e.prototype.removeAds=function(e,a){cc.log("fyh: removeAds"),this.successCall=e,this.failedCall=a,t.callStaticMethod("org/cocos2dx/javascript/utils/BillingActivity","removeAds","()V")},e.prototype.buyPackageA=function(e,a){cc.log("fyh: buyPackageA"),this.successCall=e,this.failedCall=a,t.callStaticMethod("org/cocos2dx/javascript/utils/BillingActivity","buyPackageA","()V")},e.prototype.buyPackageB=function(e,a){cc.log("fyh: buyPackageB"),this.successCall=e,this.failedCall=a,t.callStaticMethod("org/cocos2dx/javascript/utils/BillingActivity","buyPackageB","()V")},e.prototype.nativebackToc=function(e){var a=JSON.parse(e);t.mToTsBean=a,r.AKINTERCTL.loadDownloadADs(),cc.log("fyh: \u4f7f\u7528Java\u8c03\u7528Ts\u4e2d\u7684\u51fd\u6570nativebackToc str = "+e)},e.prototype.udidCallBack=function(e){t.mUdid=e,cc.log("fyh: \u4f7f\u7528Java\u8c03\u7528Ts\u4e2d\u7684\u51fd\u6570udidCallBack udid = "+e)},e.prototype.placeInfoCallBack=function(e){var a=JSON.parse(e);t.mToTsBeanInfo=a,r.default.mFromhttpData.lang=a.language,r.default.mFromhttpData.country=a.country,r.default.mFromhttpData.user_id=a.userid,r.default.getFromhttp(),cc.log("fyh: \u4f7f\u7528Java\u8c03\u7528Ts\u4e2d\u7684\u51fd\u6570placeInfoCallBack obj = "+Object.keys(a))},e.prototype.GgIdCallBack=function(e){r.default.mFromhttpData.google_id=e,cc.log("fyh: \u4f7f\u7528Java\u8c03\u7528Ts\u4e2d\u7684\u51fd\u6570udidCallBack GgId = "+e),r.default.getFromhttp()},e.prototype.GgBuySuccessCallBack=function(){cc.log("fyh: \u4f7f\u7528Java\u8c03\u7528Ts\u4e2d\u7684\u51fd\u6570GgBuySuccessCallBack"),this.successCall()},e.prototype.GgBuyFailCallBack=function(){cc.log("fyh: \u4f7f\u7528Java\u8c03\u7528Ts\u4e2d\u7684\u51fd\u6570GgBuyFailCallBack"),this.failedCall()},e._instance=null,e.mToTsBean=null,e.mUdid=null,e.mToTsBeanInfo=null,t=n([i],e)}();a.default=c,window.JniCtl=c.getInstance(),cc._RF.pop()},{"./akInter/AkInterCtl":"AkInterCtl"}],JniM:[function(e,t,a){"use strict";cc._RF.push(t,"cb657KKp/5MMKZVZgENtvaY","JniM"),Object.defineProperty(a,"__esModule",{value:!0}),a.EADType=void 0,function(e){e.inter="Inter",e.video="Video"}(a.EADType||(a.EADType={})),cc._RF.pop()},{}],ListenerManager:[function(e,t,a){"use strict";cc._RF.push(t,"05dc2tRAiFMobMbxaPK4NIf","ListenerManager");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<a;t++)for(var r=arguments[t],i=0,c=r.length;i<c;i++,o++)n[o]=r[i];return n};Object.defineProperty(a,"__esModule",{value:!0}),a.ListenerManager=a.Delegate=void 0;var o=function(){function e(e,t,a){void 0===a&&(a=!1),this.mIsOnce=!1,this.mListener=e,this.mArgArray=t,this.mIsOnce=a}return Object.defineProperty(e.prototype,"listener",{get:function(){return this.mListener},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"argArray",{get:function(){return this.mArgArray},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOnce",{get:function(){return this.mIsOnce},set:function(e){this.mIsOnce=e},enumerable:!1,configurable:!0}),e}();a.Delegate=o;var r=function(){function e(){this.mListenerMap=new Map}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.has=function(e,t,a){return null!==this.find(e,t,a)},e.prototype.trigger=function(e){for(var t,a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];if(!e)return console.error("Listener type is null!"),!1;var r=[],i=[],c=this.mListenerMap.get(e);c&&(c.forEach(function(e,t){for(var a=0,n=e;a<n.length;a++){var o=n[a];r.push(o),i.push(t)}for(var l=e.length-1;l>=0;--l)e[l].isOnce&&e.splice(l,1);e.length<=0&&c.delete(t)}),c.size<=0&&this.mListenerMap.delete(e));for(var l=r.length,s=0;s<l;s++){var d=r[s];(t=d.listener).call.apply(t,n([i[s]],d.argArray,a))}return l>0},e.prototype.add=function(e,t,a){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];this.addListener.apply(this,n([e,t,a,!1],o))},e.prototype.addOnce=function(e,t,a){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];this.addListener.apply(this,n([e,t,a,!0],o))},e.prototype.remove=function(e,t,a,n){this.removeBy(function(o,r,i){return!(e&&e!==o||t&&t!==r||a&&a!==i.listener||n&&!i.isOnce)})},e.prototype.removeAll=function(e){var t=this;this.mListenerMap.forEach(function(a,n){a.delete(e),a.size<=0&&t.mListenerMap.delete(n)})},e.prototype.addListener=function(e,t,a,n){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];var c=this.find(e,t,a);if(c)c.isOnce=n,console.error("Listener is already exist!");else{var l=new o(a,r,n);this.mListenerMap.get(e).get(t).push(l)}},e.prototype.removeBy=function(e){var t=this;e&&this.mListenerMap.forEach(function(a,n){a.forEach(function(t,o){for(var r=t.length-1;r>=0;--r){var i=t[r];e(n,o,i)&&t.splice(r,1)}t.length<=0&&a.delete(o)}),a.size<=0&&t.mListenerMap.delete(n)})},e.prototype.find=function(e,t,a){if(!e)return console.error("Listener type is null!"),null;if(!t)return console.error("Caller type is null!"),null;if(!a)return console.error("Listener is null!"),null;var n,o;this.mListenerMap.has(e)?n=this.mListenerMap.get(e):(n=new Map,this.mListenerMap.set(e,n)),n.has(t)?o=n.get(t):(o=[],n.set(t,o));for(var r=0,i=o;r<i.length;r++){var c=i[r];if(c.mListener===a)return c}return null},e}();a.ListenerManager=r,cc._RF.pop()},{}],ListenerType:[function(e,t,a){"use strict";cc._RF.push(t,"8ea11Tcb4BI7ojchoTKxYZm","ListenerType"),Object.defineProperty(a,"__esModule",{value:!0}),a.ListenerType=void 0;var n=function(){function e(){}return e.Test="Test",e.GameStart="GameStart",e.UpdateMainUI="UpdateMainUI",e.LoopUpdate="LoopUpdate",e.OnEndOfInput="OnEndOfInput",e.OnDaAnShanChu="OnDaAnShanChu",e.OnDaAnZengJia="OnDaAnZengJia",e.OnEditStateSwitching="OnEditStateSwitching",e.OnBtnAudio="OnBtnAudio",e.OnStopTitleSound="OnStopTitleSound",e.OnPlayTitleSound="OnPlayTitleSound",e.OnLevelChange="OnLevelChange",e.OnLevelSwitch="OnLevelSwitch",e.OnGameEnable="OnGameEnable",e.OnResetPlayGame="OnResetPlayGame",e}();a.ListenerType=n,cc._RF.pop()},{}],LoadingView:[function(e,t,a){"use strict";cc._RF.push(t,"9c3e4ELmLdC0ayxt/yeUJAT","LoadingView");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./../../framework/Manager/FileLocalDataManager"),c=e("../../../Game"),l=e("../../framework/BaseUI"),s=e("../../framework/Manager/UIManager"),d=e("../../framework/Utils/LogWrap"),p=e("../GameView/GameViewCtl"),u=e("../TaskView/TaskViewCtl"),f=e("../../node/Model/CardTypeC"),h=e("../MainView/MainView"),g=e("../../framework/Manager/AudioManager"),y=cc._decorator.ccclass,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._resLoaded=0,t}var a;return o(t,e),a=t,Object.defineProperty(t.prototype,"resLoaded",{get:function(){return this._resLoaded},set:function(e){this._resLoaded=e,this.checkJump()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){d.LogWrap.log("LoadingView onLoad"),p.default.getInstance(),c.Game.getInstance(),g.AudioManager.getInstance().initStatue(),this.loadStackedData(),this.loadPackCfg(),this.loadTaskCfg(),this.loadCardSf()},t.prototype.setLocalData=function(){var e=i.ELocalDataType[i.ELocalDataType.Illustrated],t=i.FileLocalDataManager.getInstance().getUserValue(e);if(t){var a=[];for(var n in f.cardType_C)l=n,isNaN(l)||"\u84dd\u56fe"!=(c=f.cardType_C[n])&&"\u5947\u602a\u7684\u5165\u53e3"!=c&&a.push({idx:n,data:c,dataComplete:this.findLocalByKey(t,c)});i.FileLocalDataManager.getInstance().setUserValue(e,a)}else{var o=[];for(var r in f.cardType_C){var c,l=r;isNaN(l)||"\u84dd\u56fe"!=(c=f.cardType_C[r])&&"\u5947\u602a\u7684\u5165\u53e3"!=c&&o.push({idx:r,data:c,dataComplete:!1})}i.FileLocalDataManager.getInstance().setUserValue(e,o)}},t.prototype.findLocalByKey=function(e,t){for(var a=0;a<e.length;a++){var n=e[a];if(n.data==t)return n.dataComplete}return!1},t.prototype.checkJump=function(){4==this.resLoaded&&(s.UIManager.getInstance().closeUI(a),s.UIManager.getInstance().openUI(h.default))},t.prototype.loadStackedData=function(){var e=this;cc.loader.loadRes("data/stackedCfg",function(t,a){var n=a.json;e.oprateJson(n),d.LogWrap.log("StackedData\u52a0\u8f7d\u8d44\u6e90\u6210\u529f"),e.setLocalData(),e.resLoaded++})},t.prototype.loadPackCfg=function(){var e=this;cc.loader.loadRes("data/packCfg",function(t,a){c.GAME.packCfg=a.json,d.LogWrap.log("PackCfg\u52a0\u8f7d\u6210\u529f"),e.resLoaded++})},t.prototype.loadTaskCfg=function(){var e=this;cc.loader.loadRes("data/taskCfg",function(t,a){u.default.getInstance().taskCfg=a.json.task,d.LogWrap.log("taskCfg\u52a0\u8f7d\u6210\u529f"),e.resLoaded++})},t.prototype.loadCardSf=function(){var e=this;cc.loader.loadResDir("card",function(){d.LogWrap.log("card\u6587\u4ef6\u5939\u52a0\u8f7d\u6210\u529f"),e.resLoaded++})},t.prototype.oprateJson=function(e){var t=e.version;d.LogWrap.log("\u5f53\u524dstackCfg.json\u7684\u7248\u672c\u662f"+t);var a=e.config,n=[],o=[];a.forEach(function(e){e.cfg.forEach(function(e){n.includes(e)||(n.push(e),o.push([[]]))})});for(var r=0;r<n.length;r++)for(var i=n[r],l=o[r],s=0;s<a.length;s++){var p=a[s].cfg;if(p.includes(i))for(var u=0;u<p.length;u++){var f=p[u];l.includes(f)||l.push(f)}}a.forEach(function(e){e.log?d.LogWrap.log(""+e.log):d.LogWrap.warn("no log")}),c.GAME.keyArr=n,c.GAME.valueArr=o,c.GAME.configData=a},t.className="LoadingView",a=r([y],t)}(l.BaseUI);a.default=m,cc._RF.pop()},{"../../../Game":"Game","../../framework/BaseUI":"BaseUI","../../framework/Manager/AudioManager":"AudioManager","../../framework/Manager/UIManager":"UIManager","../../framework/Utils/LogWrap":"LogWrap","../../node/Model/CardTypeC":"CardTypeC","../GameView/GameViewCtl":"GameViewCtl","../MainView/MainView":"MainView","../TaskView/TaskViewCtl":"TaskViewCtl","./../../framework/Manager/FileLocalDataManager":"FileLocalDataManager"}],LogWrap:[function(e,t,a){"use strict";cc._RF.push(t,"615f7lsxLNDWJSqVJoRIFW3","LogWrap"),Object.defineProperty(a,"__esModule",{value:!0}),a.LogWrap=void 0;var n=e("../Data/ConstValue"),o=function(){function e(){}return e.getDateString=function(){var e=new Date,t=e.getHours().toString(),a="";return a+=(1==t.length?"0"+t:t)+":",a+=(1==(t=e.getMinutes().toString()).length?"0"+t:t)+":",a+=(1==(t=e.getSeconds().toString()).length?"0"+t:t)+":",1==(t=e.getMilliseconds().toString()).length&&(t="00"+t),2==t.length&&(t="0"+t),"["+(a+=t)+"]"},e.stack=function(){return""},e.log=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var o=console.log||cc.log;n.ConstValue.IS_EDITIONS||o.call(this,cc.js.formatStr.apply(cc,arguments),e.stack(2),e.getDateString())},e.info=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var o=console.log||cc.log;n.ConstValue.IS_EDITIONS||o.call(this,cc.js.formatStr.apply(cc,arguments),"color:#00CD00;",e.stack(2),e.getDateString())},e.warn=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var o=console.log||cc.log;n.ConstValue.IS_EDITIONS||o.call(this,cc.js.formatStr.apply(cc,arguments),"color:#ee7700;",e.stack(2),e.getDateString())},e.err=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var o=console.log||cc.log;n.ConstValue.IS_EDITIONS||o.call(this,cc.js.formatStr.apply(cc,arguments),"color:red",e.stack(2),e.getDateString())},e}();a.LogWrap=o,cc._RF.pop()},{"../Data/ConstValue":"ConstValue"}],MainView:[function(e,t,a){"use strict";cc._RF.push(t,"94c68IFpcFHmbG6oZxG89Vy","MainView");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../../Game"),c=e("../../framework/BaseUI"),l=e("../../framework/Data/CustomTypes"),s=e("../../framework/Manager/AudioManager"),d=e("../../framework/Manager/FileLocalDataManager"),p=e("../../framework/Manager/UIManager"),u=e("../GameView/GameView"),f=e("../ShopView/ShopCtl"),h=cc._decorator,g=h.ccclass,y=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.settingPanel=null,t.difficultyPanel=null,t.startPanel=null,t.musicBgSpr=null,t.soundBgSpr=null,t.musicQiuSpr=null,t.soundQiuSpr=null,t.yellowBg=null,t.brownBg=null,t.yellowQiu=null,t.brownQiu=null,t.continueGameNode=null,t.newGameNode=null,t.btnPanel=null,t.unlockPanel=null,t}var a;return o(t,e),a=t,t.prototype.start=function(){s.AudioManager.getInstance().playBGM("bgmMain"),this.refreshSetting(),i.GAME.difficultyIsUnlock=d.FileLocalDataManager.getInstance().getUserValue(l.GameDifficulty.GAME_DIFFICULT),f.default.getInstance().nowIdx=1},t.prototype.setClick=function(){s.AudioManager.getInstance().clickBtn(),s.AudioManager.getInstance().playSound("pop"),this.settingPanel.active=!0,i.GAME.pageAppearFunc(this.settingPanel)},t.prototype.startGameClick=function(){s.AudioManager.getInstance().clickBtn(),this.startPanel.active=!1,this.difficultyPanel.active=!0,i.GAME.pageAppearFunc(this.difficultyPanel.children[1]),this.refreshDifficultyPanel()},t.prototype.closeSetting=function(){s.AudioManager.getInstance().clickBtn(),this.settingPanel.active=!1},t.prototype.backStartGame=function(){s.AudioManager.getInstance().clickBtn(),this.startPanel.active=!0,this.difficultyPanel.active=!1},t.prototype.bgmClick=function(){s.AudioManager.getInstance().clickBtn();var e=!s.AudioManager.getInstance().getBGMStatue();s.AudioManager.getInstance().setBGMStatue(e),e&&s.AudioManager.getInstance().playBGM("bgmMain"),this.refreshSetting()},t.prototype.soundClick=function(){s.AudioManager.getInstance().clickBtn();var e=!s.AudioManager.getInstance().getAudioStatue();s.AudioManager.getInstance().setAudioStatue(e),this.refreshSetting()},t.prototype.refreshSetting=function(){var e=s.AudioManager.getInstance().getBGMStatue(),t=s.AudioManager.getInstance().getAudioStatue();this.musicBgSpr.spriteFrame=e?this.yellowBg:this.brownBg,this.soundBgSpr.spriteFrame=t?this.yellowBg:this.brownBg,this.musicQiuSpr.spriteFrame=e?this.yellowQiu:this.brownQiu,this.soundQiuSpr.spriteFrame=t?this.yellowQiu:this.brownQiu,this.musicQiuSpr.node.x=e?14.815:-14.815,this.soundQiuSpr.node.x=t?14.815:-14.815},t.prototype.btnClick=function(e,t){if(s.AudioManager.getInstance().clickBtn(),4!=Number(t)||i.GAME.difficultyIsUnlock){e.target.getChildByName("select").active=!0,this.newGameNode.active=!0,this.newGameNode.x=e.target.x,this.hitOtherBtn(e.target),i.GAME.coefficientOfDifficulty=Number(t);var a="diff"+i.GAME.coefficientOfDifficulty,n=d.FileLocalDataManager.getInstance().getUserValue(a);this.continueGameNode.active=n,this.continueGameNode.x=e.target.x}else this.unlockPanel.active=!0},t.prototype.unlockClose=function(){this.unlockPanel.active=!1},t.prototype.unlock=function(){this.unlockPanel.active=!1,i.GAME.difficultyIsUnlock=!0,this.btnPanel.children[2].getChildByName("select").active=!0,this.newGameNode.active=!0,this.newGameNode.x=this.btnPanel.children[2].x,this.hitOtherBtn(this.btnPanel.children[2]),i.GAME.coefficientOfDifficulty=4,d.FileLocalDataManager.getInstance().setUserValue(l.GameDifficulty.GAME_DIFFICULT,!0)},t.prototype.refreshDifficultyPanel=function(){this.continueGameNode.active=!1,this.newGameNode.active=!1;for(var e=0;e<3;e++)this.btnPanel.children[e].getChildByName("select").active=!1},t.prototype.hitOtherBtn=function(e){for(var t=0;t<3;t++){var a=this.btnPanel.children[t];a!=e&&(a.getChildByName("select").active=!1)}},t.prototype.newGameClick=function(){s.AudioManager.getInstance().clickBtn();var e="diff"+i.GAME.coefficientOfDifficulty;d.FileLocalDataManager.getInstance().setUserValue(e,null),p.UIManager.getInstance().openUI(u.default),p.UIManager.getInstance().closeUI(a)},t.prototype.continueGameClick=function(){s.AudioManager.getInstance().clickBtn(),p.UIManager.getInstance().openUI(u.default),p.UIManager.getInstance().closeUI(a)},t.className="MainView",r([y(cc.Node)],t.prototype,"settingPanel",void 0),r([y(cc.Node)],t.prototype,"difficultyPanel",void 0),r([y(cc.Node)],t.prototype,"startPanel",void 0),r([y(cc.Sprite)],t.prototype,"musicBgSpr",void 0),r([y(cc.Sprite)],t.prototype,"soundBgSpr",void 0),r([y(cc.Sprite)],t.prototype,"musicQiuSpr",void 0),r([y(cc.Sprite)],t.prototype,"soundQiuSpr",void 0),r([y(cc.SpriteFrame)],t.prototype,"yellowBg",void 0),r([y(cc.SpriteFrame)],t.prototype,"brownBg",void 0),r([y(cc.SpriteFrame)],t.prototype,"yellowQiu",void 0),r([y(cc.SpriteFrame)],t.prototype,"brownQiu",void 0),r([y(cc.Node)],t.prototype,"continueGameNode",void 0),r([y(cc.Node)],t.prototype,"newGameNode",void 0),r([y(cc.Node)],t.prototype,"btnPanel",void 0),r([y(cc.Node)],t.prototype,"unlockPanel",void 0),a=r([g],t)}(c.BaseUI);a.default=m,cc._RF.pop()},{"../../../Game":"Game","../../framework/BaseUI":"BaseUI","../../framework/Data/CustomTypes":"CustomTypes","../../framework/Manager/AudioManager":"AudioManager","../../framework/Manager/FileLocalDataManager":"FileLocalDataManager","../../framework/Manager/UIManager":"UIManager","../GameView/GameView":"GameView","../ShopView/ShopCtl":"ShopCtl"}],MapControl:[function(e,t){"use strict";cc._RF.push(t,"344b1z7aUhECrDCyOAaN8pj","MapControl");var a,n=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},r=e("./../../../Game"),i=cc._decorator,c=i.ccclass,l=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.map=null,t.defaultScaling=1.1,t.minScale=1,t.maxScale=3,t.moveOffset=2,t.increaseRate=1e4,t.fingerIncreaseRate=1,t.locked=!1,t.singleTouchCb=null,t.isMoving=!1,t.mapTouchList=[],t.isStrict=!1,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.addEvent(),this.smoothOperate(this.map,cc.Vec2.ZERO,this.defaultScaling)},t.prototype.canStartMove=function(e){var t=e.getStartLocation(),a=e.getLocation();return Math.abs(a.x-t.x)>this.moveOffset||Math.abs(a.y-t.y)>this.moveOffset},t.prototype.addEvent=function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){var t=this;if(!this.locked){var a=e.getTouches();if(this.isStrict&&(a.filter(function(e){var a=cc.v2(e.getStartLocation()),n=t.node.convertToWorldSpaceAR(cc.Vec2.ZERO);return cc.rect(n.x-t.node.width/2,n.y-t.node.height/2,t.node.width,t.node.height).contains(a)}).forEach(function(e){0===t.mapTouchList.filter(function(t){return t.id===e.getID()}).length&&(t.mapTouchList[t.mapTouchList.length]={id:e.getID(),touch:e})}),a=this.mapTouchList.map(function(e){return e.touch})),a.length>=2){this.isMoving=!0;var n,o=a[0],r=a[1],i=cc.v2(o.getDelta()),c=cc.v2(r.getDelta()),l=this.map.convertToNodeSpaceAR(cc.v2(o.getLocation())),s=this.map.convertToNodeSpaceAR(cc.v2(r.getLocation())),d=l.sub(s),p=cc.v2(this.fingerIncreaseRate,this.fingerIncreaseRate),u=i.sub(c).scale(p);n=Math.abs(d.x)>Math.abs(d.y)?(d.x+u.x)/d.x*this.map.scaleX:(d.y+u.y)/d.y*this.map.scaleY;var f=s.add(cc.v2(d.x/2,d.y/2));this.smoothOperate(this.map,f,n)}else if(1===a.length&&(this.isMoving||this.canStartMove(a[0]))){this.isMoving=!0;var h=cc.v2(a[0].getDelta());this.dealMove(h,this.map,this.node)}}},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){if(!this.locked){if((this.isStrict?this.mapTouchList:e.getTouches()).length<=1){if(!this.isMoving){var t=cc.v2(e.getLocation()),a=this.map.convertToNodeSpaceAR(t);this.dealSelect(a)}this.isMoving=!1}this.isStrict&&this.removeTouchFromContent(e,this.mapTouchList)}},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){this.locked||((this.isStrict?this.mapTouchList:e.getTouches()).length<=1&&(this.isMoving=!1),this.isStrict&&this.removeTouchFromContent(e,this.mapTouchList))},this),this.node.on(cc.Node.EventType.MOUSE_WHEEL,function(e){if(!this.locked){var t=cc.v2(e.getLocation()),a=e.getScrollY(),n=this.map.scale+a/this.increaseRate,o=this.map,r=o.convertToNodeSpaceAR(t);this.smoothOperate(o,r,n)}},this)},t.prototype.removeTouchFromContent=function(e,t){for(var a=e.getTouches().map(function(e){return e.getID()}),n=t.length-1;n>=0;--n)a.indexOf(t[n].id)>-1&&t.splice(n,1)},t.prototype.smoothOperate=function(e,t,a){if(this.minScale<=a&&a<=this.maxScale){var n=a-e.scaleX,o=t.scale(cc.v2(n,n)),i=e.getPosition().sub(o),c=this.fingerIncreaseRate.toString(),l=c.split(".")[1]?c.split(".")[1].length:0,s=Math.pow(10,2+l);a=Math.floor(a*s)/s,e.scale=a,this.dealScalePos(i,e)}else a=cc.misc.clampf(a,this.minScale,this.maxScale);r.GAME.nowScale=a,r.GAME.cardDistance=10*a},t.prototype.dealScalePos=function(e,t){if(1===t.scale)e=cc.Vec2.ZERO;else{var a=this.node.convertToWorldSpaceAR(e),n=this.node.convertToNodeSpaceAR(a),o=this.calculateEdge(t,this.node,n);o.left>0&&(e.x-=o.left),o.right>0&&(e.x+=o.right),o.top>0&&(e.y+=o.top),o.bottom>0&&(e.y-=o.bottom)}t.setPosition(e)},t.prototype.dealMove=function(e,t,a){var n=t.convertToWorldSpaceAR(cc.Vec2.ZERO),o=a.convertToNodeSpaceAR(n);o.x+=e.x,o.y+=e.y;var r=this.calculateEdge(t,a,o);r.left<=0&&r.right<=0&&(t.x+=e.x),r.top<=0&&r.bottom<=0&&(t.y+=e.y)},t.prototype.dealSelect=function(e){cc.log("click map on ("+e.x+", "+e.y+")"),this.singleTouchCb&&this.singleTouchCb(e)},t.prototype.calculateEdge=function(e,t,a){var n=(t.width-e.width*e.scaleX)/2,o=(t.height-e.height*e.scaleY)/2;return{left:n+a.x,right:n-a.x,top:o-a.y,bottom:o+a.y}},t.prototype.setStrictPattern=function(e){this.isStrict=e},t.prototype.getStrictPattern=function(){return this.isStrict},o([l({type:cc.Node,tooltip:"\u76ee\u6807\u8282\u70b9"})],t.prototype,"map",void 0),o([l({tooltip:"\u56fe\u7247\u521d\u59cb\u7f29\u653e"})],t.prototype,"defaultScaling",void 0),o([l({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5c0fscale"})],t.prototype,"minScale",void 0),o([l({tooltip:"\u56fe\u7247\u7f29\u653e\u6700\u5927scale"})],t.prototype,"maxScale",void 0),o([l({tooltip:"\u5355\u70b9\u89e6\u6478\u5bb9\u5fcd\u8bef\u5dee"})],t.prototype,"moveOffset",void 0),o([l({tooltip:"\u6eda\u8f6e\u7f29\u653e\u6bd4\u7387"})],t.prototype,"increaseRate",void 0),o([l({displayName:"\u53cc\u6307\u7f29\u653e\u901f\u7387",max:10,min:.001})],t.prototype,"fingerIncreaseRate",void 0),o([l],t.prototype,"isStrict",void 0),o([c],t)}(cc.Component);t.exports=s,cc._RF.pop()},{"./../../../Game":"Game"}],MathExtension:[function(e,t){"use strict";cc._RF.push(t,"81407Q2vf9Ezor3KOYrFKb8","MathExtension"),Math.randomRangeInt=function(e,t){var a=Math.random();return 1===a&&(a-=Number.EPSILON),e+Math.floor(a*(t-e))},Math.randomRangeFloat=function(e,t){return e+Math.random()*(t-e)},Math.fmod=function(e,t){return e-Math.floor(e/t)*t},cc._RF.pop()},{}],MathUtils:[function(e,t,a){"use strict";cc._RF.push(t,"aa960SepSxHGal1p7xVIQi8","MathUtils"),Object.defineProperty(a,"__esModule",{value:!0}),a.MathUtils=void 0;var n=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.getAngle=function(e){return 180*e/Math.PI},e.prototype.getRadian=function(e){return e/180*Math.PI},e.prototype.getRadian2=function(e,t,a,n){var o=a-e,r=n-t;return Math.atan2(r,o)},e.prototype.getDistance=function(e,t){var a=t.x-e.x,n=t.y-e.y,o=a*a+n*n;return Math.sqrt(o)},e.prototype.limit=function(e,t){e=Math.min(e,t);var a=(t=Math.max(e,t))-e;return e+Math.random()*a},e.prototype.limitInteger=function(e,t){return Math.round(this.limit(e,t))},e.prototype.randomArray=function(e){return e[Math.floor(Math.random()*e.length)]},e.prototype.SagPoint=function(e,t,a,n){var o=(a.x-n.x)*(a.x-n.x)+(a.y-n.y)*(a.y-n.y),r=((e-a.x)*(n.x-a.x)+(t-a.y)*(n.y-a.y))/o,i=a.x+r*(n.x-a.x),c=a.y+r*(n.y-a.y);return new cc.Vec2(i,c)},e.prototype.extendedLinePoint=function(e,t,a){var n,o,r;return n=this.getDistance(e,t),t.x>e.x&&t.y>e.y?(o=a/n*Math.abs(e.x-t.x)+t.x,r=a/n*Math.abs(e.y-t.y)+t.y):t.x<e.x&&t.y>e.y?(o=-a/n*Math.abs(e.x-t.x)+t.x,r=a/n*Math.abs(e.y-t.y)+t.y):t.x<e.x&&t.y<e.y?(o=-a/n*Math.abs(e.x-t.x)+t.x,r=-a/n*Math.abs(e.y-t.y)+t.y):t.x>e.x&&t.y<e.y&&(o=a/n*Math.abs(e.x-t.x)+t.x,r=-a/n*Math.abs(e.y-t.y)+t.y),new cc.Vec2(o,r)},e.prototype.getTwoPointsRadian1=function(e,t){var a=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y),o=n/Math.sqrt(Math.pow(a,2)+Math.pow(n,2)),r=Math.acos(o),i=Math.floor(180/(Math.PI/r));return t.x>e.x&&t.y<e.y&&(i=180-i),t.x==e.x&&t.y>e.y&&(i=180),t.x>e.x&&t.y==e.y&&(i=90),t.x<e.x&&t.y<e.y&&(i=180+i),t.x<e.x&&t.y==e.y&&(i=270),t.x<e.x&&t.y>e.y&&(i=360-i),i},e.prototype.getTwoPointsRadian2=function(e,t){var a=e.x-t.x,n=e.y-t.y;return-180*Math.atan2(n,a)/Math.PI-90},e.prototype.fingCrossPoint=function(e,t,a,n){var o=t.y-e.y,r=e.x-t.x,i=e.x*t.y-t.x*e.y,c=n.y-a.y,l=a.x-n.x,s=a.x*n.y-n.x*a.y,d=o*l-c*r;if(0==d)return null;var p=(i*l-s*r)/d,u=(o*s-c*i)/d;return new cc.Vec2(Math.floor(p),Math.floor(u))},e.prototype.accAdd=function(e,t){var a,n,o=0,r=0;try{o=e.toString().split(".")[1].length}catch(c){o=0}try{r=t.toString().split(".")[1].length}catch(c){r=0}if(n=Math.abs(o-r),a=Math.pow(10,Math.max(o,r)),n>0){var i=Math.pow(10,n);o>r?(e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".",""))*i):(e=Number(e.toString().replace(".",""))*i,t=Number(t.toString().replace(".","")))}else e=Number(e.toString().replace(".","")),t=Number(t.toString().replace(".",""));return(e+t)/a},e.prototype.accSub=function(e,t){var a,n=0,o=0;try{n=e.toString().split(".")[1].length}catch(r){n=0}try{o=t.toString().split(".")[1].length}catch(r){o=0}return((e*(a=Math.pow(10,Math.max(n,o)))-t*a)/a).toFixed(n>=o?n:o)},e.prototype.accMul=function(e,t){var a=0,n=e.toString(),o=t.toString();try{a+=n.split(".")[1].length}catch(r){}try{a+=o.split(".")[1].length}catch(r){}return Number(n.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,a)},e.prototype.accDiv=function(e,t){var a=0,n=0;try{a=e.toString().split(".")[1].length}catch(o){}try{n=t.toString().split(".")[1].length}catch(o){}return Number(e.toString().replace(".",""))/Number(t.toString().replace(".",""))*Math.pow(10,n-a)},e}();a.MathUtils=n,cc._RF.pop()},{}],NetWork:[function(e,t,a){"use strict";cc._RF.push(t,"9cd01aQNbFMUY4sUMN0yYH5","NetWork"),Object.defineProperty(a,"__esModule",{value:!0}),a.NetWork=void 0;var n=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.httpRequest=function(e,t,a,n,o){void 0===n&&(n=null),void 0===o&&(o="");var r=new XMLHttpRequest;r.open(t,e),r.timeout=1e4,r.setRequestHeader("Content-Type",a),r.withCredentials=!0,r.onreadystatechange=function(){if(console.log("httpRequest rsp status",r.status,"        xhr.readyState",r.readyState,"        xhr.responseText",r.responseText),4==r.readyState&&r.status>=200&&r.status<=400){var e=JSON.parse(r.responseText);n&&e.errcode}},r.ontimeout=function(){console.log("httpRequest timeout"),n&&n(!0,null)},r.onerror=function(){console.log("httpRequest error"),n&&n(!0,null)},r.send(o)},e}();a.NetWork=n,cc._RF.pop()},{}],ShopCtl:[function(e,t,a){"use strict";cc._RF.push(t,"3c4f2NdGrxM946agJUgFTf5","ShopCtl");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../node/CardPack/CardPack"),c=e("../GameView/GameViewCtl"),l=e("../TaskView/TaskViewCtl"),s=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowIdx=1,t}var a;return o(t,e),a=t,t.getInstance=function(){return a.sInstance||(a.sInstance=new a),a.sInstance},t.prototype.createPackage=function(e){l.default.getInstance().completeTask(5);var t=c.default.getInstance().mGameLayerView.cardPackPre,a=cc.instantiate(t);a.parent=c.default.getInstance().mGameLayerView.carPanel,a.getComponent(i.default).cardPackTypeIdx=e;var n=this.findSpace();this.nowIdx++,a.x=n.x,a.y=n.y,a.zIndex=3},t.prototype.findSpace=function(){return[cc.v2(-300,-30),cc.v2(0,-30),cc.v2(300,-30)][this.nowIdx%3]},t.sInstance=null,a=r([s],t)}(cc.Component);a.default=d,cc._RF.pop()},{"../../node/CardPack/CardPack":"CardPack","../GameView/GameViewCtl":"GameViewCtl","../TaskView/TaskViewCtl":"TaskViewCtl"}],TaskViewCtl:[function(e,t,a){"use strict";cc._RF.push(t,"3c064HQ++FCYoStfPX81IfR","TaskViewCtl");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../../Game"),c=e("../GameTimeView/GameTimeViewCtl"),l=cc._decorator.ccclass,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowTaskId=0,t.mTaskView=null,t}var a;return o(t,e),a=t,t.getInstance=function(){return a.sInstance||(a.sInstance=new a),a.sInstance},t.prototype.completeTask=function(e){this.nowTaskId==e&&(this.mTaskView.getBtn.node.active=!0)},t.prototype.checkImmediately=function(){i.GAME.allCoinCard.length>=4&&this.completeTask(4),c.default.getInstance().getNowDays()>=2&&this.completeTask(6)},t.prototype.resetTask=function(){this.mTaskView.getBtn.node.active=!1,a.getInstance().nowTaskId=0,a.getInstance().mTaskView.updateTaskLabel()},t.sInstance=null,a=r([l],t)}(cc.Component);a.default=s,cc._RF.pop()},{"../../../Game":"Game","../GameTimeView/GameTimeViewCtl":"GameTimeViewCtl"}],TaskView:[function(e,t,a){"use strict";cc._RF.push(t,"6b1671SfhdF9r5JT1L/1ur5","TaskView");var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),r=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var i=e("../../../Game"),c=e("../../framework/BaseUI"),l=e("../../framework/Manager/AudioManager"),s=e("../../node/Card/CardFactoryCtl"),d=e("./TaskViewCtl"),p=cc._decorator,u=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.taskLabel=null,t.getBtn=null,t}return o(t,e),t.prototype.onLoad=function(){d.default.getInstance().mTaskView=this,this.updateTaskLabel()},t.prototype.updateTaskLabel=function(){var e=this;this.taskLabel.node.parent.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){e.taskLabel.string="\u4e3b\u7ebf\u4efb\u52a1\uff1a"+d.default.getInstance().taskCfg[d.default.getInstance().nowTaskId],e.taskLabel.addComponent(cc.LabelOutline),e.taskLabel.getComponent(cc.LabelOutline).color=cc.Color.BLACK,e.taskLabel.getComponent(cc.LabelOutline).enabled=!0,d.default.getInstance().checkImmediately()}),cc.delayTime(.5),cc.fadeIn(.5)))},t.prototype.click=function(){l.AudioManager.getInstance().clickBtn(),i.GAME.isContinueGame&&(d.default.getInstance().nowTaskId++,this.updateTaskLabel(),this.getBtn.node.active=!1,s.default.getInstance().createCoinCard(1))},t.prototype.getTaskIsFinish=function(){return this.getBtn.node.active},t.className="TaskView",r([f(cc.Label)],t.prototype,"taskLabel",void 0),r([f(cc.Button)],t.prototype,"getBtn",void 0),r([u],t)}(c.BaseUI);a.default=h,cc._RF.pop()},{"../../../Game":"Game","../../framework/BaseUI":"BaseUI","../../framework/Manager/AudioManager":"AudioManager","../../node/Card/CardFactoryCtl":"CardFactoryCtl","./TaskViewCtl":"TaskViewCtl"}],TimeManager:[function(e,t,a){"use strict";cc._RF.push(t,"6a93cVTR3pJrpapom9vowVf","TimeManager"),Object.defineProperty(a,"__esModule",{value:!0}),a.TimeManager=void 0;var n=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.getCurrentTime=function(){return(new Date).getTime()},e.prototype.getNowFormatDate=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();a>=1&&a<=9&&(a="0"+a),n>=0&&n<=9&&(n="0"+n);var o=e.getHours(),r=e.getMinutes(),i=e.getSeconds(),c=e.getMilliseconds();return o>=0&&o<=9&&(o="0"+o),r>=0&&r<=9&&(r="0"+r),i>=0&&i<=9&&(i="0"+i),c>=0&&c<=9&&(c="00"+c),c>=10&&c<=90&&(c="0"+c),t+":"+a+":"+n+":"+o+":"+r+":"+i+":"+c},e.instance=null,e}();a.TimeManager=n,cc._RF.pop()},{}],Tools:[function(e,t,a){"use strict";cc._RF.push(t,"8c9926FhnVH2Z4Gs2ZXOlDV","Tools");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0}),a.Tools=a.ArtMoveParam=void 0;a.ArtMoveParam=function(e,t){this.time=0,this.pos=cc.Vec2.ZERO,this.time=e,this.pos=t};var o=cc._decorator,r=o.ccclass,i=(o.property,function(){function e(){}return e.playSpine=function(e,t,a,n){void 0===n&&(n=null),e.setAnimation(0,t,a)&&e.setCompleteListener(function(e){(e.animation?e.animation.name:"")===t&&n&&null!=n&&n()})},e.getQueryVariable=function(e){if((t=window.location.href.split("?")).length<2)return!1;for(var t=t[1].split("&"),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]==e)return n[1]}return!1},e.runArtMoveSequence=function(e,t,a){void 0===a&&(a=null);var n=e.getPosition().sub(t[t.length-1].pos);function o(e){return e.add(n)}if(e.setPosition(o(t[0].pos)),t.length<=1)a&&a();else{for(var r=[],i=1;i<t.length-1;i++){var c=.001*(t[i].time-t[i-1].time);r.push(cc.moveTo(c,o(t[i].pos)))}a&&r.push(cc.callFunc(a)),e.runAction(cc.sequence(r))}},e.getNowTimeMS=function(){return(new Date).getTime()},e.getNowTimeS=function(){return Math.floor(.001*(new Date).getTime())},e.getFormatTime=function(e){var t=Math.floor(e/60);t<10&&(t="0"+t);var a=e%60;return a<10&&(a="0"+a),t+":"+a},e.DigitToChinese=function(e){var t=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],a=["","\u5341","\u767e","\u5343"],n="",o="",r=!0,i=0,c=!1;for(e>9&&e<20&&(c=!0);e>0;){var l=e%10;0===l?r||(r=!0,o=t[l]+o):(r=!1,n=c&&1==i?"":t[l],o=(n+=a[i])+o),i++,e=Math.floor(e/10)}return o},n([r],e)}());a.Tools=i,cc._RF.pop()},{}],UIManager:[function(e,t,a){"use strict";cc._RF.push(t,"1c56aS5V4JIfqX3HgeQK24m","UIManager"),Object.defineProperty(a,"__esModule",{value:!0}),a.UIManager=void 0;var n=function(){function e(){this.uiList=[],this.uiRoot=null,this.uiRoot=cc.find("Canvas")}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.openUI=function(e,t,a,n,o,r){for(var i=this,c=[],l=6;l<arguments.length;l++)c[l-6]=arguments[l];this.getUI(e)||cc.loader.loadRes(e.getUrl(),function(e,t,a){r&&r(e,t,a)},function(r,l){if(r)cc.log(r);else if(!i.getUI(e)){var s=cc.instantiate(l);s.parent=t||i.uiRoot,n&&(s.zIndex=n);var d=s.getComponent(e);d.data=a,d.tag=e,i.uiList.push(d),o&&o(c)}})},e.prototype.closeUI=function(e){for(var t=0;t<this.uiList.length;++t)if(this.uiList[t].tag===e)return this.uiList[t].node.destroy(),void this.uiList.splice(t,1)},e.prototype.showUI=function(e,t,a,n){var o=this,r=this.getUI(e);r?(r.data=a,r.node.active=!0,r.onShow(),n&&n()):this.openUI(e,t,a,0,function(){n&&n(),o.getUI(e).onShow()})},e.prototype.hideUI=function(e){var t=this.getUI(e);t&&(t.node.active=!1)},e.prototype.getUI=function(e){for(var t=0;t<this.uiList.length;++t)if(this.uiList[t].tag===e)return this.uiList[t];return null},e}();a.UIManager=n,cc._RF.pop()},{}],UserBehaviorCollectCtl:[function(e,t,a){"use strict";cc._RF.push(t,"3c6c6t1G3tH+bwt66JMs5oW","UserBehaviorCollectCtl");var n=this&&this.__decorate||function(e,t,a,n){var o,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(r<3?o(i):r>3?o(t,a,i):o(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("./../../framework/Utils/LogWrap"),r=e("../../framework/Manager/FileLocalDataManager"),i=e("../JniCtl"),c=e("./UserBehaviorCollectM"),l=cc._decorator.ccclass,s=function(){function e(){}var t;return t=e,e.init=function(){cc.game.on(cc.game.EVENT_HIDE,this.onHideGame.bind(this),this),cc.game.on(cc.game.EVENT_SHOW,this.onShowGame.bind(this),this)},e.gDD=function(e){switch(e){case c.EGDDType.Play_20min:case c.EGDDType.Play_30min:t.onPlayMin(e);break;case c.EGDDType.Play_every_20min:case c.EGDDType.Play_every_30min:t.onPlayMin1(e);break;case c.EGDDType.level_10:case c.EGDDType.level_20:case c.EGDDType.level_50:case c.EGDDType.level_100:t.onLevel(e);break;case c.EGDDType.start_loading:case c.EGDDType.end_loading:case c.EGDDType.loading_error:t.onLoading(e);break;case c.EGDDType.chapter_2:case c.EGDDType.chapter_3:case c.EGDDType.chapter_4:case c.EGDDType.chapter_5:case c.EGDDType.gift_get:case c.EGDDType.gift_open:case c.EGDDType.gift_reward:case c.EGDDType.tutorial_open:case c.EGDDType.change_effect:case c.EGDDType.shop_a:case c.EGDDType.shop_b:case c.EGDDType.shop_tip:case c.EGDDType.shop_refresh:case c.EGDDType.shop_withdraw:case c.EGDDType.avc_get:case c.EGDDType.acv_unlock1:case c.EGDDType.acv_unlock2:case c.EGDDType.acv_unlock3:case c.EGDDType.unlock_space:case c.EGDDType.use_tip:case c.EGDDType.use_refresh:case c.EGDDType.use_withdraw:case c.EGDDType.level_success:case c.EGDDType.level_fail:case c.EGDDType.level_rescue:case c.EGDDType.billing_a:case c.EGDDType.billing_b:case c.EGDDType.billing_removead:this.onPublicDot(e)}},e.FirebaseDot=function(e){cc.log("Firebase\u6253\u70b9:"+e),i.default.callStaticMethod(this.utilFirebasePath,"loggerStringEvent","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,"","")},e.FirebaseDotWithP=function(e,t,a){cc.log("Firebase\u6253\u70b9:"+e+"key:"+t+"value:"+a),i.default.callStaticMethod(this.utilFirebasePath,"loggerStringEvent","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",e,t,a)},e.onLevel=function(e){r.FileLocalDataManager.getInstance().getUserValue(e)||(r.FileLocalDataManager.getInstance().setUserValue(e,!0),this.FirebaseDot(e))},e.onPlayMin=function(e){var t=r.FileLocalDataManager.getInstance().getUserValue(e);console.log("\u7c7b\u578b"+e+"\u662f\u5426\u5b58\u5728"+t),t||(r.FileLocalDataManager.getInstance().setUserValue(e,!0),this.FirebaseDot(e))},e.onPlayMin1=function(e){this.FirebaseDot(e)},e.onLoading=function(e){this.FirebaseDot(e)},e.onPublicDot=function(e){this.FirebaseDot(e)},e.saveFirstInTime=function(){r.FileLocalDataManager.getInstance().getUserValue(c.LocalData.Play_first)?r.FileLocalDataManager.getInstance().setUserValue(c.LocalData.Play_openTime,Date.now()):(r.FileLocalDataManager.getInstance().setUserValue(c.LocalData.Play_first,Date.now()),r.FileLocalDataManager.getInstance().setUserValue(c.LocalData.Play_openTime,Date.now()))},e.onHideGame=function(){cc.log("fyh dot: \u6e38\u620f\u8fdb\u5165\u540e\u53f0"),this.saveBackTime()},e.onShowGame=function(){cc.log("fyh dot: \u6e38\u620f\u8fdb\u5165\u524d\u53f0")},e.saveBackTime=function(){var e=r.FileLocalDataManager.getInstance().getUserValue(c.LocalData.Play_first),a=r.FileLocalDataManager.getInstance().getUserValue(c.LocalData.Play_openTime),n=a-e,i=Date.now()-a,l=r.FileLocalDataManager.getInstance().getUserValue(c.LocalData.Play_backTime);null==l&&(l=0);var s=i+l;o.LogWrap.log("\u5b58\u5b58\u5b58 alltime"+s),r.FileLocalDataManager.getInstance().setUserValue(c.LocalData.Play_backTime,s),i/=1e3,s/=1e3,(n/=1e3)<=c.EGDDActiveType.Active_24h&&(console.log("alltime = "+s),s>c.EGDDActiveType.Play_20min&&(cc.log("fyh dot:Play_20min"),t.gDD(c.EGDDType.Play_20min)),s>c.EGDDActiveType.Play_30min&&(cc.log("fyh dot:Play_30min"),t.gDD(c.EGDDType.Play_30min)))},e.remainTime_20min=0,e.remainTime_30min=0,e.utilFirebasePath="org/cocos2dx/javascript/utils/FireBaseLoggerUtils",t=n([l],e)}();a.default=s,cc._RF.pop()},{"../../framework/Manager/FileLocalDataManager":"FileLocalDataManager","../JniCtl":"JniCtl","./../../framework/Utils/LogWrap":"LogWrap","./UserBehaviorCollectM":"UserBehaviorCollectM"}],UserBehaviorCollectM:[function(e,t,a){"use strict";cc._RF.push(t,"6314fWxLRRMNrCKuCYFWgC8","UserBehaviorCollectM"),Object.defineProperty(a,"__esModule",{value:!0}),a.LocalData=a.EGDDActiveType=a.EGDDType=void 0,function(e){e.level_10="level_10",e.level_20="level_20",e.level_50="level_50",e.level_100="level_100",e.Play_20min="Play_20min",e.Play_30min="Play_30min",e.Play_every_20min="Play_every_20min",e.Play_every_30min="Play_every_30min",e.start_loading="start_loading",e.end_loading="end_loading",e.loading_error="loading_error",e.chapter_2="chapter_2",e.chapter_3="chapter_3",e.chapter_4="chapter_4",e.chapter_5="chapter_5",e.gift_get="gift_get",e.gift_open="gift_open",e.gift_reward="gift_reward",e.tutorial_open="tutorial_open",e.change_effect="change_effect",e.shop_a="shop_a",e.shop_b="shop_b",e.shop_tip="shop_tip",e.shop_refresh="shop_refresh",e.shop_withdraw="shop_withdraw",e.avc_get="acv_get",e.acv_unlock1="acv_unlock1",e.acv_unlock2="acv_unlock2",e.acv_unlock3="acv_unlock3",e.unlock_space="unlock_space",e.use_tip="use_tip",e.use_refresh="use_refresh",e.use_withdraw="use_withdraw",e.level_success="level_success",e.level_fail="level_fail",e.level_rescue="level_rescue",e.icon_click="icon_click",e.billing_removead="Billing_RemoveAd_Success",e.billing_a="Billing_PackageA_Success",e.billing_b="Billing_PackageB_Success"}(a.EGDDType||(a.EGDDType={})),function(e){e[e.Play_20min=1200]="Play_20min",e[e.Play_30min=1800]="Play_30min",e[e.Active_24h=89400]="Active_24h"}(a.EGDDActiveType||(a.EGDDActiveType={})),function(e){e.Play_first="Play_first",e.Play_openTime="Play_openTime",e.Play_backTime="Play_backTime"}(a.LocalData||(a.LocalData={})),cc._RF.pop()},{}],ZipUtils:[function(e,t,a){"use strict";cc._RF.push(t,"25e6dO7vodFHrpn1RpM9ztB","ZipUtils"),Object.defineProperty(a,"__esModule",{value:!0}),a.ZipUtils=void 0;var n=function(){function e(){}return e.unzip=function(e,t,a,n,o){var r=this;jsb.fileUtils.isDirectoryExist(t)||jsb.fileUtils.createDirectory(t);var i=t+a+"\\";(new JSZip).loadAsync(e).then(function(e){var c=e.files,l=function(){for(var e=function(e){var a=t+e;c[e].dir?jsb.fileUtils.isDirectoryExist(a)||jsb.fileUtils.createDirectory(a):(c[e].async("Uint8Array").then(function(e){r.saveZipFiles(e,a)}),console.log("fyh:\u8def\u5f84exist = "+a))},a=0,n=Object.keys(c);a<n.length;a++)e(n[a]);o&&o()};n?(cc.log("fyh:\u89e3\u538b\u7f29\u524d\u8c03\u7528   call"),n(a,c)&&(jsb.fileUtils.isDirectoryExist(i)&&jsb.fileUtils.removeDirectory(i),l())):l()})},e.saveZipFiles=function(e,t){var a=e instanceof Uint8Array?e:new Uint8Array(e);jsb.fileUtils.writeDataToFile(a,t)?cc.log("\u5199\u5165\u6587\u4ef6\u6210\u529fdest = "+t):cc.log("\u5199\u5165\u6587\u4ef6\u5931\u8d25dest = "+t)},e}();a.ZipUtils=n,cc._RF.pop()},{}]},{},["Game","GameScene","JniCtl","JniM","AkInterCtl","AkInterM","AdBanner","AdBannerItem","AdInter","BidderCtl","UserBehaviorCollectCtl","UserBehaviorCollectM","BaseUI","ConstValue","CustomTypes","GameData","ListenerType","NetWork","AudioManager","FileLocalDataManager","ListenerManager","TimeManager","UIManager","Tools","AdaptiveScreen","AudioPlayExtension","BoundingBoxDemo","BoundingBoxHelp","LogWrap","MathExtension","MathUtils","ZipUtils","CardBase","CardBaseCtl","CardFactoryCtl","CardFightingCtl","CardMergeCtl","CardPack","CardPackM","CreateEnemy","CardDescribe","CardFightingM","CardMergeM","CardPrice","CardTypeC","CardTypeE","GameTimeView","GameTimeViewCtl","GameView","GameViewCtl","MapControl","IllustratedCtl","IllustratedView","LoadingView","MainView","ShopCtl","TaskView","TaskViewCtl"]);